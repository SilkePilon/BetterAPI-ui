import{b as ql}from"./q-babceb26.js";Number.EPSILON===void 0&&(Number.EPSILON=Math.pow(2,-52));Number.isInteger===void 0&&(Number.isInteger=function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e});Math.sign===void 0&&(Math.sign=function(e){return e<0?-1:e>0?1:+e});Function.prototype.name===void 0&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}});Object.assign===void 0&&function(){Object.assign=function(e){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(r!=null)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t}}();function Lt(){}Object.assign(Lt.prototype,{addEventListener:function(e,t){this._listeners===void 0&&(this._listeners={});var n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)},hasEventListener:function(e,t){if(this._listeners===void 0)return!1;var n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1},removeEventListener:function(e,t){if(this._listeners!==void 0){var n=this._listeners,r=n[e];if(r!==void 0){var i=r.indexOf(t);i!==-1&&r.splice(i,1)}}},dispatchEvent:function(e){if(this._listeners!==void 0){var t=this._listeners,n=t[e.type];if(n!==void 0){e.target=this;for(var r=n.slice(0),i=0,a=r.length;i<a;i++)r[i].call(this,e)}}}});var xs="87",Si={LEFT:0,MIDDLE:1,RIGHT:2},ms=0,Lr=1,lo=2,vs=0,fo=1,gs=2,Rn=0,Ht=1,gr=2,_s=1,ga=0,po=1,_n=2,Oi=0,_r=1,yo=2,xo=3,mo=4,vo=5,go=100,bs=101,ws=102,Oa=103,Na=104,Ms=200,Es=201,Ts=202,Ss=203,_o=204,bo=205,As=206,Ls=207,Rs=208,Ps=209,Cs=210,Is=0,Ds=1,Us=2,Ni=3,Fs=4,Os=5,Ns=6,Bs=7,_i=0,zs=1,Gs=2,Ai=0,wo=1,Hs=2,Vs=3,ks=4,_a=300,ba=301,Bi=302,Mo=303,zi=304,Eo=305,wa=306,Ma=307,Ct=1e3,ct=1001,rn=1002,ht=1003,Ea=1004,Ta=1005,tt=1006,To=1007,bi=1008,Sa=1009,Ws=1010,Xs=1011,Rr=1012,js=1013,So=1014,Dn=1015,Aa=1016,Ys=1017,qs=1018,Zs=1019,Pr=1020,Js=1021,Un=1022,Ut=1023,Qs=1024,Ks=1025,en=1026,Fn=1027,Ba=2001,za=2002,Ga=2003,Ha=2004,Va=2100,ka=2101,Wa=2102,Xa=2103,$s=2151,ec=2200,tc=2201,nc=2202,Cr=2300,Ar=2301,Li=2302,an=2400,$t=2401,Ir=2402,Ao=0,rc=1,ic=2,Dr=3e3,ac=3001,Lo=3007,oc=3002,sc=3004,cc=3005,hc=3006,uc=3200,lc=3201,me={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),t=new Array(36),n=0,r;return function(){for(var a=0;a<36;a++)a===8||a===13||a===18||a===23?t[a]="-":a===14?t[a]="4":(n<=2&&(n=33554432+Math.random()*16777216|0),r=n&15,n=n>>4,t[a]=e[a===19?r&3|8:r]);return t.join("")}}(),clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},lerp:function(e,t,n){return(1-n)*e+n*t},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t),e*e*(3-2*e))},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t),e*e*e*(e*(e*6-15)+10))},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*me.DEG2RAD},radToDeg:function(e){return e*me.RAD2DEG},isPowerOfTwo:function(e){return(e&e-1)===0&&e!==0},nearestPowerOfTwo:function(e){return Math.pow(2,Math.round(Math.log(e)/Math.LN2))},nextPowerOfTwo:function(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,e++,e}};function q(e,t){this.x=e||0,this.y=t||0}Object.defineProperties(q.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}});Object.assign(q.prototype,{isVector2:!0,set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return t!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return t!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:function(){var e=new q,t=new q;return function(r,i){return e.set(r,r),t.set(i,i),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var e=Math.atan2(this.y,this.x);return e<0&&(e+=2*Math.PI),e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n},distanceToManhattan:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return t===void 0&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return e===void 0&&(e=[]),t===void 0&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,n){return n!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,a=this.y-e.y;return this.x=i*n-a*r+e.x,this.y=i*r+a*n+e.y,this}});var fc=0;function De(e,t,n,r,i,a,o,s,c,h){Object.defineProperty(this,"id",{value:fc++}),this.uuid=me.generateUUID(),this.name="",this.image=e!==void 0?e:De.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=t!==void 0?t:De.DEFAULT_MAPPING,this.wrapS=n!==void 0?n:ct,this.wrapT=r!==void 0?r:ct,this.magFilter=i!==void 0?i:tt,this.minFilter=a!==void 0?a:bi,this.anisotropy=c!==void 0?c:1,this.format=o!==void 0?o:Ut,this.type=s!==void 0?s:Sa,this.offset=new q(0,0),this.repeat=new q(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=h!==void 0?h:Dr,this.version=0,this.onUpdate=null}De.DEFAULT_IMAGE=void 0;De.DEFAULT_MAPPING=_a;Object.defineProperty(De.prototype,"needsUpdate",{set:function(e){e===!0&&this.version++}});Object.assign(De.prototype,Lt.prototype,{constructor:De,isTexture:!0,clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){if(e.textures[this.uuid]!==void 0)return e.textures[this.uuid];function t(i){var a;if(i instanceof HTMLCanvasElement)a=i;else{a=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),a.width=i.width,a.height=i.height;var o=a.getContext("2d");i instanceof ImageData?o.putImageData(i,0,0):o.drawImage(i,0,0,i.width,i.height)}return a.width>2048||a.height>2048?a.toDataURL("image/jpeg",.6):a.toDataURL("image/png")}var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(this.image!==void 0){var r=this.image;r.uuid===void 0&&(r.uuid=me.generateUUID()),e.images[r.uuid]===void 0&&(e.images[r.uuid]={uuid:r.uuid,url:t(r)}),n.image=r.uuid}return e.textures[this.uuid]=n,n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(this.mapping===_a){if(e.multiply(this.repeat),e.add(this.offset),e.x<0||e.x>1)switch(this.wrapS){case Ct:e.x=e.x-Math.floor(e.x);break;case ct:e.x=e.x<0?0:1;break;case rn:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Ct:e.y=e.y-Math.floor(e.y);break;case ct:e.y=e.y<0?0:1;break;case rn:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}this.flipY&&(e.y=1-e.y)}}});function Ce(e,t,n,r){this.x=e||0,this.y=t||0,this.z=n||0,this.w=r!==void 0?r:1}Object.assign(Ce.prototype,{isVector4:!0,set:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this},add:function(e,t){return t!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return t!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,i=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*r+a[12]*i,this.y=a[1]*t+a[5]*n+a[9]*r+a[13]*i,this.z=a[2]*t+a[6]*n+a[10]*r+a[14]*i,this.w=a[3]*t+a[7]*n+a[11]*r+a[15]*i,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,n,r,i,a=.01,o=.1,s=e.elements,c=s[0],h=s[4],u=s[8],l=s[1],f=s[5],d=s[9],p=s[2],y=s[6],x=s[10];if(Math.abs(h-l)<a&&Math.abs(u-p)<a&&Math.abs(d-y)<a){if(Math.abs(h+l)<o&&Math.abs(u+p)<o&&Math.abs(d+y)<o&&Math.abs(c+f+x-3)<o)return this.set(1,0,0,0),this;t=Math.PI;var m=(c+1)/2,v=(f+1)/2,g=(x+1)/2,_=(h+l)/4,M=(u+p)/4,w=(d+y)/4;return m>v&&m>g?m<a?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(m),r=_/n,i=M/n):v>g?v<a?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(v),n=_/r,i=w/r):g<a?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(g),n=M/i,r=w/i),this.set(n,r,i,t),this}var A=Math.sqrt((y-d)*(y-d)+(u-p)*(u-p)+(l-h)*(l-h));return Math.abs(A)<.001&&(A=1),this.x=(y-d)/A,this.y=(u-p)/A,this.z=(l-h)/A,this.w=Math.acos((c+f+x-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(){var e,t;return function(r,i){return e===void 0&&(e=new Ce,t=new Ce),e.set(r,r,r,r),t.set(i,i,i,i),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return t===void 0&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return e===void 0&&(e=[]),t===void 0&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,n){return n!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}});function br(e,t,n){this.uuid=me.generateUUID(),this.width=e,this.height=t,this.scissor=new Ce(0,0,e,t),this.scissorTest=!1,this.viewport=new Ce(0,0,e,t),n=n||{},n.minFilter===void 0&&(n.minFilter=tt),this.texture=new De(void 0,void 0,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.depthBuffer=n.depthBuffer!==void 0?n.depthBuffer:!0,this.stencilBuffer=n.stencilBuffer!==void 0?n.stencilBuffer:!0,this.depthTexture=n.depthTexture!==void 0?n.depthTexture:null}Object.assign(br.prototype,Lt.prototype,{isWebGLRenderTarget:!0,setSize:function(e,t){(this.width!==e||this.height!==t)&&(this.width=e,this.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function On(e,t,n){br.call(this,e,t,n),this.activeCubeFace=0,this.activeMipMapLevel=0}On.prototype=Object.create(br.prototype);On.prototype.constructor=On;On.prototype.isWebGLRenderTargetCube=!0;function Ge(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._w=r!==void 0?r:1}Object.assign(Ge,{slerp:function(e,t,n,r){return n.copy(e).slerp(t,r)},slerpFlat:function(e,t,n,r,i,a,o){var s=n[r+0],c=n[r+1],h=n[r+2],u=n[r+3],l=i[a+0],f=i[a+1],d=i[a+2],p=i[a+3];if(u!==p||s!==l||c!==f||h!==d){var y=1-o,x=s*l+c*f+h*d+u*p,m=x>=0?1:-1,v=1-x*x;if(v>Number.EPSILON){var g=Math.sqrt(v),_=Math.atan2(g,x*m);y=Math.sin(y*_)/g,o=Math.sin(o*_)/g}var M=o*m;if(s=s*y+l*M,c=c*y+f*M,h=h*y+d*M,u=u*y+p*M,y===1-o){var w=1/Math.sqrt(s*s+c*c+h*h+u*u);s*=w,c*=w,h*=w,u*=w}}e[t]=s,e[t+1]=c,e[t+2]=h,e[t+3]=u}});Object.defineProperties(Ge.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this.onChangeCallback()}}});Object.assign(Ge.prototype,{set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(e,t){if(!(e&&e.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=e._x,r=e._y,i=e._z,a=e.order,o=Math.cos,s=Math.sin,c=o(n/2),h=o(r/2),u=o(i/2),l=s(n/2),f=s(r/2),d=s(i/2);return a==="XYZ"?(this._x=l*h*u+c*f*d,this._y=c*f*u-l*h*d,this._z=c*h*d+l*f*u,this._w=c*h*u-l*f*d):a==="YXZ"?(this._x=l*h*u+c*f*d,this._y=c*f*u-l*h*d,this._z=c*h*d-l*f*u,this._w=c*h*u+l*f*d):a==="ZXY"?(this._x=l*h*u-c*f*d,this._y=c*f*u+l*h*d,this._z=c*h*d+l*f*u,this._w=c*h*u-l*f*d):a==="ZYX"?(this._x=l*h*u-c*f*d,this._y=c*f*u+l*h*d,this._z=c*h*d-l*f*u,this._w=c*h*u+l*f*d):a==="YZX"?(this._x=l*h*u+c*f*d,this._y=c*f*u+l*h*d,this._z=c*h*d-l*f*u,this._w=c*h*u-l*f*d):a==="XZY"&&(this._x=l*h*u-c*f*d,this._y=c*f*u-l*h*d,this._z=c*h*d+l*f*u,this._w=c*h*u+l*f*d),t!==!1&&this.onChangeCallback(),this},setFromAxisAngle:function(e,t){var n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this.onChangeCallback(),this},setFromRotationMatrix:function(e){var t=e.elements,n=t[0],r=t[4],i=t[8],a=t[1],o=t[5],s=t[9],c=t[2],h=t[6],u=t[10],l=n+o+u,f;return l>0?(f=.5/Math.sqrt(l+1),this._w=.25/f,this._x=(h-s)*f,this._y=(i-c)*f,this._z=(a-r)*f):n>o&&n>u?(f=2*Math.sqrt(1+n-o-u),this._w=(h-s)/f,this._x=.25*f,this._y=(r+a)/f,this._z=(i+c)/f):o>u?(f=2*Math.sqrt(1+o-n-u),this._w=(i-c)/f,this._x=(r+a)/f,this._y=.25*f,this._z=(s+h)/f):(f=2*Math.sqrt(1+u-n-o),this._w=(a-r)/f,this._x=(i+c)/f,this._y=(s+h)/f,this._z=.25*f),this.onChangeCallback(),this},setFromUnitVectors:function(){var e=new T,t,n=1e-6;return function(i,a){return e===void 0&&(e=new T),t=i.dot(a)+1,t<n?(t=0,Math.abs(i.x)>Math.abs(i.z)?e.set(-i.y,i.x,0):e.set(0,-i.z,i.y)):e.crossVectors(i,a),this._x=e.x,this._y=e.y,this._z=e.z,this._w=t,this.normalize()}}(),inverse:function(){return this.conjugate().normalize()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this.onChangeCallback(),this},multiply:function(e,t){return t!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var n=e._x,r=e._y,i=e._z,a=e._w,o=t._x,s=t._y,c=t._z,h=t._w;return this._x=n*h+a*o+r*c-i*s,this._y=r*h+a*s+i*o-n*c,this._z=i*h+a*c+n*s-r*o,this._w=a*h-n*o-r*s-i*c,this.onChangeCallback(),this},slerp:function(e,t){if(t===0)return this;if(t===1)return this.copy(e);var n=this._x,r=this._y,i=this._z,a=this._w,o=a*e._w+n*e._x+r*e._y+i*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=n,this._y=r,this._z=i,this;var s=Math.sqrt(1-o*o);if(Math.abs(s)<.001)return this._w=.5*(a+this._w),this._x=.5*(n+this._x),this._y=.5*(r+this._y),this._z=.5*(i+this._z),this;var c=Math.atan2(s,o),h=Math.sin((1-t)*c)/s,u=Math.sin(t*c)/s;return this._w=a*h+this._w*u,this._x=n*h+this._x*u,this._y=r*h+this._y*u,this._z=i*h+this._z*u,this.onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return t===void 0&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this.onChangeCallback(),this},toArray:function(e,t){return e===void 0&&(e=[]),t===void 0&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}});function T(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0}Object.assign(T.prototype,{isVector3:!0,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return t!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return t!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return t!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(){var e=new Ge;return function(n){return n&&n.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(e.setFromEuler(n))}}(),applyAxisAngle:function(){var e=new Ge;return function(n,r){return this.applyQuaternion(e.setFromAxisAngle(n,r))}}(),applyMatrix3:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements,a=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*a,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*a,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*a,this},applyQuaternion:function(e){var t=this.x,n=this.y,r=this.z,i=e.x,a=e.y,o=e.z,s=e.w,c=s*t+a*r-o*n,h=s*n+o*t-i*r,u=s*r+i*n-a*t,l=-i*t-a*n-o*r;return this.x=c*s+l*-i+h*-o-u*-a,this.y=h*s+l*-a+u*-i-c*-o,this.z=u*s+l*-o+c*-a-h*-i,this},project:function(){var e=new ue;return function(n){return e.multiplyMatrices(n.projectionMatrix,e.getInverse(n.matrixWorld)),this.applyMatrix4(e)}}(),unproject:function(){var e=new ue;return function(n){return e.multiplyMatrices(n.matrixWorld,e.getInverse(n.projectionMatrix)),this.applyMatrix4(e)}}(),transformDirection:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(){var e=new T,t=new T;return function(r,i){return e.set(r,r,r),t.set(i,i,i),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},cross:function(e,t){if(t!==void 0)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t);var n=this.x,r=this.y,i=this.z;return this.x=r*e.z-i*e.y,this.y=i*e.x-n*e.z,this.z=n*e.y-r*e.x,this},crossVectors:function(e,t){var n=e.x,r=e.y,i=e.z,a=t.x,o=t.y,s=t.z;return this.x=r*s-i*o,this.y=i*a-n*s,this.z=n*o-r*a,this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:function(){var e=new T;return function(n){return e.copy(this).projectOnVector(n),this.sub(e)}}(),reflect:function(){var e=new T;return function(n){return this.sub(e.copy(n).multiplyScalar(2*this.dot(n)))}}(),angleTo:function(e){var t=this.dot(e)/Math.sqrt(this.lengthSq()*e.lengthSq());return Math.acos(me.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r},distanceToManhattan:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){var t=Math.sin(e.phi)*e.radius;return this.x=t*Math.sin(e.theta),this.y=Math.cos(e.phi)*e.radius,this.z=t*Math.cos(e.theta),this},setFromCylindrical:function(e){return this.x=e.radius*Math.sin(e.theta),this.y=e.y,this.z=e.radius*Math.cos(e.theta),this},setFromMatrixPosition:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,t*4)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return t===void 0&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return e===void 0&&(e=[]),t===void 0&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,n){return n!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}});function ue(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}Object.assign(ue.prototype,{isMatrix4:!0,set:function(e,t,n,r,i,a,o,s,c,h,u,l,f,d,p,y){var x=this.elements;return x[0]=e,x[4]=t,x[8]=n,x[12]=r,x[1]=i,x[5]=a,x[9]=o,x[13]=s,x[2]=c,x[6]=h,x[10]=u,x[14]=l,x[3]=f,x[7]=d,x[11]=p,x[15]=y,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return new ue().fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this},copyPosition:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this},extractBasis:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this},extractRotation:function(){var e=new T;return function(n){var r=this.elements,i=n.elements,a=1/e.setFromMatrixColumn(n,0).length(),o=1/e.setFromMatrixColumn(n,1).length(),s=1/e.setFromMatrixColumn(n,2).length();return r[0]=i[0]*a,r[1]=i[1]*a,r[2]=i[2]*a,r[4]=i[4]*o,r[5]=i[5]*o,r[6]=i[6]*o,r[8]=i[8]*s,r[9]=i[9]*s,r[10]=i[10]*s,this}}(),makeRotationFromEuler:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,n=e.x,r=e.y,i=e.z,a=Math.cos(n),o=Math.sin(n),s=Math.cos(r),c=Math.sin(r),h=Math.cos(i),u=Math.sin(i);if(e.order==="XYZ"){var l=a*h,f=a*u,d=o*h,p=o*u;t[0]=s*h,t[4]=-s*u,t[8]=c,t[1]=f+d*c,t[5]=l-p*c,t[9]=-o*s,t[2]=p-l*c,t[6]=d+f*c,t[10]=a*s}else if(e.order==="YXZ"){var y=s*h,x=s*u,m=c*h,v=c*u;t[0]=y+v*o,t[4]=m*o-x,t[8]=a*c,t[1]=a*u,t[5]=a*h,t[9]=-o,t[2]=x*o-m,t[6]=v+y*o,t[10]=a*s}else if(e.order==="ZXY"){var y=s*h,x=s*u,m=c*h,v=c*u;t[0]=y-v*o,t[4]=-a*u,t[8]=m+x*o,t[1]=x+m*o,t[5]=a*h,t[9]=v-y*o,t[2]=-a*c,t[6]=o,t[10]=a*s}else if(e.order==="ZYX"){var l=a*h,f=a*u,d=o*h,p=o*u;t[0]=s*h,t[4]=d*c-f,t[8]=l*c+p,t[1]=s*u,t[5]=p*c+l,t[9]=f*c-d,t[2]=-c,t[6]=o*s,t[10]=a*s}else if(e.order==="YZX"){var g=a*s,_=a*c,M=o*s,w=o*c;t[0]=s*h,t[4]=w-g*u,t[8]=M*u+_,t[1]=u,t[5]=a*h,t[9]=-o*h,t[2]=-c*h,t[6]=_*u+M,t[10]=g-w*u}else if(e.order==="XZY"){var g=a*s,_=a*c,M=o*s,w=o*c;t[0]=s*h,t[4]=-u,t[8]=c*h,t[1]=g*u+w,t[5]=a*h,t[9]=_*u-M,t[2]=M*u-_,t[6]=o*h,t[10]=w*u+g}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:function(e){var t=this.elements,n=e._x,r=e._y,i=e._z,a=e._w,o=n+n,s=r+r,c=i+i,h=n*o,u=n*s,l=n*c,f=r*s,d=r*c,p=i*c,y=a*o,x=a*s,m=a*c;return t[0]=1-(f+p),t[4]=u-m,t[8]=l+x,t[1]=u+m,t[5]=1-(h+p),t[9]=d-y,t[2]=l-x,t[6]=d+y,t[10]=1-(h+f),t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},lookAt:function(){var e=new T,t=new T,n=new T;return function(i,a,o){var s=this.elements;return n.subVectors(i,a),n.lengthSq()===0&&(n.z=1),n.normalize(),e.crossVectors(o,n),e.lengthSq()===0&&(Math.abs(o.z)===1?n.x+=1e-4:n.z+=1e-4,n.normalize(),e.crossVectors(o,n)),e.normalize(),t.crossVectors(n,e),s[0]=e.x,s[4]=t.x,s[8]=n.x,s[1]=e.y,s[5]=t.y,s[9]=n.y,s[2]=e.z,s[6]=t.z,s[10]=n.z,this}}(),multiply:function(e,t){return t!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,r=t.elements,i=this.elements,a=n[0],o=n[4],s=n[8],c=n[12],h=n[1],u=n[5],l=n[9],f=n[13],d=n[2],p=n[6],y=n[10],x=n[14],m=n[3],v=n[7],g=n[11],_=n[15],M=r[0],w=r[4],A=r[8],P=r[12],S=r[1],C=r[5],D=r[9],H=r[13],L=r[2],E=r[6],B=r[10],I=r[14],N=r[3],z=r[7],V=r[11],W=r[15];return i[0]=a*M+o*S+s*L+c*N,i[4]=a*w+o*C+s*E+c*z,i[8]=a*A+o*D+s*B+c*V,i[12]=a*P+o*H+s*I+c*W,i[1]=h*M+u*S+l*L+f*N,i[5]=h*w+u*C+l*E+f*z,i[9]=h*A+u*D+l*B+f*V,i[13]=h*P+u*H+l*I+f*W,i[2]=d*M+p*S+y*L+x*N,i[6]=d*w+p*C+y*E+x*z,i[10]=d*A+p*D+y*B+x*V,i[14]=d*P+p*H+y*I+x*W,i[3]=m*M+v*S+g*L+_*N,i[7]=m*w+v*C+g*E+_*z,i[11]=m*A+v*D+g*B+_*V,i[15]=m*P+v*H+g*I+_*W,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},applyToBufferAttribute:function(){var e=new T;return function(n){for(var r=0,i=n.count;r<i;r++)e.x=n.getX(r),e.y=n.getY(r),e.z=n.getZ(r),e.applyMatrix4(this),n.setXYZ(r,e.x,e.y,e.z);return n}}(),determinant:function(){var e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],a=e[1],o=e[5],s=e[9],c=e[13],h=e[2],u=e[6],l=e[10],f=e[14],d=e[3],p=e[7],y=e[11],x=e[15];return d*(+i*s*u-r*c*u-i*o*l+n*c*l+r*o*f-n*s*f)+p*(+t*s*f-t*c*l+i*a*l-r*a*f+r*c*h-i*s*h)+y*(+t*c*u-t*o*f-i*a*u+n*a*f+i*o*h-n*c*h)+x*(-r*o*h-t*s*u+t*o*l+r*a*u-n*a*l+n*s*h)},transpose:function(){var e=this.elements,t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var n=this.elements,r=e.elements,i=r[0],a=r[1],o=r[2],s=r[3],c=r[4],h=r[5],u=r[6],l=r[7],f=r[8],d=r[9],p=r[10],y=r[11],x=r[12],m=r[13],v=r[14],g=r[15],_=d*v*l-m*p*l+m*u*y-h*v*y-d*u*g+h*p*g,M=x*p*l-f*v*l-x*u*y+c*v*y+f*u*g-c*p*g,w=f*m*l-x*d*l+x*h*y-c*m*y-f*h*g+c*d*g,A=x*d*u-f*m*u-x*h*p+c*m*p+f*h*v-c*d*v,P=i*_+a*M+o*w+s*A;if(P===0){var S="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(t===!0)throw new Error(S);return console.warn(S),this.identity()}var C=1/P;return n[0]=_*C,n[1]=(m*p*s-d*v*s-m*o*y+a*v*y+d*o*g-a*p*g)*C,n[2]=(h*v*s-m*u*s+m*o*l-a*v*l-h*o*g+a*u*g)*C,n[3]=(d*u*s-h*p*s-d*o*l+a*p*l+h*o*y-a*u*y)*C,n[4]=M*C,n[5]=(f*v*s-x*p*s+x*o*y-i*v*y-f*o*g+i*p*g)*C,n[6]=(x*u*s-c*v*s-x*o*l+i*v*l+c*o*g-i*u*g)*C,n[7]=(c*p*s-f*u*s+f*o*l-i*p*l-c*o*y+i*u*y)*C,n[8]=w*C,n[9]=(x*d*s-f*m*s-x*a*y+i*m*y+f*a*g-i*d*g)*C,n[10]=(c*m*s-x*h*s+x*a*l-i*m*l-c*a*g+i*h*g)*C,n[11]=(f*h*s-c*d*s-f*a*l+i*d*l+c*a*y-i*h*y)*C,n[12]=A*C,n[13]=(f*m*o-x*d*o+x*a*p-i*m*p-f*a*v+i*d*v)*C,n[14]=(x*h*o-c*m*o-x*a*u+i*m*u+c*a*v-i*h*v)*C,n[15]=(c*d*o-f*h*o+f*a*u-i*d*u-c*a*p+i*h*p)*C,this},scale:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))},makeTranslation:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=1-n,a=e.x,o=e.y,s=e.z,c=i*a,h=i*o;return this.set(c*a+n,c*o-r*s,c*s+r*o,0,c*o+r*s,h*o+n,h*s-r*a,0,c*s-r*o,h*s+r*a,i*s*s+n,0,0,0,0,1),this},makeScale:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(e,t,n){return this.set(1,t,n,0,e,1,n,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,n){return this.makeRotationFromQuaternion(t),this.scale(n),this.setPosition(e),this},decompose:function(){var e=new T,t=new ue;return function(r,i,a){var o=this.elements,s=e.set(o[0],o[1],o[2]).length(),c=e.set(o[4],o[5],o[6]).length(),h=e.set(o[8],o[9],o[10]).length(),u=this.determinant();u<0&&(s=-s),r.x=o[12],r.y=o[13],r.z=o[14],t.copy(this);var l=1/s,f=1/c,d=1/h;return t.elements[0]*=l,t.elements[1]*=l,t.elements[2]*=l,t.elements[4]*=f,t.elements[5]*=f,t.elements[6]*=f,t.elements[8]*=d,t.elements[9]*=d,t.elements[10]*=d,i.setFromRotationMatrix(t),a.x=s,a.y=c,a.z=h,this}}(),makePerspective:function(e,t,n,r,i,a){a===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var o=this.elements,s=2*i/(t-e),c=2*i/(n-r),h=(t+e)/(t-e),u=(n+r)/(n-r),l=-(a+i)/(a-i),f=-2*a*i/(a-i);return o[0]=s,o[4]=0,o[8]=h,o[12]=0,o[1]=0,o[5]=c,o[9]=u,o[13]=0,o[2]=0,o[6]=0,o[10]=l,o[14]=f,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this},makeOrthographic:function(e,t,n,r,i,a){var o=this.elements,s=1/(t-e),c=1/(n-r),h=1/(a-i),u=(t+e)*s,l=(n+r)*c,f=(a+i)*h;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-u,o[1]=0,o[5]=2*c,o[9]=0,o[13]=-l,o[2]=0,o[6]=0,o[10]=-2*h,o[14]=-f,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},equals:function(e){for(var t=this.elements,n=e.elements,r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0},fromArray:function(e,t){t===void 0&&(t=0);for(var n=0;n<16;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){e===void 0&&(e=[]),t===void 0&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}});function on(e,t,n,r,i,a,o,s,c,h,u,l){De.call(this,null,a,o,s,c,h,r,i,u,l),this.image={data:e,width:t,height:n},this.magFilter=c!==void 0?c:ht,this.minFilter=h!==void 0?h:ht,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}on.prototype=Object.create(De.prototype);on.prototype.constructor=on;on.prototype.isDataTexture=!0;function Vt(e,t,n,r,i,a,o,s,c,h){e=e!==void 0?e:[],t=t!==void 0?t:ba,De.call(this,e,t,n,r,i,a,o,s,c,h),this.flipY=!1}Vt.prototype=Object.create(De.prototype);Vt.prototype.constructor=Vt;Vt.prototype.isCubeTexture=!0;Object.defineProperty(Vt.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}});var Ro=new De,Po=new Vt;function Co(){this.seq=[],this.map={}}var ja=[],Ya=[],qa=new Float32Array(16),Za=new Float32Array(9);function bn(e,t,n){var r=e[0];if(r<=0||r>0)return e;var i=t*n,a=ja[i];if(a===void 0&&(a=new Float32Array(i),ja[i]=a),t!==0){r.toArray(a,0);for(var o=1,s=0;o!==t;++o)s+=n,e[o].toArray(a,s)}return a}function Io(e,t){var n=Ya[t];n===void 0&&(n=new Int32Array(t),Ya[t]=n);for(var r=0;r!==t;++r)n[r]=e.allocTextureUnit();return n}function dc(e,t){e.uniform1f(this.addr,t)}function pc(e,t){e.uniform1i(this.addr,t)}function yc(e,t){t.x===void 0?e.uniform2fv(this.addr,t):e.uniform2f(this.addr,t.x,t.y)}function xc(e,t){t.x!==void 0?e.uniform3f(this.addr,t.x,t.y,t.z):t.r!==void 0?e.uniform3f(this.addr,t.r,t.g,t.b):e.uniform3fv(this.addr,t)}function mc(e,t){t.x===void 0?e.uniform4fv(this.addr,t):e.uniform4f(this.addr,t.x,t.y,t.z,t.w)}function vc(e,t){e.uniformMatrix2fv(this.addr,!1,t.elements||t)}function gc(e,t){t.elements===void 0?e.uniformMatrix3fv(this.addr,!1,t):(Za.set(t.elements),e.uniformMatrix3fv(this.addr,!1,Za))}function _c(e,t){t.elements===void 0?e.uniformMatrix4fv(this.addr,!1,t):(qa.set(t.elements),e.uniformMatrix4fv(this.addr,!1,qa))}function bc(e,t,n){var r=n.allocTextureUnit();e.uniform1i(this.addr,r),n.setTexture2D(t||Ro,r)}function wc(e,t,n){var r=n.allocTextureUnit();e.uniform1i(this.addr,r),n.setTextureCube(t||Po,r)}function Do(e,t){e.uniform2iv(this.addr,t)}function Uo(e,t){e.uniform3iv(this.addr,t)}function Fo(e,t){e.uniform4iv(this.addr,t)}function Mc(e){switch(e){case 5126:return dc;case 35664:return yc;case 35665:return xc;case 35666:return mc;case 35674:return vc;case 35675:return gc;case 35676:return _c;case 35678:case 36198:return bc;case 35680:return wc;case 5124:case 35670:return pc;case 35667:case 35671:return Do;case 35668:case 35672:return Uo;case 35669:case 35673:return Fo}}function Ec(e,t){e.uniform1fv(this.addr,t)}function Tc(e,t){e.uniform1iv(this.addr,t)}function Sc(e,t){e.uniform2fv(this.addr,bn(t,this.size,2))}function Ac(e,t){e.uniform3fv(this.addr,bn(t,this.size,3))}function Lc(e,t){e.uniform4fv(this.addr,bn(t,this.size,4))}function Rc(e,t){e.uniformMatrix2fv(this.addr,!1,bn(t,this.size,4))}function Pc(e,t){e.uniformMatrix3fv(this.addr,!1,bn(t,this.size,9))}function Cc(e,t){e.uniformMatrix4fv(this.addr,!1,bn(t,this.size,16))}function Ic(e,t,n){var r=t.length,i=Io(n,r);e.uniform1iv(this.addr,i);for(var a=0;a!==r;++a)n.setTexture2D(t[a]||Ro,i[a])}function Dc(e,t,n){var r=t.length,i=Io(n,r);e.uniform1iv(this.addr,i);for(var a=0;a!==r;++a)n.setTextureCube(t[a]||Po,i[a])}function Uc(e){switch(e){case 5126:return Ec;case 35664:return Sc;case 35665:return Ac;case 35666:return Lc;case 35674:return Rc;case 35675:return Pc;case 35676:return Cc;case 35678:return Ic;case 35680:return Dc;case 5124:case 35670:return Tc;case 35667:case 35671:return Do;case 35668:case 35672:return Uo;case 35669:case 35673:return Fo}}function Fc(e,t,n){this.id=e,this.addr=n,this.setValue=Mc(t.type)}function Oc(e,t,n){this.id=e,this.addr=n,this.size=t.size,this.setValue=Uc(t.type)}function Oo(e){this.id=e,Co.call(this)}Oo.prototype.setValue=function(e,t){for(var n=this.seq,r=0,i=n.length;r!==i;++r){var a=n[r];a.setValue(e,t[a.id])}};var Ri=/([\w\d_]+)(\])?(\[|\.)?/g;function Ja(e,t){e.seq.push(t),e.map[t.id]=t}function Nc(e,t,n){var r=e.name,i=r.length;for(Ri.lastIndex=0;;){var a=Ri.exec(r),o=Ri.lastIndex,s=a[1],c=a[2]==="]",h=a[3];if(c&&(s=s|0),h===void 0||h==="["&&o+2===i){Ja(n,h===void 0?new Fc(s,e,t):new Oc(s,e,t));break}else{var u=n.map,l=u[s];l===void 0&&(l=new Oo(s),Ja(n,l)),n=l}}}function kt(e,t,n){Co.call(this),this.renderer=n;for(var r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),i=0;i<r;++i){var a=e.getActiveUniform(t,i),o=a.name,s=e.getUniformLocation(t,o);Nc(a,s,this)}}kt.prototype.setValue=function(e,t,n){var r=this.map[t];r!==void 0&&r.setValue(e,n,this.renderer)};kt.prototype.setOptional=function(e,t,n){var r=t[n];r!==void 0&&this.setValue(e,n,r)};kt.upload=function(e,t,n,r){for(var i=0,a=t.length;i!==a;++i){var o=t[i],s=n[o.id];s.needsUpdate!==!1&&o.setValue(e,s.value,r)}};kt.seqWithValue=function(e,t){for(var n=[],r=0,i=e.length;r!==i;++r){var a=e[r];a.id in t&&n.push(a)}return n};var Bc={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function ie(e,t,n){return t===void 0&&n===void 0?this.set(e):this.setRGB(e,t,n)}Object.assign(ie.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,this},setRGB:function(e,t,n){return this.r=e,this.g=t,this.b=n,this},setHSL:function(){function e(t,n,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(n-t)*6*r:r<1/2?n:r<2/3?t+(n-t)*6*(2/3-r):t}return function(n,r,i){if(n=me.euclideanModulo(n,1),r=me.clamp(r,0,1),i=me.clamp(i,0,1),r===0)this.r=this.g=this.b=i;else{var a=i<=.5?i*(1+r):i+r-i*r,o=2*i-a;this.r=e(o,a,n+1/3),this.g=e(o,a,n),this.b=e(o,a,n-1/3)}return this}}(),setStyle:function(e){function t(l){l!==void 0&&parseFloat(l)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var r,i=n[1],a=n[2];switch(i){case"rgb":case"rgba":if(r=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,t(r[5]),this;if(r=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,t(r[5]),this;break;case"hsl":case"hsla":if(r=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a)){var o=parseFloat(r[1])/360,s=parseInt(r[2],10)/100,c=parseInt(r[3],10)/100;return t(r[5]),this.setHSL(o,s,c)}break}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(e)){var h=n[1],u=h.length;if(u===3)return this.r=parseInt(h.charAt(0)+h.charAt(0),16)/255,this.g=parseInt(h.charAt(1)+h.charAt(1),16)/255,this.b=parseInt(h.charAt(2)+h.charAt(2),16)/255,this;if(u===6)return this.r=parseInt(h.charAt(0)+h.charAt(1),16)/255,this.g=parseInt(h.charAt(2)+h.charAt(3),16)/255,this.b=parseInt(h.charAt(4)+h.charAt(5),16)/255,this}if(e&&e.length>0){var h=Bc[e];h!==void 0?this.setHex(h):console.warn("THREE.Color: Unknown color "+e)}return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return t===void 0&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){t===void 0&&(t=2);var n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this},convertGammaToLinear:function(){var e=this.r,t=this.g,n=this.b;return this.r=e*e,this.g=t*t,this.b=n*n,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return this.r*255<<16^this.g*255<<8^this.b*255<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){var t=e||{h:0,s:0,l:0},n=this.r,r=this.g,i=this.b,a=Math.max(n,r,i),o=Math.min(n,r,i),s,c,h=(o+a)/2;if(o===a)s=0,c=0;else{var u=a-o;switch(c=h<=.5?u/(a+o):u/(2-a-o),a){case n:s=(r-i)/u+(r<i?6:0);break;case r:s=(i-n)/u+2;break;case i:s=(n-r)/u+4;break}s/=6}return t.h=s,t.s=c,t.l=h,t},getStyle:function(){return"rgb("+(this.r*255|0)+","+(this.g*255|0)+","+(this.b*255|0)+")"},offsetHSL:function(e,t,n){var r=this.getHSL();return r.h+=e,r.s+=t,r.l+=n,this.setHSL(r.h,r.s,r.l),this},add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return t===void 0&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return e===void 0&&(e=[]),t===void 0&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}});var se={common:{diffuse:{value:new ie(15658734)},opacity:{value:1},map:{value:null},offsetRepeat:{value:new Ce(0,0,1,1)},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new q(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ie(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new ie(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},offsetRepeat:{value:new Ce(0,0,1,1)}}},et={merge:function(e){for(var t={},n=0;n<e.length;n++){var r=this.clone(e[n]);for(var i in r)t[i]=r[i]}return t},clone:function(e){var t={};for(var n in e){t[n]={};for(var r in e[n]){var i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture)?t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}}return t}},zc=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif
`,Gc=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif
`,Hc=`#ifdef ALPHATEST
	if ( diffuseColor.a < ALPHATEST ) discard;
#endif
`,Vc=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( PHYSICAL )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );
	#endif
#endif
`,kc=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Wc=`
vec3 transformed = vec3( position );
`,Xc=`
vec3 objectNormal = vec3( normal );
`,jc=`float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	if( decayExponent > 0.0 ) {
#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		float maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		return distanceFalloff * maxDistanceCutoffFactor;
#else
		return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );
#endif
	}
	return 1.0;
}
vec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {
	float fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );
	return ( 1.0 - specularColor ) * fresnel + specularColor;
}
float G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	float gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	return 1.0 / ( gl * gv );
}
float G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );
	float dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );
	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
	float dotNH = saturate( dot( geometry.normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( G * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE  = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS  = 0.5 / LUT_SIZE;
	float theta = acos( dot( N, V ) );
	vec2 uv = vec2(
		sqrt( saturate( roughness ) ),
		saturate( theta / ( 0.5 * PI ) ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.86267 + (0.49788 + 0.01436 * y ) * y;
	float b = 3.45068 + (4.18814 + y) * y;
	float v = a / b;
	float theta_sintheta = (x > 0.0) ? v : 0.5 * inversesqrt( 1.0 - x * x ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transpose( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	vec3 result = vec3( LTC_ClippedSphereFormFactor( vectorFormFactor ) );
	return result;
}
vec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {
	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;
	return specularColor * AB.x + AB.y;
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );
	float dotNH = saturate( dot( geometry.normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
float GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {
	return ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );
}
float BlinnExponentToGGXRoughness( const in float blinnExponent ) {
	return sqrt( 2.0 / ( blinnExponent + 2.0 ) );
}
`,Yc=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 );
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif
`,qc=`#if NUM_CLIPPING_PLANES > 0
	for ( int i = 0; i < UNION_CLIPPING_PLANES; ++ i ) {
		vec4 plane = clippingPlanes[ i ];
		if ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;
	}
		
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; ++ i ) {
			vec4 plane = clippingPlanes[ i ];
			clipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;
		}
		if ( clipped ) discard;
	
	#endif
#endif
`,Zc=`#if NUM_CLIPPING_PLANES > 0
	#if ! defined( PHYSICAL ) && ! defined( PHONG )
		varying vec3 vViewPosition;
	#endif
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif
`,Jc=`#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )
	varying vec3 vViewPosition;
#endif
`,Qc=`#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )
	vViewPosition = - mvPosition.xyz;
#endif
`,Kc=`#ifdef USE_COLOR
	diffuseColor.rgb *= vColor;
#endif`,$c=`#ifdef USE_COLOR
	varying vec3 vColor;
#endif
`,eh=`#ifdef USE_COLOR
	varying vec3 vColor;
#endif`,th=`#ifdef USE_COLOR
	vColor.xyz = color.xyz;
#endif`,nh=`#define PI 3.14159265359
#define PI2 6.28318530718
#define PI_HALF 1.5707963267949
#define RECIPROCAL_PI 0.31830988618
#define RECIPROCAL_PI2 0.15915494
#define LOG2 1.442695
#define EPSILON 1e-6
#define saturate(a) clamp( a, 0.0, 1.0 )
#define whiteCompliment(a) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract(sin(sn) * c);
}
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
vec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	float distance = dot( planeNormal, point - pointOnPlane );
	return - distance * planeNormal + point;
}
float sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return sign( dot( point - pointOnPlane, planeNormal ) );
}
vec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;
}
mat3 transpose( const in mat3 v ) {
	mat3 tmp;
	tmp[0] = vec3(v[0].x, v[1].x, v[2].x);
	tmp[1] = vec3(v[0].y, v[1].y, v[2].y);
	tmp[2] = vec3(v[0].z, v[1].z, v[2].z);
	return tmp;
}
`,rh=`#ifdef ENVMAP_TYPE_CUBE_UV
#define cubeUV_textureSize (1024.0)
int getFaceFromDirection(vec3 direction) {
	vec3 absDirection = abs(direction);
	int face = -1;
	if( absDirection.x > absDirection.z ) {
		if(absDirection.x > absDirection.y )
			face = direction.x > 0.0 ? 0 : 3;
		else
			face = direction.y > 0.0 ? 1 : 4;
	}
	else {
		if(absDirection.z > absDirection.y )
			face = direction.z > 0.0 ? 2 : 5;
		else
			face = direction.y > 0.0 ? 1 : 4;
	}
	return face;
}
#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)
#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))
vec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {
	float scale = exp2(cubeUV_maxLods1 - roughnessLevel);
	float dxRoughness = dFdx(roughness);
	float dyRoughness = dFdy(roughness);
	vec3 dx = dFdx( vec * scale * dxRoughness );
	vec3 dy = dFdy( vec * scale * dyRoughness );
	float d = max( dot( dx, dx ), dot( dy, dy ) );
	d = clamp(d, 1.0, cubeUV_rangeClamp);
	float mipLevel = 0.5 * log2(d);
	return vec2(floor(mipLevel), fract(mipLevel));
}
#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)
#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)
vec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {
	mipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;
	float a = 16.0 * cubeUV_rcpTextureSize;
	vec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );
	vec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;
	float powScale = exp2_packed.x * exp2_packed.y;
	float scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;
	float mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;
	bool bRes = mipLevel == 0.0;
	scale =  bRes && (scale < a) ? a : scale;
	vec3 r;
	vec2 offset;
	int face = getFaceFromDirection(direction);
	float rcpPowScale = 1.0 / powScale;
	if( face == 0) {
		r = vec3(direction.x, -direction.z, direction.y);
		offset = vec2(0.0+mipOffset,0.75 * rcpPowScale);
		offset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;
	}
	else if( face == 1) {
		r = vec3(direction.y, direction.x, direction.z);
		offset = vec2(scale+mipOffset, 0.75 * rcpPowScale);
		offset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;
	}
	else if( face == 2) {
		r = vec3(direction.z, direction.x, direction.y);
		offset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);
		offset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;
	}
	else if( face == 3) {
		r = vec3(direction.x, direction.z, direction.y);
		offset = vec2(0.0+mipOffset,0.5 * rcpPowScale);
		offset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;
	}
	else if( face == 4) {
		r = vec3(direction.y, direction.x, -direction.z);
		offset = vec2(scale+mipOffset, 0.5 * rcpPowScale);
		offset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;
	}
	else {
		r = vec3(direction.z, -direction.x, direction.y);
		offset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);
		offset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;
	}
	r = normalize(r);
	float texelOffset = 0.5 * cubeUV_rcpTextureSize;
	vec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;
	vec2 base = offset + vec2( texelOffset );
	return base + s * ( scale - 2.0 * texelOffset );
}
#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)
vec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {
	float roughnessVal = roughness* cubeUV_maxLods3;
	float r1 = floor(roughnessVal);
	float r2 = r1 + 1.0;
	float t = fract(roughnessVal);
	vec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);
	float s = mipInfo.y;
	float level0 = mipInfo.x;
	float level1 = level0 + 1.0;
	level1 = level1 > 5.0 ? 5.0 : level1;
	level0 += min( floor( s + 0.5 ), 5.0 );
	vec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);
	vec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));
	vec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);
	vec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));
	vec4 result = mix(color10, color20, t);
	return vec4(result.rgb, 1.0);
}
#endif
`,ih=`vec3 transformedNormal = normalMatrix * objectNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
`,ah=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif
`,oh=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );
#endif
`,sh=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif
`,ch=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif
`,hh=`  gl_FragColor = linearToOutputTexel( gl_FragColor );
`,uh=`
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );
}
vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );
}
vec4 sRGBToLinear( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );
}
vec4 RGBEToLinear( in vec4 value ) {
	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );
}
vec4 LinearToRGBE( in vec4 value ) {
	float maxComponent = max( max( value.r, value.g ), value.b );
	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );
	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );
}
vec4 RGBMToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.xyz * value.w * maxRange, 1.0 );
}
vec4 LinearToRGBM( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.x, max( value.g, value.b ) );
	float M      = clamp( maxRGB / maxRange, 0.0, 1.0 );
	M            = ceil( M * 255.0 ) / 255.0;
	return vec4( value.rgb / ( M * maxRange ), M );
}
vec4 RGBDToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );
}
vec4 LinearToRGBD( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.x, max( value.g, value.b ) );
	float D      = max( maxRange / maxRGB, 1.0 );
	D            = min( floor( D ) / 255.0, 1.0 );
	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );
}
const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );
vec4 LinearToLogLuv( in vec4 value )  {
	vec3 Xp_Y_XYZp = value.rgb * cLogLuvM;
	Xp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));
	vec4 vResult;
	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;
	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;
	vResult.w = fract(Le);
	vResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;
	return vResult;
}
const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );
vec4 LogLuvToLinear( in vec4 value ) {
	float Le = value.z * 255.0 + value.w;
	vec3 Xp_Y_XYZp;
	Xp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);
	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;
	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;
	vec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;
	return vec4( max(vRGB, 0.0), 1.0 );
}
`,lh=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		vec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToVertex, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_EQUIREC )
		vec2 sampleUV;
		reflectVec = normalize( reflectVec );
		sampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
		sampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;
		vec4 envColor = texture2D( envMap, sampleUV );
	#elif defined( ENVMAP_TYPE_SPHERE )
		reflectVec = normalize( reflectVec );
		vec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );
		vec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	envColor = envMapTexelToLinear( envColor );
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif
`,fh=`#if defined( USE_ENVMAP ) || defined( PHYSICAL )
	uniform float reflectivity;
	uniform float envMapIntensity;
#endif
#ifdef USE_ENVMAP
	#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )
		varying vec3 vWorldPosition;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	uniform float flipEnvMap;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif
`,dh=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif
`,ph=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif
`,yh=`
#ifdef USE_FOG
fogDepth = -mvPosition.z;
#endif`,xh=`#ifdef USE_FOG
  varying float fogDepth;
#endif
`,mh=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, fogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif
`,vh=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float fogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif
`,gh=`#ifdef TOON
	uniform sampler2D gradientMap;
	vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
		float dotNL = dot( normal, lightDirection );
		vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
		#ifdef USE_GRADIENTMAP
			return texture2D( gradientMap, coord ).rgb;
		#else
			return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
		#endif
	}
#endif
`,_h=`#ifdef USE_LIGHTMAP
	reflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;
#endif
`,bh=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,wh=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
#if NUM_POINT_LIGHTS > 0
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
#endif
#if NUM_DIR_LIGHTS > 0
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
#endif
#if NUM_HEMI_LIGHTS > 0
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		#ifdef DOUBLE_SIDED
			vLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );
		#endif
	}
#endif
`,Mh=`uniform vec3 ambientLightColor;
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	return irradiance;
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
		int shadow;
		float shadowBias;
		float shadowRadius;
		vec2 shadowMapSize;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		directLight.color = directionalLight.color;
		directLight.direction = directionalLight.direction;
		directLight.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
		int shadow;
		float shadowBias;
		float shadowRadius;
		vec2 shadowMapSize;
		float shadowCameraNear;
		float shadowCameraFar;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		vec3 lVector = pointLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		directLight.color = pointLight.color;
		directLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );
		directLight.visible = ( directLight.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
		int shadow;
		float shadowBias;
		float shadowRadius;
		vec2 shadowMapSize;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {
		vec3 lVector = spotLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		float angleCos = dot( directLight.direction, spotLight.direction );
		if ( angleCos > spotLight.coneCos ) {
			float spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );
			directLight.color = spotLight.color;
			directLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );
			directLight.visible = true;
		} else {
			directLight.color = vec3( 0.0 );
			directLight.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltcMat;	uniform sampler2D ltcMag;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {
		float dotNL = dot( geometry.normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			irradiance *= PI;
		#endif
		return irradiance;
	}
#endif
#if defined( USE_ENVMAP ) && defined( PHYSICAL )
	vec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {
		vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );
			#else
				vec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );
			vec4 envMapColor = textureCubeUV( queryVec, 1.0 );
		#else
			vec4 envMapColor = vec4( 0.0 );
		#endif
		return PI * envMapColor.rgb * envMapIntensity;
	}
	float getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {
		float maxMIPLevelScalar = float( maxMIPLevel );
		float desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );
		return clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );
	}
	vec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );
		#else
			vec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );
		#endif
		reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
		float specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );
			#else
				vec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );
			vec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));
		#elif defined( ENVMAP_TYPE_EQUIREC )
			vec2 sampleUV;
			sampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
			sampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );
			#else
				vec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_SPHERE )
			vec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );
			#else
				vec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#endif
		return envMapColor.rgb * envMapIntensity;
	}
#endif
`,Eh=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;
`,Th=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct BlinnPhongMaterial {
	vec3	diffuseColor;
	vec3	specularColor;
	float	specularShininess;
	float	specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	#ifdef TOON
		vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	#else
		float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
		vec3 irradiance = dotNL * directLight.color;
	#endif
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)
`,Sh=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
material.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );
#ifdef STANDARD
	material.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );
	material.clearCoat = saturate( clearCoat );	material.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );
#endif
`,Ah=`struct PhysicalMaterial {
	vec3	diffuseColor;
	float	specularRoughness;
	vec3	specularColor;
	#ifndef STANDARD
		float clearCoat;
		float clearCoatRoughness;
	#endif
};
#define MAXIMUM_SPECULAR_COEFFICIENT 0.16
#define DEFAULT_SPECULAR_COEFFICIENT 0.04
float clearCoatDHRApprox( const in float roughness, const in float dotNL ) {
	return DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.specularRoughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos - halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos + halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos + halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos - halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		float norm = texture2D( ltcMag, uv ).a;
		vec4 t = texture2D( ltcMat, uv );
		mat3 mInv = mat3(
			vec3(   1,   0, t.y ),
			vec3(   0, t.z,   0 ),
			vec3( t.w,   0, t.x )
		);
		reflectedLight.directSpecular += lightColor * material.specularColor * norm * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	#ifndef STANDARD
		float clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );
	#else
		float clearCoatDHR = 0.0;
	#endif
	reflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );
	reflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	#ifndef STANDARD
		reflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );
	#endif
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	#ifndef STANDARD
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		float dotNL = dotNV;
		float clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );
	#else
		float clearCoatDHR = 0.0;
	#endif
	reflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );
	#ifndef STANDARD
		reflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );
	#endif
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )
#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}
`,Lh=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = normalize( vViewPosition );
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointDirectLightIrradiance( pointLight, geometry, directLight );
		#ifdef USE_SHADOWMAP
		directLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotDirectLightIrradiance( spotLight, geometry, directLight );
		#ifdef USE_SHADOWMAP
		directLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );
		#ifdef USE_SHADOWMAP
		directLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
#endif
#if defined( RE_IndirectDiffuse )
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#ifdef USE_LIGHTMAP
		vec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			lightMapIrradiance *= PI;
		#endif
		irradiance += lightMapIrradiance;
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		}
	#endif
	#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )
		irradiance += getLightProbeIndirectIrradiance( geometry, 8 );
	#endif
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	vec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );
	#ifndef STANDARD
		vec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );
	#else
		vec3 clearCoatRadiance = vec3( 0.0 );
	#endif
	RE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );
#endif
`,Rh=`#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)
	gl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;
#endif`,Ph=`#ifdef USE_LOGDEPTHBUF
	uniform float logDepthBufFC;
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
	#endif
#endif
`,Ch=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
	#endif
	uniform float logDepthBufFC;
#endif`,Ih=`#ifdef USE_LOGDEPTHBUF
	gl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
	#else
		gl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;
	#endif
#endif
`,Dh=`#ifdef USE_MAP
	vec4 texelColor = texture2D( map, vUv );
	texelColor = mapTexelToLinear( texelColor );
	diffuseColor *= texelColor;
#endif
`,Uh=`#ifdef USE_MAP
	uniform sampler2D map;
#endif
`,Fh=`#ifdef USE_MAP
	vec4 mapTexel = texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );
	diffuseColor *= mapTexelToLinear( mapTexel );
#endif
`,Oh=`#ifdef USE_MAP
	uniform vec4 offsetRepeat;
	uniform sampler2D map;
#endif
`,Nh=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif
`,Bh=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,zh=`#ifdef USE_MORPHNORMALS
	objectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];
	objectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];
	objectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];
	objectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];
#endif
`,Gh=`#ifdef USE_MORPHTARGETS
	#ifndef USE_MORPHNORMALS
	uniform float morphTargetInfluences[ 8 ];
	#else
	uniform float morphTargetInfluences[ 4 ];
	#endif
#endif`,Hh=`#ifdef USE_MORPHTARGETS
	transformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];
	transformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];
	transformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];
	transformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];
	#ifndef USE_MORPHNORMALS
	transformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];
	transformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];
	transformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];
	transformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];
	#endif
#endif
`,Vh=`#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
#endif
#ifdef USE_NORMALMAP
	normal = perturbNormal2Arb( -vViewPosition, normal );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );
#endif
`,kh=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 S = normalize( q0 * st1.t - q1 * st0.t );
		vec3 T = normalize( -q0 * st1.s + q1 * st0.s );
		vec3 N = normalize( surf_norm );
		vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
		mapN.xy = normalScale * mapN.xy;
		mat3 tsn = mat3( S, T, N );
		return normalize( tsn * mapN );
	}
#endif
`,Wh=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 1.0 - 2.0 * rgb.xyz;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return (( near + viewZ ) * far ) / (( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}
`,Xh=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif
`,jh=`vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );
gl_Position = projectionMatrix * mvPosition;
`,Yh=`#if defined( DITHERING )
  gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif
`,qh=`#if defined( DITHERING )
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif
`,Zh=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif
`,Jh=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Qh=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHTS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];
	#endif
	#if NUM_SPOT_LIGHTS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];
	#endif
	#if NUM_POINT_LIGHTS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	float texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {
		const vec2 offset = vec2( 0.0, 1.0 );
		vec2 texelSize = vec2( 1.0 ) / size;
		vec2 centroidUV = floor( uv * size + 0.5 ) / size;
		float lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );
		float lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );
		float rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );
		float rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );
		vec2 f = fract( uv * size + 0.5 );
		float a = mix( lb, lt, f.y );
		float b = mix( rb, rt, f.y );
		float c = mix( a, b, f.x );
		return c;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			shadow = (
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 9.0 );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif
`,Kh=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHTS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];
	#endif
	#if NUM_SPOT_LIGHTS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];
	#endif
	#if NUM_POINT_LIGHTS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];
	#endif
#endif
`,$h=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHTS > 0
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;
	}
	#endif
	#if NUM_SPOT_LIGHTS > 0
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;
	}
	#endif
	#if NUM_POINT_LIGHTS > 0
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;
	}
	#endif
#endif
`,eu=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHTS > 0
	DirectionalLight directionalLight;
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		shadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#endif
	#if NUM_SPOT_LIGHTS > 0
	SpotLight spotLight;
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		shadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#endif
	#if NUM_POINT_LIGHTS > 0
	PointLight pointLight;
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		shadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#endif
	#endif
	return shadow;
}
`,tu=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,nu=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif
`,ru=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif
`,iu=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
#endif
`,au=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,ou=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,su=`#if defined( TONE_MAPPING )
  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif
`,cu=`#define saturate(a) clamp( a, 0.0, 1.0 )
uniform float toneMappingExposure;
uniform float toneMappingWhitePoint;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )
vec3 Uncharted2ToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
`,hu=`#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )
	varying vec2 vUv;
#endif`,uu=`#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )
	varying vec2 vUv;
	uniform vec4 offsetRepeat;
#endif
`,lu=`#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )
	vUv = uv * offsetRepeat.zw + offsetRepeat.xy;
#endif`,fu=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,du=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
#endif`,pu=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = uv2;
#endif`,yu=`#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( PHYSICAL ) || defined( LAMBERT ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )
	vec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );
#endif
`,xu=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldPosition;
void main() {
	gl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );
	gl_FragColor.a *= opacity;
}
`,mu=`varying vec3 vWorldPosition;
#include <common>
void main() {
	vWorldPosition = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}
`,vu=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( gl_FragCoord.z );
	#endif
}
`,gu=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
}
`,_u=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}
`,bu=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}
`,wu=`uniform sampler2D tEquirect;
varying vec3 vWorldPosition;
#include <common>
void main() {
	vec3 direction = normalize( vWorldPosition );
	vec2 sampleUV;
	sampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	sampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;
	gl_FragColor = texture2D( tEquirect, sampleUV );
}
`,Mu=`varying vec3 vWorldPosition;
#include <common>
void main() {
	vWorldPosition = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}
`,Eu=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <premultiplied_alpha_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}
`,Tu=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	vLineDistance = scale * lineDistance;
	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}
`,Su=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		reflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <premultiplied_alpha_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}
`,Au=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <skinbase_vertex>
	#ifdef USE_ENVMAP
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}
`,Lu=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_pars_fragment>
#include <bsdfs>
#include <lights_pars>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	reflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}
`,Ru=`#define LAMBERT
varying vec3 vLightFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}
`,Pu=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_template>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}
`,Cu=`#define PHONG
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}
`,Iu=`#define PHYSICAL
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifndef STANDARD
	uniform float clearCoat;
	uniform float clearCoatRoughness;
#endif
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <lights_pars>
#include <lights_physical_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_template>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}
`,Du=`#define PHYSICAL
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}
`,Uu=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	#include <normal_fragment>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
}
`,Fu=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}
`,Ou=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <packing>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <premultiplied_alpha_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}
`,Nu=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <begin_vertex>
	#include <project_vertex>
	#ifdef USE_SIZEATTENUATION
		gl_PointSize = size * ( scale / - mvPosition.z );
	#else
		gl_PointSize = size;
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}
`,Bu=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <bsdfs>
#include <lights_pars>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
}
`,zu=`#include <shadowmap_pars_vertex>
void main() {
	#include <begin_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
}
`,Pe={alphamap_fragment:zc,alphamap_pars_fragment:Gc,alphatest_fragment:Hc,aomap_fragment:Vc,aomap_pars_fragment:kc,begin_vertex:Wc,beginnormal_vertex:Xc,bsdfs:jc,bumpmap_pars_fragment:Yc,clipping_planes_fragment:qc,clipping_planes_pars_fragment:Zc,clipping_planes_pars_vertex:Jc,clipping_planes_vertex:Qc,color_fragment:Kc,color_pars_fragment:$c,color_pars_vertex:eh,color_vertex:th,common:nh,cube_uv_reflection_fragment:rh,defaultnormal_vertex:ih,displacementmap_pars_vertex:ah,displacementmap_vertex:oh,emissivemap_fragment:sh,emissivemap_pars_fragment:ch,encodings_fragment:hh,encodings_pars_fragment:uh,envmap_fragment:lh,envmap_pars_fragment:fh,envmap_pars_vertex:dh,envmap_vertex:ph,fog_vertex:yh,fog_pars_vertex:xh,fog_fragment:mh,fog_pars_fragment:vh,gradientmap_pars_fragment:gh,lightmap_fragment:_h,lightmap_pars_fragment:bh,lights_lambert_vertex:wh,lights_pars:Mh,lights_phong_fragment:Eh,lights_phong_pars_fragment:Th,lights_physical_fragment:Sh,lights_physical_pars_fragment:Ah,lights_template:Lh,logdepthbuf_fragment:Rh,logdepthbuf_pars_fragment:Ph,logdepthbuf_pars_vertex:Ch,logdepthbuf_vertex:Ih,map_fragment:Dh,map_pars_fragment:Uh,map_particle_fragment:Fh,map_particle_pars_fragment:Oh,metalnessmap_fragment:Nh,metalnessmap_pars_fragment:Bh,morphnormal_vertex:zh,morphtarget_pars_vertex:Gh,morphtarget_vertex:Hh,normal_fragment:Vh,normalmap_pars_fragment:kh,packing:Wh,premultiplied_alpha_fragment:Xh,project_vertex:jh,dithering_fragment:Yh,dithering_pars_fragment:qh,roughnessmap_fragment:Zh,roughnessmap_pars_fragment:Jh,shadowmap_pars_fragment:Qh,shadowmap_pars_vertex:Kh,shadowmap_vertex:$h,shadowmask_pars_fragment:eu,skinbase_vertex:tu,skinning_pars_vertex:nu,skinning_vertex:ru,skinnormal_vertex:iu,specularmap_fragment:au,specularmap_pars_fragment:ou,tonemapping_fragment:su,tonemapping_pars_fragment:cu,uv_pars_fragment:hu,uv_pars_vertex:uu,uv_vertex:lu,uv2_pars_fragment:fu,uv2_pars_vertex:du,uv2_vertex:pu,worldpos_vertex:yu,cube_frag:xu,cube_vert:mu,depth_frag:vu,depth_vert:gu,distanceRGBA_frag:_u,distanceRGBA_vert:bu,equirect_frag:wu,equirect_vert:Mu,linedashed_frag:Eu,linedashed_vert:Tu,meshbasic_frag:Su,meshbasic_vert:Au,meshlambert_frag:Lu,meshlambert_vert:Ru,meshphong_frag:Pu,meshphong_vert:Cu,meshphysical_frag:Iu,meshphysical_vert:Du,normal_frag:Uu,normal_vert:Fu,points_frag:Ou,points_vert:Nu,shadow_frag:Bu,shadow_vert:zu},tn={basic:{uniforms:et.merge([se.common,se.specularmap,se.envmap,se.aomap,se.lightmap,se.fog]),vertexShader:Pe.meshbasic_vert,fragmentShader:Pe.meshbasic_frag},lambert:{uniforms:et.merge([se.common,se.specularmap,se.envmap,se.aomap,se.lightmap,se.emissivemap,se.fog,se.lights,{emissive:{value:new ie(0)}}]),vertexShader:Pe.meshlambert_vert,fragmentShader:Pe.meshlambert_frag},phong:{uniforms:et.merge([se.common,se.specularmap,se.envmap,se.aomap,se.lightmap,se.emissivemap,se.bumpmap,se.normalmap,se.displacementmap,se.gradientmap,se.fog,se.lights,{emissive:{value:new ie(0)},specular:{value:new ie(1118481)},shininess:{value:30}}]),vertexShader:Pe.meshphong_vert,fragmentShader:Pe.meshphong_frag},standard:{uniforms:et.merge([se.common,se.envmap,se.aomap,se.lightmap,se.emissivemap,se.bumpmap,se.normalmap,se.displacementmap,se.roughnessmap,se.metalnessmap,se.fog,se.lights,{emissive:{value:new ie(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:Pe.meshphysical_vert,fragmentShader:Pe.meshphysical_frag},points:{uniforms:et.merge([se.points,se.fog]),vertexShader:Pe.points_vert,fragmentShader:Pe.points_frag},dashed:{uniforms:et.merge([se.common,se.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Pe.linedashed_vert,fragmentShader:Pe.linedashed_frag},depth:{uniforms:et.merge([se.common,se.displacementmap]),vertexShader:Pe.depth_vert,fragmentShader:Pe.depth_frag},normal:{uniforms:et.merge([se.common,se.bumpmap,se.normalmap,se.displacementmap,{opacity:{value:1}}]),vertexShader:Pe.normal_vert,fragmentShader:Pe.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Pe.cube_vert,fragmentShader:Pe.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Pe.equirect_vert,fragmentShader:Pe.equirect_frag},distanceRGBA:{uniforms:et.merge([se.common,se.displacementmap,{referencePosition:{value:new T},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Pe.distanceRGBA_vert,fragmentShader:Pe.distanceRGBA_frag},shadow:{uniforms:et.merge([se.lights,{color:{value:new ie(0)},opacity:{value:1}}]),vertexShader:Pe.shadow_vert,fragmentShader:Pe.shadow_frag}};tn.physical={uniforms:et.merge([tn.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:Pe.meshphysical_vert,fragmentShader:Pe.meshphysical_frag};function La(e,t){this.min=e!==void 0?e:new q(1/0,1/0),this.max=t!==void 0?t:new q(-1/0,-1/0)}Object.assign(La.prototype,{set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new q;return function(n,r){var i=e.copy(r).multiplyScalar(.5);return this.min.copy(n).sub(i),this.max.copy(n).add(i),this}}(),clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){var t=e||new q;return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){var t=e||new q;return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){var n=t||new q;return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){var n=t||new q;return n.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new q;return function(n){var r=e.copy(n).clamp(this.min,this.max);return r.sub(n).length()}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});function Gu(e,t,n,r,i){var a,o,s,c,h,u,l,f;function d(){var y=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),x=new Uint16Array([0,1,2,0,2,3]);a=t.createBuffer(),o=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,a),t.bufferData(t.ARRAY_BUFFER,y,t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,o),t.bufferData(t.ELEMENT_ARRAY_BUFFER,x,t.STATIC_DRAW),l=t.createTexture(),f=t.createTexture(),n.bindTexture(t.TEXTURE_2D,l),t.texImage2D(t.TEXTURE_2D,0,t.RGB,16,16,0,t.RGB,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),n.bindTexture(t.TEXTURE_2D,f),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,16,16,0,t.RGBA,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),s={vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","uniform sampler2D occlusionMap;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float vVisibility;","void main() {","vUV = uv;","vec2 pos = position;","if ( renderType == 2 ) {","vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );","vVisibility =        visibility.r / 9.0;","vVisibility *= 1.0 - visibility.g / 9.0;","vVisibility *=       visibility.b / 9.0;","vVisibility *= 1.0 - visibility.a / 9.0;","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join(`
`),fragmentShader:["uniform lowp int renderType;","uniform sampler2D map;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","varying float vVisibility;","void main() {","if ( renderType == 0 ) {","gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );","} else if ( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * vVisibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join(`
`)},c=p(s),h={vertex:t.getAttribLocation(c,"position"),uv:t.getAttribLocation(c,"uv")},u={renderType:t.getUniformLocation(c,"renderType"),map:t.getUniformLocation(c,"map"),occlusionMap:t.getUniformLocation(c,"occlusionMap"),opacity:t.getUniformLocation(c,"opacity"),color:t.getUniformLocation(c,"color"),scale:t.getUniformLocation(c,"scale"),rotation:t.getUniformLocation(c,"rotation"),screenPosition:t.getUniformLocation(c,"screenPosition")}}this.render=function(y,x,m,v){if(y.length!==0){var g=new T,_=v.w/v.z,M=v.z*.5,w=v.w*.5,A=16/v.w,P=new q(A*_,A),S=new T(1,1,0),C=new q(1,1),D=new La;D.min.set(v.x,v.y),D.max.set(v.x+(v.z-16),v.y+(v.w-16)),c===void 0&&d(),n.useProgram(c),n.initAttributes(),n.enableAttribute(h.vertex),n.enableAttribute(h.uv),n.disableUnusedAttributes(),t.uniform1i(u.occlusionMap,0),t.uniform1i(u.map,1),t.bindBuffer(t.ARRAY_BUFFER,a),t.vertexAttribPointer(h.vertex,2,t.FLOAT,!1,2*8,0),t.vertexAttribPointer(h.uv,2,t.FLOAT,!1,2*8,8),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,o),n.disable(t.CULL_FACE),n.buffers.depth.setMask(!1);for(var H=0,L=y.length;H<L;H++){A=16/v.w,P.set(A*_,A);var E=y[H];if(g.set(E.matrixWorld.elements[12],E.matrixWorld.elements[13],E.matrixWorld.elements[14]),g.applyMatrix4(m.matrixWorldInverse),g.applyMatrix4(m.projectionMatrix),S.copy(g),C.x=v.x+S.x*M+M-8,C.y=v.y+S.y*w+w-8,D.containsPoint(C)===!0){n.activeTexture(t.TEXTURE0),n.bindTexture(t.TEXTURE_2D,null),n.activeTexture(t.TEXTURE1),n.bindTexture(t.TEXTURE_2D,l),t.copyTexImage2D(t.TEXTURE_2D,0,t.RGB,C.x,C.y,16,16,0),t.uniform1i(u.renderType,0),t.uniform2f(u.scale,P.x,P.y),t.uniform3f(u.screenPosition,S.x,S.y,S.z),n.disable(t.BLEND),n.enable(t.DEPTH_TEST),t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0),n.activeTexture(t.TEXTURE0),n.bindTexture(t.TEXTURE_2D,f),t.copyTexImage2D(t.TEXTURE_2D,0,t.RGBA,C.x,C.y,16,16,0),t.uniform1i(u.renderType,1),n.disable(t.DEPTH_TEST),n.activeTexture(t.TEXTURE1),n.bindTexture(t.TEXTURE_2D,l),t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0),E.positionScreen.copy(S),E.customUpdateCallback?E.customUpdateCallback(E):E.updateLensFlares(),t.uniform1i(u.renderType,2),n.enable(t.BLEND);for(var B=0,I=E.lensFlares.length;B<I;B++){var N=E.lensFlares[B];N.opacity>.001&&N.scale>.001&&(S.x=N.x,S.y=N.y,S.z=N.z,A=N.size*N.scale/v.w,P.x=A*_,P.y=A,t.uniform3f(u.screenPosition,S.x,S.y,S.z),t.uniform2f(u.scale,P.x,P.y),t.uniform1f(u.rotation,N.rotation),t.uniform1f(u.opacity,N.opacity),t.uniform3f(u.color,N.color.r,N.color.g,N.color.b),n.setBlending(N.blending,N.blendEquation,N.blendSrc,N.blendDst),r.setTexture2D(N.texture,1),t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0))}}}n.enable(t.CULL_FACE),n.enable(t.DEPTH_TEST),n.buffers.depth.setMask(!0),n.reset()}};function p(y){var x=t.createProgram(),m=t.createShader(t.FRAGMENT_SHADER),v=t.createShader(t.VERTEX_SHADER),g="precision "+i.precision+` float;
`;return t.shaderSource(m,g+y.fragmentShader),t.shaderSource(v,g+y.vertexShader),t.compileShader(m),t.compileShader(v),t.attachShader(x,m),t.attachShader(x,v),t.linkProgram(x),x}}function Ur(e,t,n,r,i,a,o,s,c){De.call(this,e,t,n,r,i,a,o,s,c),this.needsUpdate=!0}Ur.prototype=Object.create(De.prototype);Ur.prototype.constructor=Ur;function Hu(e,t,n,r,i){var a,o,s,c,h,u,l=new T,f=new Ge,d=new T;function p(){var m=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),v=new Uint16Array([0,1,2,0,2,3]);a=t.createBuffer(),o=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,a),t.bufferData(t.ARRAY_BUFFER,m,t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,o),t.bufferData(t.ELEMENT_ARRAY_BUFFER,v,t.STATIC_DRAW),s=y(),c={position:t.getAttribLocation(s,"position"),uv:t.getAttribLocation(s,"uv")},h={uvOffset:t.getUniformLocation(s,"uvOffset"),uvScale:t.getUniformLocation(s,"uvScale"),rotation:t.getUniformLocation(s,"rotation"),scale:t.getUniformLocation(s,"scale"),color:t.getUniformLocation(s,"color"),map:t.getUniformLocation(s,"map"),opacity:t.getUniformLocation(s,"opacity"),modelViewMatrix:t.getUniformLocation(s,"modelViewMatrix"),projectionMatrix:t.getUniformLocation(s,"projectionMatrix"),fogType:t.getUniformLocation(s,"fogType"),fogDensity:t.getUniformLocation(s,"fogDensity"),fogNear:t.getUniformLocation(s,"fogNear"),fogFar:t.getUniformLocation(s,"fogFar"),fogColor:t.getUniformLocation(s,"fogColor"),alphaTest:t.getUniformLocation(s,"alphaTest")};var g=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");g.width=8,g.height=8;var _=g.getContext("2d");_.fillStyle="white",_.fillRect(0,0,8,8),u=new Ur(g)}this.render=function(m,v,g){if(m.length!==0){s===void 0&&p(),n.useProgram(s),n.initAttributes(),n.enableAttribute(c.position),n.enableAttribute(c.uv),n.disableUnusedAttributes(),n.disable(t.CULL_FACE),n.enable(t.BLEND),t.bindBuffer(t.ARRAY_BUFFER,a),t.vertexAttribPointer(c.position,2,t.FLOAT,!1,2*8,0),t.vertexAttribPointer(c.uv,2,t.FLOAT,!1,2*8,8),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,o),t.uniformMatrix4fv(h.projectionMatrix,!1,g.projectionMatrix.elements),n.activeTexture(t.TEXTURE0),t.uniform1i(h.map,0);var _=0,M=0,w=v.fog;w?(t.uniform3f(h.fogColor,w.color.r,w.color.g,w.color.b),w.isFog?(t.uniform1f(h.fogNear,w.near),t.uniform1f(h.fogFar,w.far),t.uniform1i(h.fogType,1),_=1,M=1):w.isFogExp2&&(t.uniform1f(h.fogDensity,w.density),t.uniform1i(h.fogType,2),_=2,M=2)):(t.uniform1i(h.fogType,0),_=0,M=0);for(var A=0,P=m.length;A<P;A++){var S=m[A];S.modelViewMatrix.multiplyMatrices(g.matrixWorldInverse,S.matrixWorld),S.z=-S.modelViewMatrix.elements[14]}m.sort(x);for(var C=[],A=0,P=m.length;A<P;A++){var S=m[A],D=S.material;if(D.visible!==!1){S.onBeforeRender(e,v,g,void 0,D,void 0),t.uniform1f(h.alphaTest,D.alphaTest),t.uniformMatrix4fv(h.modelViewMatrix,!1,S.modelViewMatrix.elements),S.matrixWorld.decompose(l,f,d),C[0]=d.x,C[1]=d.y;var H=0;v.fog&&D.fog&&(H=M),_!==H&&(t.uniform1i(h.fogType,H),_=H),D.map!==null?(t.uniform2f(h.uvOffset,D.map.offset.x,D.map.offset.y),t.uniform2f(h.uvScale,D.map.repeat.x,D.map.repeat.y)):(t.uniform2f(h.uvOffset,0,0),t.uniform2f(h.uvScale,1,1)),t.uniform1f(h.opacity,D.opacity),t.uniform3f(h.color,D.color.r,D.color.g,D.color.b),t.uniform1f(h.rotation,D.rotation),t.uniform2fv(h.scale,C),n.setBlending(D.blending,D.blendEquation,D.blendSrc,D.blendDst,D.blendEquationAlpha,D.blendSrcAlpha,D.blendDstAlpha,D.premultipliedAlpha),n.buffers.depth.setTest(D.depthTest),n.buffers.depth.setMask(D.depthWrite),r.setTexture2D(D.map||u,0),t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0),S.onAfterRender(e,v,g,void 0,D,void 0)}}n.enable(t.CULL_FACE),n.reset()}};function y(){var m=t.createProgram(),v=t.createShader(t.VERTEX_SHADER),g=t.createShader(t.FRAGMENT_SHADER);return t.shaderSource(v,["precision "+i.precision+" float;","#define SHADER_NAME SpriteMaterial","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uvOffset + uv * uvScale;","vec2 alignedPosition = position * scale;","vec2 rotatedPosition;","rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","vec4 finalPosition;","finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","finalPosition.xy += rotatedPosition;","finalPosition = projectionMatrix * finalPosition;","gl_Position = finalPosition;","}"].join(`
`)),t.shaderSource(g,["precision "+i.precision+" float;","#define SHADER_NAME SpriteMaterial","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","void main() {","vec4 texture = texture2D( map, vUV );","if ( texture.a < alphaTest ) discard;","gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","if ( fogType > 0 ) {","float depth = gl_FragCoord.z / gl_FragCoord.w;","float fogFactor = 0.0;","if ( fogType == 1 ) {","fogFactor = smoothstep( fogNear, fogFar, depth );","} else {","const float LOG2 = 1.442695;","fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );","fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","}","gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}","}"].join(`
`)),t.compileShader(v),t.compileShader(g),t.attachShader(m,v),t.attachShader(m,g),t.linkProgram(m),m}function x(m,v){return m.renderOrder!==v.renderOrder?m.renderOrder-v.renderOrder:m.z!==v.z?v.z-m.z:v.id-m.id}}var Vu=0;function ge(){Object.defineProperty(this,"id",{value:Vu++}),this.uuid=me.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=_r,this.side=Rn,this.flatShading=!1,this.vertexColors=ga,this.opacity=1,this.transparent=!1,this.blendSrc=_o,this.blendDst=bo,this.blendEquation=go,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Ni,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this.userData={},this.needsUpdate=!0}Object.assign(ge.prototype,Lt.prototype,{isMaterial:!0,onBeforeCompile:function(){},setValues:function(e){if(e!==void 0)for(var t in e){var n=e[t];if(n===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if(t==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===_s;continue}var r=this[t];if(r===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):t==="overdraw"?this[t]=Number(n):this[t]=n}},toJSON:function(e){var t=e===void 0;t&&(e={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearCoat!==void 0&&(n.clearCoat=this.clearCoat),this.clearCoatRoughness!==void 0&&(n.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,n.reflectivity=this.reflectivity),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.size!==void 0&&(n.size=this.size),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==_r&&(n.blending=this.blending),this.flatShading===!0&&(n.flatShading=this.flatShading),this.side!==Rn&&(n.side=this.side),this.vertexColors!==ga&&(n.vertexColors=this.vertexColors),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.morphTargets===!0&&(n.morphTargets=!0),this.skinning===!0&&(n.skinning=!0),this.visible===!1&&(n.visible=!1),JSON.stringify(this.userData)!=="{}"&&(n.userData=this.userData);function r(o){var s=[];for(var c in o){var h=o[c];delete h.metadata,s.push(h)}return s}if(t){var i=r(e.textures),a=r(e.images);i.length>0&&(n.textures=i),a.length>0&&(n.images=a)}return n},clone:function(){return new this.constructor().copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.lights=e.lights,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.overdraw=e.overdraw,this.visible=e.visible,this.userData=JSON.parse(JSON.stringify(e.userData)),this.clipShadows=e.clipShadows,this.clipIntersection=e.clipIntersection;var t=e.clippingPlanes,n=null;if(t!==null){var r=t.length;n=new Array(r);for(var i=0;i!==r;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function yt(e){ge.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,this.fragmentShader=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,e!==void 0&&(e.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}yt.prototype=Object.create(ge.prototype);yt.prototype.constructor=yt;yt.prototype.isShaderMaterial=!0;yt.prototype.copy=function(e){return ge.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=et.clone(e.uniforms),this.defines=e.defines,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this};yt.prototype.toJSON=function(e){var t=ge.prototype.toJSON.call(this,e);return t.uniforms=this.uniforms,t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t};function Wt(e){ge.call(this),this.type="MeshDepthMaterial",this.depthPacking=uc,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(e)}Wt.prototype=Object.create(ge.prototype);Wt.prototype.constructor=Wt;Wt.prototype.isMeshDepthMaterial=!0;Wt.prototype.copy=function(e){return ge.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this};function Xt(e){ge.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new T,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.lights=!1,this.setValues(e)}Xt.prototype=Object.create(ge.prototype);Xt.prototype.constructor=Xt;Xt.prototype.isMeshDistanceMaterial=!0;Xt.prototype.copy=function(e){return ge.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this};function Ft(e,t){this.min=e!==void 0?e:new T(1/0,1/0,1/0),this.max=t!==void 0?t:new T(-1/0,-1/0,-1/0)}Object.assign(Ft.prototype,{isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,a=-1/0,o=-1/0,s=0,c=e.length;s<c;s+=3){var h=e[s],u=e[s+1],l=e[s+2];h<t&&(t=h),u<n&&(n=u),l<r&&(r=l),h>i&&(i=h),u>a&&(a=u),l>o&&(o=l)}return this.min.set(t,n,r),this.max.set(i,a,o),this},setFromBufferAttribute:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,a=-1/0,o=-1/0,s=0,c=e.count;s<c;s++){var h=e.getX(s),u=e.getY(s),l=e.getZ(s);h<t&&(t=h),u<n&&(n=u),l<r&&(r=l),h>i&&(i=h),u>a&&(a=u),l>o&&(o=l)}return this.min.set(t,n,r),this.max.set(i,a,o),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new T;return function(n,r){var i=e.copy(r).multiplyScalar(.5);return this.min.copy(n).sub(i),this.max.copy(n).add(i),this}}(),setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){var t=e||new T;return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){var t=e||new T;return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(){var e=new T;return function(n){var r=this;return n.updateMatrixWorld(!0),n.traverse(function(i){var a,o,s=i.geometry;if(s!==void 0){if(s.isGeometry){var c=s.vertices;for(a=0,o=c.length;a<o;a++)e.copy(c[a]),e.applyMatrix4(i.matrixWorld),r.expandByPoint(e)}else if(s.isBufferGeometry){var h=s.attributes.position;if(h!==void 0)for(a=0,o=h.count;a<o;a++)e.fromBufferAttribute(h,a).applyMatrix4(i.matrixWorld),r.expandByPoint(e)}}}),this}}(),containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){var n=t||new T;return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:function(){var e=new T;return function(n){return this.clampPoint(n.center,e),e.distanceToSquared(n.center)<=n.radius*n.radius}}(),intersectsPlane:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=e.constant&&n>=e.constant},clampPoint:function(e,t){var n=t||new T;return n.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new T;return function(n){var r=e.copy(n).clamp(this.min,this.max);return r.sub(n).length()}}(),getBoundingSphere:function(){var e=new T;return function(n){var r=n||new gt;return this.getCenter(r.center),r.radius=this.getSize(e).length()*.5,r}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(){var e=[new T,new T,new T,new T,new T,new T,new T,new T];return function(n){return this.isEmpty()?this:(e[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(n),e[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(n),e[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(n),e[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(n),e[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(n),e[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(n),e[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(n),e[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(n),this.setFromPoints(e),this)}}(),translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});function gt(e,t){this.center=e!==void 0?e:new T,this.radius=t!==void 0?t:0}Object.assign(gt.prototype,{set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(){var e=new Ft;return function(n,r){var i=this.center;r!==void 0?i.copy(r):e.setFromPoints(n).getCenter(i);for(var a=0,o=0,s=n.length;o<s;o++)a=Math.max(a,i.distanceToSquared(n[o]));return this.radius=Math.sqrt(a),this}}(),clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(e,t){var n=this.center.distanceToSquared(e),r=t||new T;return r.copy(e),n>this.radius*this.radius&&(r.sub(this.center).normalize(),r.multiplyScalar(this.radius).add(this.center)),r},getBoundingBox:function(e){var t=e||new Ft;return t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}});function _t(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.assign(_t.prototype,{isMatrix3:!0,set:function(e,t,n,r,i,a,o,s,c){var h=this.elements;return h[0]=e,h[1]=r,h[2]=o,h[3]=t,h[4]=i,h[5]=s,h[6]=n,h[7]=a,h[8]=c,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return new this.constructor().fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this},setFromMatrix4:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToBufferAttribute:function(){var e=new T;return function(n){for(var r=0,i=n.count;r<i;r++)e.x=n.getX(r),e.y=n.getY(r),e.z=n.getZ(r),e.applyMatrix3(this),n.setXYZ(r,e.x,e.y,e.z);return n}}(),multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,r=t.elements,i=this.elements,a=n[0],o=n[3],s=n[6],c=n[1],h=n[4],u=n[7],l=n[2],f=n[5],d=n[8],p=r[0],y=r[3],x=r[6],m=r[1],v=r[4],g=r[7],_=r[2],M=r[5],w=r[8];return i[0]=a*p+o*m+s*_,i[3]=a*y+o*v+s*M,i[6]=a*x+o*g+s*w,i[1]=c*p+h*m+u*_,i[4]=c*y+h*v+u*M,i[7]=c*x+h*g+u*w,i[2]=l*p+f*m+d*_,i[5]=l*y+f*v+d*M,i[8]=l*x+f*g+d*w,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],c=e[7],h=e[8];return t*a*h-t*o*c-n*i*h+n*o*s+r*i*c-r*a*s},getInverse:function(e,t){e&&e.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var n=e.elements,r=this.elements,i=n[0],a=n[1],o=n[2],s=n[3],c=n[4],h=n[5],u=n[6],l=n[7],f=n[8],d=f*c-h*l,p=h*u-f*s,y=l*s-c*u,x=i*d+a*p+o*y;if(x===0){var m="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(t===!0)throw new Error(m);return console.warn(m),this.identity()}var v=1/x;return r[0]=d*v,r[1]=(o*l-f*a)*v,r[2]=(h*a-o*c)*v,r[3]=p*v,r[4]=(f*i-o*u)*v,r[5]=(o*s-h*i)*v,r[6]=y*v,r[7]=(a*u-l*i)*v,r[8]=(c*i-a*s)*v,this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},equals:function(e){for(var t=this.elements,n=e.elements,r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0},fromArray:function(e,t){t===void 0&&(t=0);for(var n=0;n<9;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){e===void 0&&(e=[]),t===void 0&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}});function dt(e,t){this.normal=e!==void 0?e:new T(1,0,0),this.constant=t!==void 0?t:0}Object.assign(dt.prototype,{set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var e=new T,t=new T;return function(r,i,a){var o=e.subVectors(a,i).cross(t.subVectors(r,i)).normalize();return this.setFromNormalAndCoplanarPoint(o,r),this}}(),clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){var n=t||new T;return n.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)},intersectLine:function(){var e=new T;return function(n,r){var i=r||new T,a=n.delta(e),o=this.normal.dot(a);if(o===0)return this.distanceToPoint(n.start)===0?i.copy(n.start):void 0;var s=-(n.start.dot(this.normal)+this.constant)/o;if(!(s<0||s>1))return i.copy(a).multiplyScalar(s).add(n.start)}}(),intersectsLine:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){var t=e||new T;return t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new T,t=new _t;return function(r,i){var a=i||t.getNormalMatrix(r),o=this.coplanarPoint(e).applyMatrix4(r),s=this.normal.applyMatrix3(a).normalize();return this.constant=-o.dot(s),this}}(),translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}});function Ra(e,t,n,r,i,a){this.planes=[e!==void 0?e:new dt,t!==void 0?t:new dt,n!==void 0?n:new dt,r!==void 0?r:new dt,i!==void 0?i:new dt,a!==void 0?a:new dt]}Object.assign(Ra.prototype,{set:function(e,t,n,r,i,a){var o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(r),o[4].copy(i),o[5].copy(a),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this},setFromMatrix:function(e){var t=this.planes,n=e.elements,r=n[0],i=n[1],a=n[2],o=n[3],s=n[4],c=n[5],h=n[6],u=n[7],l=n[8],f=n[9],d=n[10],p=n[11],y=n[12],x=n[13],m=n[14],v=n[15];return t[0].setComponents(o-r,u-s,p-l,v-y).normalize(),t[1].setComponents(o+r,u+s,p+l,v+y).normalize(),t[2].setComponents(o+i,u+c,p+f,v+x).normalize(),t[3].setComponents(o-i,u-c,p-f,v-x).normalize(),t[4].setComponents(o-a,u-h,p-d,v-m).normalize(),t[5].setComponents(o+a,u+h,p+d,v+m).normalize(),this},intersectsObject:function(){var e=new gt;return function(n){var r=n.geometry;return r.boundingSphere===null&&r.computeBoundingSphere(),e.copy(r.boundingSphere).applyMatrix4(n.matrixWorld),this.intersectsSphere(e)}}(),intersectsSprite:function(){var e=new gt;return function(n){return e.center.set(0,0,0),e.radius=.7071067811865476,e.applyMatrix4(n.matrixWorld),this.intersectsSphere(e)}}(),intersectsSphere:function(e){for(var t=this.planes,n=e.center,r=-e.radius,i=0;i<6;i++){var a=t[i].distanceToPoint(n);if(a<r)return!1}return!0},intersectsBox:function(){var e=new T,t=new T;return function(r){for(var i=this.planes,a=0;a<6;a++){var o=i[a];e.x=o.normal.x>0?r.min.x:r.max.x,t.x=o.normal.x>0?r.max.x:r.min.x,e.y=o.normal.y>0?r.min.y:r.max.y,t.y=o.normal.y>0?r.max.y:r.min.y,e.z=o.normal.z>0?r.min.z:r.max.z,t.z=o.normal.z>0?r.max.z:r.min.z;var s=o.distanceToPoint(e),c=o.distanceToPoint(t);if(s<0&&c<0)return!1}return!0}}(),containsPoint:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}});function No(e,t,n){for(var r=new Ra,i=new ue,a=new q,o=new q(n,n),s=new T,c=new T,h=1,u=2,l=(h|u)+1,f=new Array(l),d=new Array(l),p={},y=[new T(1,0,0),new T(-1,0,0),new T(0,0,1),new T(0,0,-1),new T(0,1,0),new T(0,-1,0)],x=[new T(0,1,0),new T(0,1,0),new T(0,1,0),new T(0,1,0),new T(0,0,1),new T(0,0,-1)],m=[new Ce,new Ce,new Ce,new Ce,new Ce,new Ce],v=0;v!==l;++v){var g=(v&h)!==0,_=(v&u)!==0,M=new Wt({depthPacking:lc,morphTargets:g,skinning:_});f[v]=M;var w=new Xt({morphTargets:g,skinning:_});d[v]=w}var A=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=fo,this.renderReverseSided=!0,this.renderSingleSided=!0,this.render=function(C,D,H){if(A.enabled!==!1&&!(A.autoUpdate===!1&&A.needsUpdate===!1)&&C.length!==0){var L=e.context,E=e.state;E.disable(L.BLEND),E.buffers.color.setClear(1,1,1,1),E.buffers.depth.setTest(!0),E.setScissorTest(!1);for(var B,I=0,N=C.length;I<N;I++){var z=C[I],V=z.shadow,W=z&&z.isPointLight;if(V===void 0){console.warn("THREE.WebGLShadowMap:",z,"has no shadow.");continue}var X=V.camera;if(a.copy(V.mapSize),a.min(o),W){var Y=a.x,j=a.y;m[0].set(Y*2,j,Y,j),m[1].set(0,j,Y,j),m[2].set(Y*3,j,Y,j),m[3].set(Y,j,Y,j),m[4].set(Y*3,0,Y,j),m[5].set(Y,0,Y,j),a.x*=4,a.y*=2}if(V.map===null){var re={minFilter:ht,magFilter:ht,format:Ut};V.map=new br(a.x,a.y,re),V.map.texture.name=z.name+".shadowMap",X.updateProjectionMatrix()}V.isSpotLightShadow&&V.update(z);var O=V.map,ae=V.matrix;c.setFromMatrixPosition(z.matrixWorld),X.position.copy(c),W?(B=6,ae.makeTranslation(-c.x,-c.y,-c.z)):(B=1,s.setFromMatrixPosition(z.target.matrixWorld),X.lookAt(s),X.updateMatrixWorld(),ae.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),ae.multiply(X.projectionMatrix),ae.multiply(X.matrixWorldInverse)),e.setRenderTarget(O),e.clear();for(var G=0;G<B;G++){if(W){s.copy(X.position),s.add(y[G]),X.up.copy(x[G]),X.lookAt(s),X.updateMatrixWorld();var fe=m[G];E.viewport(fe)}i.multiplyMatrices(X.projectionMatrix,X.matrixWorldInverse),r.setFromMatrix(i),S(D,H,X,W)}}A.needsUpdate=!1}};function P(C,D,H,L,E,B){var I=C.geometry,N=null,z=f,V=C.customDepthMaterial;if(H&&(z=d,V=C.customDistanceMaterial),V)N=V;else{var W=!1;D.morphTargets&&(I&&I.isBufferGeometry?W=I.morphAttributes&&I.morphAttributes.position&&I.morphAttributes.position.length>0:I&&I.isGeometry&&(W=I.morphTargets&&I.morphTargets.length>0)),C.isSkinnedMesh&&D.skinning===!1&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",C);var X=C.isSkinnedMesh&&D.skinning,Y=0;W&&(Y|=h),X&&(Y|=u),N=z[Y]}if(e.localClippingEnabled&&D.clipShadows===!0&&D.clippingPlanes.length!==0){var j=N.uuid,re=D.uuid,O=p[j];O===void 0&&(O={},p[j]=O);var ae=O[re];ae===void 0&&(ae=N.clone(),O[re]=ae),N=ae}N.visible=D.visible,N.wireframe=D.wireframe;var G=D.side;return A.renderSingleSided&&G==gr&&(G=Rn),A.renderReverseSided&&(G===Rn?G=Ht:G===Ht&&(G=Rn)),N.side=G,N.clipShadows=D.clipShadows,N.clippingPlanes=D.clippingPlanes,N.clipIntersection=D.clipIntersection,N.wireframeLinewidth=D.wireframeLinewidth,N.linewidth=D.linewidth,H&&N.isMeshDistanceMaterial&&(N.referencePosition.copy(L),N.nearDistance=E,N.farDistance=B),N}function S(C,D,H,L){if(C.visible!==!1){var E=C.layers.test(D.layers);if(E&&(C.isMesh||C.isLine||C.isPoints)&&C.castShadow&&(!C.frustumCulled||r.intersectsObject(C))){C.modelViewMatrix.multiplyMatrices(H.matrixWorldInverse,C.matrixWorld);var B=t.update(C),I=C.material;if(Array.isArray(I))for(var N=B.groups,z=0,V=N.length;z<V;z++){var W=N[z],X=I[W.materialIndex];if(X&&X.visible){var Y=P(C,X,L,c,H.near,H.far);e.renderBufferDirect(H,null,B,Y,C,W)}}else if(I.visible){var Y=P(C,I,L,c,H.near,H.far);e.renderBufferDirect(H,null,B,Y,C,null)}}for(var j=C.children,re=0,O=j.length;re<O;re++)S(j[re],D,H,L)}}}function ku(e){var t={};function n(s,c){var h=s.array,u=s.dynamic?e.DYNAMIC_DRAW:e.STATIC_DRAW,l=e.createBuffer();e.bindBuffer(c,l),e.bufferData(c,h,u),s.onUploadCallback();var f=e.FLOAT;return h instanceof Float32Array?f=e.FLOAT:h instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):h instanceof Uint16Array?f=e.UNSIGNED_SHORT:h instanceof Int16Array?f=e.SHORT:h instanceof Uint32Array?f=e.UNSIGNED_INT:h instanceof Int32Array?f=e.INT:h instanceof Int8Array?f=e.BYTE:h instanceof Uint8Array&&(f=e.UNSIGNED_BYTE),{buffer:l,type:f,bytesPerElement:h.BYTES_PER_ELEMENT,version:s.version}}function r(s,c,h){var u=c.array,l=c.updateRange;e.bindBuffer(h,s),c.dynamic===!1?e.bufferData(h,u,e.STATIC_DRAW):l.count===-1?e.bufferSubData(h,0,u):l.count===0?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(e.bufferSubData(h,l.offset*u.BYTES_PER_ELEMENT,u.subarray(l.offset,l.offset+l.count)),l.count=-1)}function i(s){return s.isInterleavedBufferAttribute&&(s=s.data),t[s.uuid]}function a(s){s.isInterleavedBufferAttribute&&(s=s.data);var c=t[s.uuid];c&&(e.deleteBuffer(c.buffer),delete t[s.uuid])}function o(s,c){s.isInterleavedBufferAttribute&&(s=s.data);var h=t[s.uuid];h===void 0?t[s.uuid]=n(s,c):h.version<s.version&&(r(h.buffer,s,c),h.version=s.version)}return{get:i,remove:a,update:o}}function qt(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._order=r||qt.DefaultOrder}qt.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];qt.DefaultOrder="XYZ";Object.defineProperties(qt.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this.onChangeCallback()}}});Object.assign(qt.prototype,{isEuler:!0,set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._order=r||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,t,n){var r=me.clamp,i=e.elements,a=i[0],o=i[4],s=i[8],c=i[1],h=i[5],u=i[9],l=i[2],f=i[6],d=i[10];return t=t||this._order,t==="XYZ"?(this._y=Math.asin(r(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(-u,d),this._z=Math.atan2(-o,a)):(this._x=Math.atan2(f,h),this._z=0)):t==="YXZ"?(this._x=Math.asin(-r(u,-1,1)),Math.abs(u)<.99999?(this._y=Math.atan2(s,d),this._z=Math.atan2(c,h)):(this._y=Math.atan2(-l,a),this._z=0)):t==="ZXY"?(this._x=Math.asin(r(f,-1,1)),Math.abs(f)<.99999?(this._y=Math.atan2(-l,d),this._z=Math.atan2(-o,h)):(this._y=0,this._z=Math.atan2(c,a))):t==="ZYX"?(this._y=Math.asin(-r(l,-1,1)),Math.abs(l)<.99999?(this._x=Math.atan2(f,d),this._z=Math.atan2(c,a)):(this._x=0,this._z=Math.atan2(-o,h))):t==="YZX"?(this._z=Math.asin(r(c,-1,1)),Math.abs(c)<.99999?(this._x=Math.atan2(-u,h),this._y=Math.atan2(-l,a)):(this._x=0,this._y=Math.atan2(s,d))):t==="XZY"?(this._z=Math.asin(-r(o,-1,1)),Math.abs(o)<.99999?(this._x=Math.atan2(f,h),this._y=Math.atan2(s,a)):(this._x=Math.atan2(-u,d),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,n!==!1&&this.onChangeCallback(),this},setFromQuaternion:function(){var e=new ue;return function(n,r,i){return e.makeRotationFromQuaternion(n),this.setFromRotationMatrix(e,r,i)}}(),setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:function(){var e=new Ge;return function(n){return e.setFromEuler(this),this.setFromQuaternion(e,n)}}(),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(e,t){return e===void 0&&(e=[]),t===void 0&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new T(this._x,this._y,this._z)},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}});function Bo(){this.mask=1}Object.assign(Bo.prototype,{set:function(e){this.mask=1<<e|0},enable:function(e){this.mask|=1<<e|0},toggle:function(e){this.mask^=1<<e|0},disable:function(e){this.mask&=~(1<<e|0)},test:function(e){return(this.mask&e.mask)!==0}});var Wu=0;function J(){Object.defineProperty(this,"id",{value:Wu++}),this.uuid=me.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=J.DefaultUp.clone();var e=new T,t=new qt,n=new Ge,r=new T(1,1,1);function i(){n.setFromEuler(t,!1)}function a(){t.setFromQuaternion(n,void 0,!1)}t.onChange(i),n.onChange(a),Object.defineProperties(this,{position:{enumerable:!0,value:e},rotation:{enumerable:!0,value:t},quaternion:{enumerable:!0,value:n},scale:{enumerable:!0,value:r},modelViewMatrix:{value:new ue},normalMatrix:{value:new _t}}),this.matrix=new ue,this.matrixWorld=new ue,this.matrixAutoUpdate=J.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Bo,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}J.DefaultUp=new T(0,1,0);J.DefaultMatrixAutoUpdate=!0;Object.assign(J.prototype,Lt.prototype,{isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(){var e=new Ge;return function(n,r){return e.setFromAxisAngle(n,r),this.quaternion.multiply(e),this}}(),rotateX:function(){var e=new T(1,0,0);return function(n){return this.rotateOnAxis(e,n)}}(),rotateY:function(){var e=new T(0,1,0);return function(n){return this.rotateOnAxis(e,n)}}(),rotateZ:function(){var e=new T(0,0,1);return function(n){return this.rotateOnAxis(e,n)}}(),translateOnAxis:function(){var e=new T;return function(n,r){return e.copy(n).applyQuaternion(this.quaternion),this.position.add(e.multiplyScalar(r)),this}}(),translateX:function(){var e=new T(1,0,0);return function(n){return this.translateOnAxis(e,n)}}(),translateY:function(){var e=new T(0,1,0);return function(n){return this.translateOnAxis(e,n)}}(),translateZ:function(){var e=new T(0,0,1);return function(n){return this.translateOnAxis(e,n)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var e=new ue;return function(n){return n.applyMatrix4(e.getInverse(this.matrixWorld))}}(),lookAt:function(){var e=new ue;return function(n){this.isCamera?e.lookAt(this.position,n,this.up):e.lookAt(n,this.position,this.up),this.quaternion.setFromRotationMatrix(e)}}(),add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var n=this.children.indexOf(e);return n!==-1&&(e.parent=null,e.dispatchEvent({type:"removed"}),this.children.splice(n,1)),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n],a=i.getObjectByProperty(e,t);if(a!==void 0)return a}},getWorldPosition:function(e){var t=e||new T;return this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var e=new T,t=new T;return function(r){var i=r||new Ge;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,i,t),i}}(),getWorldRotation:function(){var e=new Ge;return function(n){var r=n||new qt;return this.getWorldQuaternion(e),r.setFromQuaternion(e,this.rotation.order,!1)}}(),getWorldScale:function(){var e=new T,t=new Ge;return function(r){var i=r||new T;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,t,i),i}}(),getWorldDirection:function(){var e=new Ge;return function(n){var r=n||new T;return this.getWorldQuaternion(e),r.set(0,0,1).applyQuaternion(e)}}(),raycast:function(){},traverse:function(e){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverse(e)},traverseVisible:function(e){if(this.visible!==!1){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)},toJSON:function(e){var t=e===void 0||e==="",n={};t&&(e={geometries:{},materials:{},textures:{},images:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData),r.matrix=this.matrix.toArray();function i(d,p){return d[p.uuid]===void 0&&(d[p.uuid]=p.toJSON(e)),p.uuid}if(this.geometry!==void 0&&(r.geometry=i(e.geometries,this.geometry)),this.material!==void 0)if(Array.isArray(this.material)){for(var a=[],o=0,s=this.material.length;o<s;o++)a.push(i(e.materials,this.material[o]));r.material=a}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(var o=0;o<this.children.length;o++)r.children.push(this.children[o].toJSON(e).object)}if(t){var c=f(e.geometries),h=f(e.materials),u=f(e.textures),l=f(e.images);c.length>0&&(n.geometries=c),h.length>0&&(n.materials=h),u.length>0&&(n.textures=u),l.length>0&&(n.images=l)}return n.object=r,n;function f(d){var p=[];for(var y in d){var x=d[y];delete x.metadata,p.push(x)}return p}},clone:function(e){return new this.constructor().copy(this,e)},copy:function(e,t){if(t===void 0&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(var n=0;n<e.children.length;n++){var r=e.children[n];this.add(r.clone())}return this}});function Tt(){J.call(this),this.type="Camera",this.matrixWorldInverse=new ue,this.projectionMatrix=new ue}Tt.prototype=Object.assign(Object.create(J.prototype),{constructor:Tt,isCamera:!0,copy:function(e,t){return J.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this},getWorldDirection:function(){var e=new Ge;return function(n){var r=n||new T;return this.getWorldQuaternion(e),r.set(0,0,-1).applyQuaternion(e)}}(),updateMatrixWorld:function(e){J.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return new this.constructor().copy(this)}});function Dt(e,t,n,r,i,a){Tt.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=i!==void 0?i:.1,this.far=a!==void 0?a:2e3,this.updateProjectionMatrix()}Dt.prototype=Object.assign(Object.create(Tt.prototype),{constructor:Dt,isOrthographicCamera:!0,copy:function(e,t){return Tt.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this},setViewOffset:function(e,t,n,r,i,a){this.view={fullWidth:e,fullHeight:t,offsetX:n,offsetY:r,width:i,height:a},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-e,a=n+e,o=r+t,s=r-t;if(this.view!==null){var c=this.zoom/(this.view.width/this.view.fullWidth),h=this.zoom/(this.view.height/this.view.fullHeight),u=(this.right-this.left)/this.view.width,l=(this.top-this.bottom)/this.view.height;i+=u*(this.view.offsetX/c),a=i+u*(this.view.width/c),o-=l*(this.view.offsetY/h),s=o-l*(this.view.height/h)}this.projectionMatrix.makeOrthographic(i,a,o,s,this.near,this.far)},toJSON:function(e){var t=J.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}});function ze(e,t,n,r){Tt.call(this),this.type="PerspectiveCamera",this.fov=e!==void 0?e:50,this.zoom=1,this.near=n!==void 0?n:.1,this.far=r!==void 0?r:2e3,this.focus=10,this.aspect=t!==void 0?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}ze.prototype=Object.assign(Object.create(Tt.prototype),{constructor:ze,isPerspectiveCamera:!0,copy:function(e,t){return Tt.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){var t=.5*this.getFilmHeight()/e;this.fov=me.RAD2DEG*2*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(me.DEG2RAD*.5*this.fov);return .5*this.getFilmHeight()/e},getEffectiveFOV:function(){return me.RAD2DEG*2*Math.atan(Math.tan(me.DEG2RAD*.5*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,n,r,i,a){this.aspect=e/t,this.view={fullWidth:e,fullHeight:t,offsetX:n,offsetY:r,width:i,height:a},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(me.DEG2RAD*.5*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r,a=this.view;if(a!==null){var o=a.fullWidth,s=a.fullHeight;i+=a.offsetX*r/o,t-=a.offsetY*n/s,r*=a.width/o,n*=a.height/s}var c=this.filmOffset;c!==0&&(i+=e*c/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far)},toJSON:function(e){var t=J.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}});function Gt(e,t,n,r,i,a){this.a=e,this.b=t,this.c=n,this.normal=r&&r.isVector3?r:new T,this.vertexNormals=Array.isArray(r)?r:[],this.color=i&&i.isColor?i:new ie,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=a!==void 0?a:0}Object.assign(Gt.prototype,{clone:function(){return new this.constructor().copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(var t=0,n=e.vertexColors.length;t<n;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}});var Xu=0;function zo(){return Xu++}function le(){Object.defineProperty(this,"id",{value:zo()}),this.uuid=me.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}Object.assign(le.prototype,Lt.prototype,{isGeometry:!0,applyMatrix:function(e){for(var t=new _t().getNormalMatrix(e),n=0,r=this.vertices.length;n<r;n++){var i=this.vertices[n];i.applyMatrix4(e)}for(var n=0,r=this.faces.length;n<r;n++){var a=this.faces[n];a.normal.applyMatrix3(t).normalize();for(var o=0,s=a.vertexNormals.length;o<s;o++)a.vertexNormals[o].applyMatrix3(t).normalize()}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var e=new ue;return function(n){return e.makeRotationX(n),this.applyMatrix(e),this}}(),rotateY:function(){var e=new ue;return function(n){return e.makeRotationY(n),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new ue;return function(n){return e.makeRotationZ(n),this.applyMatrix(e),this}}(),translate:function(){var e=new ue;return function(n,r,i){return e.makeTranslation(n,r,i),this.applyMatrix(e),this}}(),scale:function(){var e=new ue;return function(n,r,i){return e.makeScale(n,r,i),this.applyMatrix(e),this}}(),lookAt:function(){var e=new J;return function(n){e.lookAt(n),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),fromBufferGeometry:function(e){var t=this,n=e.index!==null?e.index.array:void 0,r=e.attributes,i=r.position.array,a=r.normal!==void 0?r.normal.array:void 0,o=r.color!==void 0?r.color.array:void 0,s=r.uv!==void 0?r.uv.array:void 0,c=r.uv2!==void 0?r.uv2.array:void 0;c!==void 0&&(this.faceVertexUvs[1]=[]);for(var h=[],u=[],l=[],f=0,d=0;f<i.length;f+=3,d+=2)t.vertices.push(new T(i[f],i[f+1],i[f+2])),a!==void 0&&h.push(new T(a[f],a[f+1],a[f+2])),o!==void 0&&t.colors.push(new ie(o[f],o[f+1],o[f+2])),s!==void 0&&u.push(new q(s[d],s[d+1])),c!==void 0&&l.push(new q(c[d],c[d+1]));function p(_,M,w,A){var P=a!==void 0?[h[_].clone(),h[M].clone(),h[w].clone()]:[],S=o!==void 0?[t.colors[_].clone(),t.colors[M].clone(),t.colors[w].clone()]:[],C=new Gt(_,M,w,P,S,A);t.faces.push(C),s!==void 0&&t.faceVertexUvs[0].push([u[_].clone(),u[M].clone(),u[w].clone()]),c!==void 0&&t.faceVertexUvs[1].push([l[_].clone(),l[M].clone(),l[w].clone()])}var y=e.groups;if(y.length>0)for(var f=0;f<y.length;f++)for(var x=y[f],m=x.start,v=x.count,d=m,g=m+v;d<g;d+=3)n!==void 0?p(n[d],n[d+1],n[d+2],x.materialIndex):p(d,d+1,d+2,x.materialIndex);else if(n!==void 0)for(var f=0;f<n.length;f+=3)p(n[f],n[f+1],n[f+2]);else for(var f=0;f<i.length/3;f+=3)p(f,f+1,f+2);return this.computeFaceNormals(),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var e=this.boundingBox.getCenter().negate();return this.translate(e.x,e.y,e.z),e},normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,n=t===0?1:1/t,r=new ue;return r.set(n,0,0,-n*e.x,0,n,0,-n*e.y,0,0,n,-n*e.z,0,0,0,1),this.applyMatrix(r),this},computeFaceNormals:function(){for(var e=new T,t=new T,n=0,r=this.faces.length;n<r;n++){var i=this.faces[n],a=this.vertices[i.a],o=this.vertices[i.b],s=this.vertices[i.c];e.subVectors(s,o),t.subVectors(a,o),e.cross(t),e.normalize(),i.normal.copy(e)}},computeVertexNormals:function(e){e===void 0&&(e=!0);var t,n,r,i,a,o;for(o=new Array(this.vertices.length),t=0,n=this.vertices.length;t<n;t++)o[t]=new T;if(e){var s,c,h,u=new T,l=new T;for(r=0,i=this.faces.length;r<i;r++)a=this.faces[r],s=this.vertices[a.a],c=this.vertices[a.b],h=this.vertices[a.c],u.subVectors(h,c),l.subVectors(s,c),u.cross(l),o[a.a].add(u),o[a.b].add(u),o[a.c].add(u)}else for(this.computeFaceNormals(),r=0,i=this.faces.length;r<i;r++)a=this.faces[r],o[a.a].add(a.normal),o[a.b].add(a.normal),o[a.c].add(a.normal);for(t=0,n=this.vertices.length;t<n;t++)o[t].normalize();for(r=0,i=this.faces.length;r<i;r++){a=this.faces[r];var f=a.vertexNormals;f.length===3?(f[0].copy(o[a.a]),f[1].copy(o[a.b]),f[2].copy(o[a.c])):(f[0]=o[a.a].clone(),f[1]=o[a.b].clone(),f[2]=o[a.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e,t,n;for(this.computeFaceNormals(),e=0,t=this.faces.length;e<t;e++){n=this.faces[e];var r=n.vertexNormals;r.length===3?(r[0].copy(n.normal),r[1].copy(n.normal),r[2].copy(n.normal)):(r[0]=n.normal.clone(),r[1]=n.normal.clone(),r[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t,n,r,i;for(n=0,r=this.faces.length;n<r;n++)for(i=this.faces[n],i.__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]),e=0,t=i.vertexNormals.length;e<t;e++)i.__originalVertexNormals[e]?i.__originalVertexNormals[e].copy(i.vertexNormals[e]):i.__originalVertexNormals[e]=i.vertexNormals[e].clone();var a=new le;for(a.faces=this.faces,e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var o=this.morphNormals[e].faceNormals,s=this.morphNormals[e].vertexNormals,h,u;for(n=0,r=this.faces.length;n<r;n++)h=new T,u={a:new T,b:new T,c:new T},o.push(h),s.push(u)}var c=this.morphNormals[e];a.vertices=this.morphTargets[e].vertices,a.computeFaceNormals(),a.computeVertexNormals();var h,u;for(n=0,r=this.faces.length;n<r;n++)i=this.faces[n],h=c.faceNormals[n],u=c.vertexNormals[n],h.copy(i.normal),u.a.copy(i.vertexNormals[0]),u.b.copy(i.vertexNormals[1]),u.c.copy(i.vertexNormals[2])}for(n=0,r=this.faces.length;n<r;n++)i=this.faces[n],i.normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals},computeLineDistances:function(){for(var e=0,t=this.vertices,n=0,r=t.length;n<r;n++)n>0&&(e+=t[n].distanceTo(t[n-1])),this.lineDistances[n]=e},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new Ft),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new gt),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,n){if(!(e&&e.isGeometry)){console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);return}var r,i=this.vertices.length,a=this.vertices,o=e.vertices,s=this.faces,c=e.faces,h=this.faceVertexUvs[0],u=e.faceVertexUvs[0],l=this.colors,f=e.colors;n===void 0&&(n=0),t!==void 0&&(r=new _t().getNormalMatrix(t));for(var d=0,p=o.length;d<p;d++){var y=o[d],x=y.clone();t!==void 0&&x.applyMatrix4(t),a.push(x)}for(var d=0,p=f.length;d<p;d++)l.push(f[d].clone());for(d=0,p=c.length;d<p;d++){var m=c[d],v,g,_,M=m.vertexNormals,w=m.vertexColors;v=new Gt(m.a+i,m.b+i,m.c+i),v.normal.copy(m.normal),r!==void 0&&v.normal.applyMatrix3(r).normalize();for(var A=0,P=M.length;A<P;A++)g=M[A].clone(),r!==void 0&&g.applyMatrix3(r).normalize(),v.vertexNormals.push(g);v.color.copy(m.color);for(var A=0,P=w.length;A<P;A++)_=w[A],v.vertexColors.push(_.clone());v.materialIndex=m.materialIndex+n,s.push(v)}for(d=0,p=u.length;d<p;d++){var S=u[d],C=[];if(S!==void 0){for(var A=0,P=S.length;A<P;A++)C.push(S[A].clone());h.push(C)}}},mergeMesh:function(e){if(!(e&&e.isMesh)){console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e);return}e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)},mergeVertices:function(){var e={},t=[],n=[],r,i,a=4,o=Math.pow(10,a),s,c,h,u,l,f;for(s=0,c=this.vertices.length;s<c;s++)r=this.vertices[s],i=Math.round(r.x*o)+"_"+Math.round(r.y*o)+"_"+Math.round(r.z*o),e[i]===void 0?(e[i]=s,t.push(this.vertices[s]),n[s]=t.length-1):n[s]=n[e[i]];var d=[];for(s=0,c=this.faces.length;s<c;s++){h=this.faces[s],h.a=n[h.a],h.b=n[h.b],h.c=n[h.c],u=[h.a,h.b,h.c];for(var p=0;p<3;p++)if(u[p]===u[(p+1)%3]){d.push(s);break}}for(s=d.length-1;s>=0;s--){var y=d[s];for(this.faces.splice(y,1),l=0,f=this.faceVertexUvs.length;l<f;l++)this.faceVertexUvs[l].splice(y,1)}var x=this.vertices.length-t.length;return this.vertices=t,x},sortFacesByMaterialIndex:function(){for(var e=this.faces,t=e.length,n=0;n<t;n++)e[n]._id=n;function r(h,u){return h.materialIndex-u.materialIndex}e.sort(r);var i=this.faceVertexUvs[0],a=this.faceVertexUvs[1],o,s;i&&i.length===t&&(o=[]),a&&a.length===t&&(s=[]);for(var n=0;n<t;n++){var c=e[n]._id;o&&o.push(i[c]),s&&s.push(a[c])}o&&(this.faceVertexUvs[0]=o),s&&(this.faceVertexUvs[1]=s)},toJSON:function(){var e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),this.parameters!==void 0){var t=this.parameters;for(var n in t)t[n]!==void 0&&(e[n]=t[n]);return e}for(var r=[],i=0;i<this.vertices.length;i++){var a=this.vertices[i];r.push(a.x,a.y,a.z)}for(var o=[],s=[],c={},h=[],u={},l=[],f={},i=0;i<this.faces.length;i++){var d=this.faces[i],p=!0,y=!1,x=this.faceVertexUvs[0][i]!==void 0,m=d.normal.length()>0,v=d.vertexNormals.length>0,g=d.color.r!==1||d.color.g!==1||d.color.b!==1,_=d.vertexColors.length>0,M=0;if(M=S(M,0,0),M=S(M,1,p),M=S(M,2,y),M=S(M,3,x),M=S(M,4,m),M=S(M,5,v),M=S(M,6,g),M=S(M,7,_),o.push(M),o.push(d.a,d.b,d.c),o.push(d.materialIndex),x){var w=this.faceVertexUvs[0][i];o.push(H(w[0]),H(w[1]),H(w[2]))}if(m&&o.push(C(d.normal)),v){var A=d.vertexNormals;o.push(C(A[0]),C(A[1]),C(A[2]))}if(g&&o.push(D(d.color)),_){var P=d.vertexColors;o.push(D(P[0]),D(P[1]),D(P[2]))}}function S(L,E,B){return B?L|1<<E:L&~(1<<E)}function C(L){var E=L.x.toString()+L.y.toString()+L.z.toString();return c[E]!==void 0||(c[E]=s.length/3,s.push(L.x,L.y,L.z)),c[E]}function D(L){var E=L.r.toString()+L.g.toString()+L.b.toString();return u[E]!==void 0||(u[E]=h.length,h.push(L.getHex())),u[E]}function H(L){var E=L.x.toString()+L.y.toString();return f[E]!==void 0||(f[E]=l.length/2,l.push(L.x,L.y)),f[E]}return e.data={},e.data.vertices=r,e.data.normals=s,h.length>0&&(e.data.colors=h),l.length>0&&(e.data.uvs=[l]),e.data.faces=o,e},clone:function(){return new le().copy(this)},copy:function(e){var t,n,r,i,a,o;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var s=e.vertices;for(t=0,n=s.length;t<n;t++)this.vertices.push(s[t].clone());var c=e.colors;for(t=0,n=c.length;t<n;t++)this.colors.push(c[t].clone());var h=e.faces;for(t=0,n=h.length;t<n;t++)this.faces.push(h[t].clone());for(t=0,n=e.faceVertexUvs.length;t<n;t++){var u=e.faceVertexUvs[t];for(this.faceVertexUvs[t]===void 0&&(this.faceVertexUvs[t]=[]),r=0,i=u.length;r<i;r++){var l=u[r],f=[];for(a=0,o=l.length;a<o;a++){var d=l[a];f.push(d.clone())}this.faceVertexUvs[t].push(f)}}var p=e.morphTargets;for(t=0,n=p.length;t<n;t++){var y={};if(y.name=p[t].name,p[t].vertices!==void 0)for(y.vertices=[],r=0,i=p[t].vertices.length;r<i;r++)y.vertices.push(p[t].vertices[r].clone());if(p[t].normals!==void 0)for(y.normals=[],r=0,i=p[t].normals.length;r<i;r++)y.normals.push(p[t].normals[r].clone());this.morphTargets.push(y)}var x=e.morphNormals;for(t=0,n=x.length;t<n;t++){var m={};if(x[t].vertexNormals!==void 0)for(m.vertexNormals=[],r=0,i=x[t].vertexNormals.length;r<i;r++){var v=x[t].vertexNormals[r],g={};g.a=v.a.clone(),g.b=v.b.clone(),g.c=v.c.clone(),m.vertexNormals.push(g)}if(x[t].faceNormals!==void 0)for(m.faceNormals=[],r=0,i=x[t].faceNormals.length;r<i;r++)m.faceNormals.push(x[t].faceNormals[r].clone());this.morphNormals.push(m)}var _=e.skinWeights;for(t=0,n=_.length;t<n;t++)this.skinWeights.push(_[t].clone());var M=e.skinIndices;for(t=0,n=M.length;t<n;t++)this.skinIndices.push(M[t].clone());var w=e.lineDistances;for(t=0,n=w.length;t<n;t++)this.lineDistances.push(w[t]);var A=e.boundingBox;A!==null&&(this.boundingBox=A.clone());var P=e.boundingSphere;return P!==null&&(this.boundingSphere=P.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function xe(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.uuid=me.generateUUID(),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n===!0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}Object.defineProperty(xe.prototype,"needsUpdate",{set:function(e){e===!0&&this.version++}});Object.assign(xe.prototype,{isBufferAttribute:!0,setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=e!==void 0?e.length/this.itemSize:0,this.array=e},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];a===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),a=new ie),t[n++]=a.r,t[n++]=a.g,t[n++]=a.b}return this},copyIndicesArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];t[n++]=a.a,t[n++]=a.b,t[n++]=a.c}return this},copyVector2sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];a===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),a=new q),t[n++]=a.x,t[n++]=a.y}return this},copyVector3sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];a===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),a=new T),t[n++]=a.x,t[n++]=a.y,t[n++]=a.z}return this},copyVector4sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];a===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),a=new Ce),t[n++]=a.x,t[n++]=a.y,t[n++]=a.z,t[n++]=a.w}return this},set:function(e,t){return t===void 0&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}});function Gi(e,t){xe.call(this,new Int8Array(e),t)}Gi.prototype=Object.create(xe.prototype);Gi.prototype.constructor=Gi;function Hi(e,t){xe.call(this,new Uint8Array(e),t)}Hi.prototype=Object.create(xe.prototype);Hi.prototype.constructor=Hi;function Vi(e,t){xe.call(this,new Uint8ClampedArray(e),t)}Vi.prototype=Object.create(xe.prototype);Vi.prototype.constructor=Vi;function ki(e,t){xe.call(this,new Int16Array(e),t)}ki.prototype=Object.create(xe.prototype);ki.prototype.constructor=ki;function Nn(e,t){xe.call(this,new Uint16Array(e),t)}Nn.prototype=Object.create(xe.prototype);Nn.prototype.constructor=Nn;function Wi(e,t){xe.call(this,new Int32Array(e),t)}Wi.prototype=Object.create(xe.prototype);Wi.prototype.constructor=Wi;function Bn(e,t){xe.call(this,new Uint32Array(e),t)}Bn.prototype=Object.create(xe.prototype);Bn.prototype.constructor=Bn;function Z(e,t){xe.call(this,new Float32Array(e),t)}Z.prototype=Object.create(xe.prototype);Z.prototype.constructor=Z;function Xi(e,t){xe.call(this,new Float64Array(e),t)}Xi.prototype=Object.create(xe.prototype);Xi.prototype.constructor=Xi;function Go(){this.indices=[],this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}Object.assign(Go.prototype,{computeGroups:function(e){for(var t,n=[],r=void 0,i=e.faces,a=0;a<i.length;a++){var o=i[a];o.materialIndex!==r&&(r=o.materialIndex,t!==void 0&&(t.count=a*3-t.start,n.push(t)),t={start:a*3,materialIndex:r})}t!==void 0&&(t.count=a*3-t.start,n.push(t)),this.groups=n},fromGeometry:function(e){var t=e.faces,n=e.vertices,r=e.faceVertexUvs,i=r[0]&&r[0].length>0,a=r[1]&&r[1].length>0,o=e.morphTargets,s=o.length,c;if(s>0){c=[];for(var h=0;h<s;h++)c[h]=[];this.morphTargets.position=c}var u=e.morphNormals,l=u.length,f;if(l>0){f=[];for(var h=0;h<l;h++)f[h]=[];this.morphTargets.normal=f}for(var d=e.skinIndices,p=e.skinWeights,y=d.length===n.length,x=p.length===n.length,h=0;h<t.length;h++){var m=t[h];this.vertices.push(n[m.a],n[m.b],n[m.c]);var v=m.vertexNormals;if(v.length===3)this.normals.push(v[0],v[1],v[2]);else{var g=m.normal;this.normals.push(g,g,g)}var _=m.vertexColors;if(_.length===3)this.colors.push(_[0],_[1],_[2]);else{var M=m.color;this.colors.push(M,M,M)}if(i===!0){var w=r[0][h];w!==void 0?this.uvs.push(w[0],w[1],w[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",h),this.uvs.push(new q,new q,new q))}if(a===!0){var w=r[1][h];w!==void 0?this.uvs2.push(w[0],w[1],w[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",h),this.uvs2.push(new q,new q,new q))}for(var A=0;A<s;A++){var P=o[A].vertices;c[A].push(P[m.a],P[m.b],P[m.c])}for(var A=0;A<l;A++){var S=u[A].vertexNormals[h];f[A].push(S.a,S.b,S.c)}y&&this.skinIndices.push(d[m.a],d[m.b],d[m.c]),x&&this.skinWeights.push(p[m.a],p[m.b],p[m.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}});function ji(e){if(e.length===0)return-1/0;for(var t=e[0],n=1,r=e.length;n<r;++n)e[n]>t&&(t=e[n]);return t}function te(){Object.defineProperty(this,"id",{value:zo()}),this.uuid=me.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0}}te.MaxIndex=65535;Object.assign(te.prototype,Lt.prototype,{isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){Array.isArray(e)?this.index=new(ji(e)>65535?Bn:Nn)(e,1):this.index=e},addAttribute:function(e,t){if(!(t&&t.isBufferAttribute)&&!(t&&t.isInterleavedBufferAttribute)){console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(e,new xe(arguments[1],arguments[2]));return}if(e==="index"){console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t);return}return this.attributes[e]=t,this},getAttribute:function(e){return this.attributes[e]},removeAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,n){this.groups.push({start:e,count:t,materialIndex:n!==void 0?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;t!==void 0&&(e.applyToBufferAttribute(t),t.needsUpdate=!0);var n=this.attributes.normal;if(n!==void 0){var r=new _t().getNormalMatrix(e);r.applyToBufferAttribute(n),n.needsUpdate=!0}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this},rotateX:function(){var e=new ue;return function(n){return e.makeRotationX(n),this.applyMatrix(e),this}}(),rotateY:function(){var e=new ue;return function(n){return e.makeRotationY(n),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new ue;return function(n){return e.makeRotationZ(n),this.applyMatrix(e),this}}(),translate:function(){var e=new ue;return function(n,r,i){return e.makeTranslation(n,r,i),this.applyMatrix(e),this}}(),scale:function(){var e=new ue;return function(n,r,i){return e.makeScale(n,r,i),this.applyMatrix(e),this}}(),lookAt:function(){var e=new J;return function(n){e.lookAt(n),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),center:function(){this.computeBoundingBox();var e=this.boundingBox.getCenter().negate();return this.translate(e.x,e.y,e.z),e},setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){var n=new Z(t.vertices.length*3,3),r=new Z(t.colors.length*3,3);if(this.addAttribute("position",n.copyVector3sArray(t.vertices)),this.addAttribute("color",r.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){var i=new Z(t.lineDistances.length,1);this.addAttribute("lineDistance",i.copyArray(t.lineDistances))}t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},updateFromObject:function(e){var t=e.geometry;if(e.isMesh){var n=t.__directGeometry;if(t.elementsNeedUpdate===!0&&(n=void 0,t.elementsNeedUpdate=!1),n===void 0)return this.fromGeometry(t);n.verticesNeedUpdate=t.verticesNeedUpdate,n.normalsNeedUpdate=t.normalsNeedUpdate,n.colorsNeedUpdate=t.colorsNeedUpdate,n.uvsNeedUpdate=t.uvsNeedUpdate,n.groupsNeedUpdate=t.groupsNeedUpdate,t.verticesNeedUpdate=!1,t.normalsNeedUpdate=!1,t.colorsNeedUpdate=!1,t.uvsNeedUpdate=!1,t.groupsNeedUpdate=!1,t=n}var r;return t.verticesNeedUpdate===!0&&(r=this.attributes.position,r!==void 0&&(r.copyVector3sArray(t.vertices),r.needsUpdate=!0),t.verticesNeedUpdate=!1),t.normalsNeedUpdate===!0&&(r=this.attributes.normal,r!==void 0&&(r.copyVector3sArray(t.normals),r.needsUpdate=!0),t.normalsNeedUpdate=!1),t.colorsNeedUpdate===!0&&(r=this.attributes.color,r!==void 0&&(r.copyColorsArray(t.colors),r.needsUpdate=!0),t.colorsNeedUpdate=!1),t.uvsNeedUpdate&&(r=this.attributes.uv,r!==void 0&&(r.copyVector2sArray(t.uvs),r.needsUpdate=!0),t.uvsNeedUpdate=!1),t.lineDistancesNeedUpdate&&(r=this.attributes.lineDistance,r!==void 0&&(r.copyArray(t.lineDistances),r.needsUpdate=!0),t.lineDistancesNeedUpdate=!1),t.groupsNeedUpdate&&(t.computeGroups(e.geometry),this.groups=t.groups,t.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=new Go().fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(e.vertices.length*3);if(this.addAttribute("position",new xe(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){var n=new Float32Array(e.normals.length*3);this.addAttribute("normal",new xe(n,3).copyVector3sArray(e.normals))}if(e.colors.length>0){var r=new Float32Array(e.colors.length*3);this.addAttribute("color",new xe(r,3).copyColorsArray(e.colors))}if(e.uvs.length>0){var i=new Float32Array(e.uvs.length*2);this.addAttribute("uv",new xe(i,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){var a=new Float32Array(e.uvs2.length*2);this.addAttribute("uv2",new xe(a,2).copyVector2sArray(e.uvs2))}if(e.indices.length>0){var o=ji(e.indices)>65535?Uint32Array:Uint16Array,s=new o(e.indices.length*3);this.setIndex(new xe(s,1).copyIndicesArray(e.indices))}this.groups=e.groups;for(var c in e.morphTargets){for(var h=[],u=e.morphTargets[c],l=0,f=u.length;l<f;l++){var d=u[l],p=new Z(d.length*3,3);h.push(p.copyVector3sArray(d))}this.morphAttributes[c]=h}if(e.skinIndices.length>0){var y=new Z(e.skinIndices.length*4,4);this.addAttribute("skinIndex",y.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var x=new Z(e.skinWeights.length*4,4);this.addAttribute("skinWeight",x.copyVector4sArray(e.skinWeights))}return e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new Ft);var e=this.attributes.position;e!==void 0?this.boundingBox.setFromBufferAttribute(e):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var e=new Ft,t=new T;return function(){this.boundingSphere===null&&(this.boundingSphere=new gt);var r=this.attributes.position;if(r){var i=this.boundingSphere.center;e.setFromBufferAttribute(r),e.getCenter(i);for(var a=0,o=0,s=r.count;o<s;o++)t.x=r.getX(o),t.y=r.getY(o),t.z=r.getZ(o),a=Math.max(a,i.distanceToSquared(t));this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes,n=this.groups;if(t.position){var r=t.position.array;if(t.normal===void 0)this.addAttribute("normal",new xe(new Float32Array(r.length),3));else for(var i=t.normal.array,a=0,o=i.length;a<o;a++)i[a]=0;var s=t.normal.array,c,h,u,l=new T,f=new T,d=new T,p=new T,y=new T;if(e){var x=e.array;n.length===0&&this.addGroup(0,x.length);for(var m=0,v=n.length;m<v;++m)for(var g=n[m],_=g.start,M=g.count,a=_,o=_+M;a<o;a+=3)c=x[a+0]*3,h=x[a+1]*3,u=x[a+2]*3,l.fromArray(r,c),f.fromArray(r,h),d.fromArray(r,u),p.subVectors(d,f),y.subVectors(l,f),p.cross(y),s[c]+=p.x,s[c+1]+=p.y,s[c+2]+=p.z,s[h]+=p.x,s[h+1]+=p.y,s[h+2]+=p.z,s[u]+=p.x,s[u+1]+=p.y,s[u+2]+=p.z}else for(var a=0,o=r.length;a<o;a+=9)l.fromArray(r,a),f.fromArray(r,a+3),d.fromArray(r,a+6),p.subVectors(d,f),y.subVectors(l,f),p.cross(y),s[a]=p.x,s[a+1]=p.y,s[a+2]=p.z,s[a+3]=p.x,s[a+4]=p.y,s[a+5]=p.z,s[a+6]=p.x,s[a+7]=p.y,s[a+8]=p.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(e,t){if(!(e&&e.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);return}t===void 0&&(t=0);var n=this.attributes;for(var r in n)if(e.attributes[r]!==void 0)for(var i=n[r],a=i.array,o=e.attributes[r],s=o.array,c=o.itemSize,h=0,u=c*t;h<s.length;h++,u++)a[u]=s[h];return this},normalizeNormals:function(){var e=new T;return function(){for(var n=this.attributes.normal,r=0,i=n.count;r<i;r++)e.x=n.getX(r),e.y=n.getY(r),e.z=n.getZ(r),e.normalize(),n.setXYZ(r,e.x,e.y,e.z)}}(),toNonIndexed:function(){if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e=new te,t=this.index.array,n=this.attributes;for(var r in n){for(var i=n[r],a=i.array,o=i.itemSize,s=new a.constructor(t.length*o),c=0,h=0,u=0,l=t.length;u<l;u++){c=t[u]*o;for(var f=0;f<o;f++)s[h++]=a[c++]}e.addAttribute(r,new xe(s,o))}return e},toJSON:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),this.parameters!==void 0){var t=this.parameters;for(var n in t)t[n]!==void 0&&(e[n]=t[n]);return e}e.data={attributes:{}};var r=this.index;if(r!==null){var i=Array.prototype.slice.call(r.array);e.data.index={type:r.array.constructor.name,array:i}}var a=this.attributes;for(var n in a){var o=a[n],i=Array.prototype.slice.call(o.array);e.data.attributes[n]={itemSize:o.itemSize,type:o.array.constructor.name,array:i,normalized:o.normalized}}var s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));var c=this.boundingSphere;return c!==null&&(e.data.boundingSphere={center:c.center.toArray(),radius:c.radius}),e},clone:function(){return new te().copy(this)},copy:function(e){var t,n,r;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var i=e.index;i!==null&&this.setIndex(i.clone());var a=e.attributes;for(t in a){var o=a[t];this.addAttribute(t,o.clone())}var s=e.morphAttributes;for(t in s){var c=[],h=s[t];for(n=0,r=h.length;n<r;n++)c.push(h[n].clone());this.morphAttributes[t]=c}var u=e.groups;for(n=0,r=u.length;n<r;n++){var l=u[n];this.addGroup(l.start,l.count,l.materialIndex)}var f=e.boundingBox;f!==null&&(this.boundingBox=f.clone());var d=e.boundingSphere;return d!==null&&(this.boundingSphere=d.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function Fr(e,t,n,r,i,a){le.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:a},this.fromBufferGeometry(new sn(e,t,n,r,i,a)),this.mergeVertices()}Fr.prototype=Object.create(le.prototype);Fr.prototype.constructor=Fr;function sn(e,t,n,r,i,a){te.call(this),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:a};var o=this;r=Math.floor(r)||1,i=Math.floor(i)||1,a=Math.floor(a)||1;var s=[],c=[],h=[],u=[],l=0,f=0;d("z","y","x",-1,-1,n,t,e,a,i,0),d("z","y","x",1,-1,n,t,-e,a,i,1),d("x","z","y",1,1,e,n,t,r,a,2),d("x","z","y",1,-1,e,n,-t,r,a,3),d("x","y","z",1,-1,e,t,n,r,i,4),d("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(s),this.addAttribute("position",new Z(c,3)),this.addAttribute("normal",new Z(h,3)),this.addAttribute("uv",new Z(u,2));function d(p,y,x,m,v,g,_,M,w,A,P){var S=g/w,C=_/A,D=g/2,H=_/2,L=M/2,E=w+1,B=A+1,I=0,N=0,z,V,W=new T;for(V=0;V<B;V++){var X=V*C-H;for(z=0;z<E;z++){var Y=z*S-D;W[p]=Y*m,W[y]=X*v,W[x]=L,c.push(W.x,W.y,W.z),W[p]=0,W[y]=0,W[x]=M>0?1:-1,h.push(W.x,W.y,W.z),u.push(z/w),u.push(1-V/A),I+=1}}for(V=0;V<A;V++)for(z=0;z<w;z++){var j=l+z+E*V,re=l+z+E*(V+1),O=l+(z+1)+E*(V+1),ae=l+(z+1)+E*V;s.push(j,re,ae),s.push(re,O,ae),N+=6}o.addGroup(f,N,P),f+=N,l+=I}}sn.prototype=Object.create(te.prototype);sn.prototype.constructor=sn;function Or(e,t,n,r){le.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r},this.fromBufferGeometry(new cn(e,t,n,r)),this.mergeVertices()}Or.prototype=Object.create(le.prototype);Or.prototype.constructor=Or;function cn(e,t,n,r){te.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};var i=e/2,a=t/2,o=Math.floor(n)||1,s=Math.floor(r)||1,c=o+1,h=s+1,u=e/o,l=t/s,f,d,p=[],y=[],x=[],m=[];for(d=0;d<h;d++){var v=d*l-a;for(f=0;f<c;f++){var g=f*u-i;y.push(g,-v,0),x.push(0,0,1),m.push(f/o),m.push(1-d/s)}}for(d=0;d<s;d++)for(f=0;f<o;f++){var _=f+c*d,M=f+c*(d+1),w=f+1+c*(d+1),A=f+1+c*d;p.push(_,M,A),p.push(M,w,A)}this.setIndex(p),this.addAttribute("position",new Z(y,3)),this.addAttribute("normal",new Z(x,3)),this.addAttribute("uv",new Z(m,2))}cn.prototype=Object.create(te.prototype);cn.prototype.constructor=cn;function nt(e){ge.call(this),this.type="MeshBasicMaterial",this.color=new ie(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=_i,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(e)}nt.prototype=Object.create(ge.prototype);nt.prototype.constructor=nt;nt.prototype.isMeshBasicMaterial=!0;nt.prototype.copy=function(e){return ge.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this};function wn(e,t){this.origin=e!==void 0?e:new T,this.direction=t!==void 0?t:new T}Object.assign(wn.prototype,{set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){var n=t||new T;return n.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(){var e=new T;return function(n){return this.origin.copy(this.at(n,e)),this}}(),closestPointToPoint:function(e,t){var n=t||new T;n.subVectors(e,this.origin);var r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.direction).multiplyScalar(r).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(){var e=new T;return function(n){var r=e.subVectors(n,this.origin).dot(this.direction);return r<0?this.origin.distanceToSquared(n):(e.copy(this.direction).multiplyScalar(r).add(this.origin),e.distanceToSquared(n))}}(),distanceSqToSegment:function(){var e=new T,t=new T,n=new T;return function(i,a,o,s){e.copy(i).add(a).multiplyScalar(.5),t.copy(a).sub(i).normalize(),n.copy(this.origin).sub(e);var c=i.distanceTo(a)*.5,h=-this.direction.dot(t),u=n.dot(this.direction),l=-n.dot(t),f=n.lengthSq(),d=Math.abs(1-h*h),p,y,x,m;if(d>0)if(p=h*l-u,y=h*u-l,m=c*d,p>=0)if(y>=-m)if(y<=m){var v=1/d;p*=v,y*=v,x=p*(p+h*y+2*u)+y*(h*p+y+2*l)+f}else y=c,p=Math.max(0,-(h*y+u)),x=-p*p+y*(y+2*l)+f;else y=-c,p=Math.max(0,-(h*y+u)),x=-p*p+y*(y+2*l)+f;else y<=-m?(p=Math.max(0,-(-h*c+u)),y=p>0?-c:Math.min(Math.max(-c,-l),c),x=-p*p+y*(y+2*l)+f):y<=m?(p=0,y=Math.min(Math.max(-c,-l),c),x=y*(y+2*l)+f):(p=Math.max(0,-(h*c+u)),y=p>0?c:Math.min(Math.max(-c,-l),c),x=-p*p+y*(y+2*l)+f);else y=h>0?-c:c,p=Math.max(0,-(h*y+u)),x=-p*p+y*(y+2*l)+f;return o&&o.copy(this.direction).multiplyScalar(p).add(this.origin),s&&s.copy(t).multiplyScalar(y).add(e),x}}(),intersectSphere:function(){var e=new T;return function(n,r){e.subVectors(n.center,this.origin);var i=e.dot(this.direction),a=e.dot(e)-i*i,o=n.radius*n.radius;if(a>o)return null;var s=Math.sqrt(o-a),c=i-s,h=i+s;return c<0&&h<0?null:c<0?this.at(h,r):this.at(c,r)}}(),intersectsSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null},intersectPlane:function(e,t){var n=this.distanceToPlane(e);return n===null?null:this.at(n,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);if(t===0)return!0;var n=e.normal.dot(this.direction);return n*t<0},intersectBox:function(e,t){var n,r,i,a,o,s,c=1/this.direction.x,h=1/this.direction.y,u=1/this.direction.z,l=this.origin;return c>=0?(n=(e.min.x-l.x)*c,r=(e.max.x-l.x)*c):(n=(e.max.x-l.x)*c,r=(e.min.x-l.x)*c),h>=0?(i=(e.min.y-l.y)*h,a=(e.max.y-l.y)*h):(i=(e.max.y-l.y)*h,a=(e.min.y-l.y)*h),n>a||i>r||((i>n||n!==n)&&(n=i),(a<r||r!==r)&&(r=a),u>=0?(o=(e.min.z-l.z)*u,s=(e.max.z-l.z)*u):(o=(e.max.z-l.z)*u,s=(e.min.z-l.z)*u),n>s||o>r)||((o>n||n!==n)&&(n=o),(s<r||r!==r)&&(r=s),r<0)?null:this.at(n>=0?n:r,t)},intersectsBox:function(){var e=new T;return function(n){return this.intersectBox(n,e)!==null}}(),intersectTriangle:function(){var e=new T,t=new T,n=new T,r=new T;return function(a,o,s,c,h){t.subVectors(o,a),n.subVectors(s,a),r.crossVectors(t,n);var u=this.direction.dot(r),l;if(u>0){if(c)return null;l=1}else if(u<0)l=-1,u=-u;else return null;e.subVectors(this.origin,a);var f=l*this.direction.dot(n.crossVectors(e,n));if(f<0)return null;var d=l*this.direction.dot(t.cross(e));if(d<0||f+d>u)return null;var p=-l*e.dot(r);return p<0?null:this.at(p/u,h)}}(),applyMatrix4:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}});function Pn(e,t){this.start=e!==void 0?e:new T,this.end=t!==void 0?t:new T}Object.assign(Pn.prototype,{set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){var t=e||new T;return t.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){var t=e||new T;return t.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){var n=t||new T;return this.delta(n).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(){var e=new T,t=new T;return function(r,i){e.subVectors(r,this.start),t.subVectors(this.end,this.start);var a=t.dot(t),o=t.dot(e),s=o/a;return i&&(s=me.clamp(s,0,1)),s}}(),closestPointToPoint:function(e,t,n){var r=this.closestPointToPointParameter(e,t),i=n||new T;return this.delta(i).multiplyScalar(r).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}});function It(e,t,n){this.a=e!==void 0?e:new T,this.b=t!==void 0?t:new T,this.c=n!==void 0?n:new T}Object.assign(It,{normal:function(){var e=new T;return function(n,r,i,a){var o=a||new T;o.subVectors(i,r),e.subVectors(n,r),o.cross(e);var s=o.lengthSq();return s>0?o.multiplyScalar(1/Math.sqrt(s)):o.set(0,0,0)}}(),barycoordFromPoint:function(){var e=new T,t=new T,n=new T;return function(i,a,o,s,c){e.subVectors(s,a),t.subVectors(o,a),n.subVectors(i,a);var h=e.dot(e),u=e.dot(t),l=e.dot(n),f=t.dot(t),d=t.dot(n),p=h*f-u*u,y=c||new T;if(p===0)return y.set(-2,-1,-1);var x=1/p,m=(f*l-u*d)*x,v=(h*d-u*l)*x;return y.set(1-m-v,v,m)}}(),containsPoint:function(){var e=new T;return function(n,r,i,a){var o=It.barycoordFromPoint(n,r,i,a,e);return o.x>=0&&o.y>=0&&o.x+o.y<=1}}()});Object.assign(It.prototype,{set:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this},setFromPointsAndIndices:function(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},area:function(){var e=new T,t=new T;return function(){return e.subVectors(this.c,this.b),t.subVectors(this.a,this.b),e.cross(t).length()*.5}}(),midpoint:function(e){var t=e||new T;return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(e){return It.normal(this.a,this.b,this.c,e)},plane:function(e){var t=e||new dt;return t.setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(e,t){return It.barycoordFromPoint(e,this.a,this.b,this.c,t)},containsPoint:function(e){return It.containsPoint(e,this.a,this.b,this.c)},closestPointToPoint:function(){var e=new dt,t=[new Pn,new Pn,new Pn],n=new T,r=new T;return function(a,o){var s=o||new T,c=1/0;if(e.setFromCoplanarPoints(this.a,this.b,this.c),e.projectPoint(a,n),this.containsPoint(n)===!0)s.copy(n);else{t[0].set(this.a,this.b),t[1].set(this.b,this.c),t[2].set(this.c,this.a);for(var h=0;h<t.length;h++){t[h].closestPointToPoint(n,!0,r);var u=n.distanceToSquared(r);u<c&&(c=u,s.copy(r))}}return s}}(),equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}});function Ke(e,t){J.call(this),this.type="Mesh",this.geometry=e!==void 0?e:new te,this.material=t!==void 0?t:new nt({color:Math.random()*16777215}),this.drawMode=Ao,this.updateMorphTargets()}Ke.prototype=Object.assign(Object.create(J.prototype),{constructor:Ke,isMesh:!0,setDrawMode:function(e){this.drawMode=e},copy:function(e){return J.prototype.copy.call(this,e),this.drawMode=e.drawMode,this},updateMorphTargets:function(){var e=this.geometry,t,n,r;if(e.isBufferGeometry){var i=e.morphAttributes,a=Object.keys(i);if(a.length>0){var o=i[a[0]];if(o!==void 0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,n=o.length;t<n;t++)r=o[t].name||String(t),this.morphTargetInfluences.push(0),this.morphTargetDictionary[r]=t}}else{var s=e.morphTargets;if(s!==void 0&&s.length>0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,n=s.length;t<n;t++)r=s[t].name||String(t),this.morphTargetInfluences.push(0),this.morphTargetDictionary[r]=t}},raycast:function(){var e=new ue,t=new wn,n=new gt,r=new T,i=new T,a=new T,o=new T,s=new T,c=new T,h=new q,u=new q,l=new q,f=new T,d=new T,p=new T;function y(v,g,_,M,w,A,P){return It.barycoordFromPoint(v,g,_,M,f),w.multiplyScalar(f.x),A.multiplyScalar(f.y),P.multiplyScalar(f.z),w.add(A).add(P),w.clone()}function x(v,g,_,M,w,A,P,S){var C;if(g.side===Ht?C=M.intersectTriangle(P,A,w,!0,S):C=M.intersectTriangle(w,A,P,g.side!==gr,S),C===null)return null;p.copy(S),p.applyMatrix4(v.matrixWorld);var D=_.ray.origin.distanceTo(p);return D<_.near||D>_.far?null:{distance:D,point:p.clone(),object:v}}function m(v,g,_,M,w,A,P,S){r.fromBufferAttribute(M,A),i.fromBufferAttribute(M,P),a.fromBufferAttribute(M,S);var C=x(v,v.material,g,_,r,i,a,d);return C&&(w&&(h.fromBufferAttribute(w,A),u.fromBufferAttribute(w,P),l.fromBufferAttribute(w,S),C.uv=y(d,r,i,a,h,u,l)),C.face=new Gt(A,P,S,It.normal(r,i,a)),C.faceIndex=A),C}return function(g,_){var M=this.geometry,w=this.material,A=this.matrixWorld;if(w!==void 0&&(M.boundingSphere===null&&M.computeBoundingSphere(),n.copy(M.boundingSphere),n.applyMatrix4(A),g.ray.intersectsSphere(n)!==!1&&(e.getInverse(A),t.copy(g.ray).applyMatrix4(e),!(M.boundingBox!==null&&t.intersectsBox(M.boundingBox)===!1)))){var P;if(M.isBufferGeometry){var S,C,D,H=M.index,L=M.attributes.position,E=M.attributes.uv,B,I;if(H!==null)for(B=0,I=H.count;B<I;B+=3)S=H.getX(B),C=H.getX(B+1),D=H.getX(B+2),P=m(this,g,t,L,E,S,C,D),P&&(P.faceIndex=Math.floor(B/3),_.push(P));else for(B=0,I=L.count;B<I;B+=3)S=B,C=B+1,D=B+2,P=m(this,g,t,L,E,S,C,D),P&&(P.index=S,_.push(P))}else if(M.isGeometry){var N,z,V,W=Array.isArray(w),X=M.vertices,Y=M.faces,j,re=M.faceVertexUvs[0];re.length>0&&(j=re);for(var O=0,ae=Y.length;O<ae;O++){var G=Y[O],fe=W?w[G.materialIndex]:w;if(fe!==void 0){if(N=X[G.a],z=X[G.b],V=X[G.c],fe.morphTargets===!0){var K=M.morphTargets,pe=this.morphTargetInfluences;r.set(0,0,0),i.set(0,0,0),a.set(0,0,0);for(var Te=0,Ie=K.length;Te<Ie;Te++){var Oe=pe[Te];if(Oe!==0){var He=K[Te].vertices;r.addScaledVector(o.subVectors(He[G.a],N),Oe),i.addScaledVector(s.subVectors(He[G.b],z),Oe),a.addScaledVector(c.subVectors(He[G.c],V),Oe)}}r.add(N),i.add(z),a.add(V),N=r,z=i,V=a}if(P=x(this,fe,g,t,N,z,V,d),P){if(j&&j[O]){var Se=j[O];h.copy(Se[0]),u.copy(Se[1]),l.copy(Se[2]),P.uv=y(d,N,z,V,h,u,l)}P.face=G,P.faceIndex=O,_.push(P)}}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function ju(e,t,n,r){var i=new ie(0),a=0,o,s,c;function h(l,f,d,p){var y=f.background;y===null?u(i,a):y&&y.isColor&&(u(y,1),p=!0),(e.autoClear||p)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),y&&y.isCubeTexture?(c===void 0&&(c=new Ke(new sn(1,1,1),new yt({uniforms:tn.cube.uniforms,vertexShader:tn.cube.vertexShader,fragmentShader:tn.cube.fragmentShader,side:Ht,depthTest:!0,depthWrite:!1,polygonOffset:!0,fog:!1})),c.geometry.removeAttribute("normal"),c.geometry.removeAttribute("uv"),c.onBeforeRender=function(x,m,v){var g=v.far;this.matrixWorld.makeScale(g,g,g),this.matrixWorld.copyPosition(v.matrixWorld),this.material.polygonOffsetUnits=g*10},n.update(c.geometry)),c.material.uniforms.tCube.value=y,l.push(c,c.geometry,c.material,0,null)):y&&y.isTexture&&(o===void 0&&(o=new Dt(-1,1,1,-1,0,1),s=new Ke(new cn(2,2),new nt({depthTest:!1,depthWrite:!1,fog:!1})),n.update(s.geometry)),s.material.map=y,e.renderBufferDirect(o,null,s.geometry,s.material,s,null))}function u(l,f){t.buffers.color.setClear(l.r,l.g,l.b,f,r)}return{getClearColor:function(){return i},setClearColor:function(l,f){i.set(l),a=f!==void 0?f:1,u(i,a)},getClearAlpha:function(){return a},setClearAlpha:function(l){a=l,u(i,a)},render:h}}function Yu(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program&&t.program&&e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function qu(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Zu(){var e=[],t=0,n=[],r=[];function i(){t=0,n.length=0,r.length=0}function a(s,c,h,u,l){var f=e[t];f===void 0?(f={id:s.id,object:s,geometry:c,material:h,program:h.program,renderOrder:s.renderOrder,z:u,group:l},e[t]=f):(f.id=s.id,f.object=s,f.geometry=c,f.material=h,f.program=h.program,f.renderOrder=s.renderOrder,f.z=u,f.group=l),(h.transparent===!0?r:n).push(f),t++}function o(){n.length>1&&n.sort(Yu),r.length>1&&r.sort(qu)}return{opaque:n,transparent:r,init:i,push:a,sort:o}}function Ju(){var e={};function t(r,i){var a=r.id+","+i.id,o=e[a];return o===void 0&&(o=new Zu,e[a]=o),o}function n(){e={}}return{get:t,dispose:n}}function Qu(e,t){return Math.abs(t[1])-Math.abs(e[1])}function Ku(e){var t={},n=new Float32Array(8);function r(i,a,o,s){var c=i.morphTargetInfluences,h=c.length,u=t[a.id];if(u===void 0){u=[];for(var l=0;l<h;l++)u[l]=[l,0];t[a.id]=u}for(var f=o.morphTargets&&a.morphAttributes.position,d=o.morphNormals&&a.morphAttributes.normal,l=0;l<h;l++){var p=u[l];p[1]!==0&&(f&&a.removeAttribute("morphTarget"+l),d&&a.removeAttribute("morphNormal"+l))}for(var l=0;l<h;l++){var p=u[l];p[0]=l,p[1]=c[l]}u.sort(Qu);for(var l=0;l<8;l++){var p=u[l];if(p){var y=p[0],x=p[1];if(x){f&&a.addAttribute("morphTarget"+l,f[y]),d&&a.addAttribute("morphNormal"+l,d[y]),n[l]=x;continue}}n[l]=0}s.getUniforms().setValue(e,"morphTargetInfluences",n)}return{update:r}}function $u(e,t,n){var r;function i(u){r=u}var a,o;function s(u){a=u.type,o=u.bytesPerElement}function c(u,l){e.drawElements(r,l,a,u*o),n.calls++,n.vertices+=l,r===e.TRIANGLES?n.faces+=l/3:r===e.POINTS&&(n.points+=l)}function h(u,l,f){var d=t.get("ANGLE_instanced_arrays");if(d===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}d.drawElementsInstancedANGLE(r,f,a,l*o,u.maxInstancedCount),n.calls++,n.vertices+=f*u.maxInstancedCount,r===e.TRIANGLES?n.faces+=u.maxInstancedCount*f/3:r===e.POINTS&&(n.points+=u.maxInstancedCount*f)}this.setMode=i,this.setIndex=s,this.render=c,this.renderInstances=h}function el(e,t,n){var r;function i(s){r=s}function a(s,c){e.drawArrays(r,s,c),n.calls++,n.vertices+=c,r===e.TRIANGLES?n.faces+=c/3:r===e.POINTS&&(n.points+=c)}function o(s,c,h){var u=t.get("ANGLE_instanced_arrays");if(u===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}var l=s.attributes.position;l.isInterleavedBufferAttribute?(h=l.data.count,u.drawArraysInstancedANGLE(r,0,h,s.maxInstancedCount)):u.drawArraysInstancedANGLE(r,c,h,s.maxInstancedCount),n.calls++,n.vertices+=h*s.maxInstancedCount,r===e.TRIANGLES?n.faces+=s.maxInstancedCount*h/3:r===e.POINTS&&(n.points+=s.maxInstancedCount*h)}this.setMode=i,this.render=a,this.renderInstances=o}function tl(e,t,n){var r={},i={};function a(h){var u=h.target,l=r[u.id];l.index!==null&&t.remove(l.index);for(var f in l.attributes)t.remove(l.attributes[f]);u.removeEventListener("dispose",a),delete r[u.id];var d=i[u.id];d&&(t.remove(d),delete i[u.id]),d=i[l.id],d&&(t.remove(d),delete i[l.id]),n.geometries--}function o(h,u){var l=r[u.id];return l||(u.addEventListener("dispose",a),u.isBufferGeometry?l=u:u.isGeometry&&(u._bufferGeometry===void 0&&(u._bufferGeometry=new te().setFromObject(h)),l=u._bufferGeometry),r[u.id]=l,n.geometries++,l)}function s(h){var u=h.index,l=h.attributes;u!==null&&t.update(u,e.ELEMENT_ARRAY_BUFFER);for(var f in l)t.update(l[f],e.ARRAY_BUFFER);var d=h.morphAttributes;for(var f in d)for(var p=d[f],y=0,x=p.length;y<x;y++)t.update(p[y],e.ARRAY_BUFFER)}function c(h){var u=i[h.id];if(u)return u;var l=[],f=h.index,d=h.attributes;if(f!==null)for(var p=f.array,y=0,x=p.length;y<x;y+=3){var m=p[y+0],v=p[y+1],g=p[y+2];l.push(m,v,v,g,g,m)}else for(var p=d.position.array,y=0,x=p.length/3-1;y<x;y+=3){var m=y+0,v=y+1,g=y+2;l.push(m,v,v,g,g,m)}return u=new(ji(l)>65535?Bn:Nn)(l,1),t.update(u,e.ELEMENT_ARRAY_BUFFER),i[h.id]=u,u}return{get:o,update:s,getWireframeAttribute:c}}function nl(){var e={};return{get:function(t){if(e[t.id]!==void 0)return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new T,color:new ie,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new q};break;case"SpotLight":n={position:new T,direction:new T,color:new ie,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new q};break;case"PointLight":n={position:new T,color:new ie,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new q,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":n={direction:new T,skyColor:new ie,groundColor:new ie};break;case"RectAreaLight":n={color:new ie,position:new T,halfWidth:new T,halfHeight:new T};break}return e[t.id]=n,n}}}function rl(){var e=new nl,t={hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},n=new T,r=new ue,i=new ue;function a(o,s,c){for(var h=0,u=0,l=0,f=0,d=0,p=0,y=0,x=0,m=c.matrixWorldInverse,v=0,g=o.length;v<g;v++){var _=o[v],M=_.color,w=_.intensity,A=_.distance,P=_.shadow&&_.shadow.map?_.shadow.map.texture:null;if(_.isAmbientLight)h+=M.r*w,u+=M.g*w,l+=M.b*w;else if(_.isDirectionalLight){var S=e.get(_);if(S.color.copy(_.color).multiplyScalar(_.intensity),S.direction.setFromMatrixPosition(_.matrixWorld),n.setFromMatrixPosition(_.target.matrixWorld),S.direction.sub(n),S.direction.transformDirection(m),S.shadow=_.castShadow,_.castShadow){var C=_.shadow;S.shadowBias=C.bias,S.shadowRadius=C.radius,S.shadowMapSize=C.mapSize}t.directionalShadowMap[f]=P,t.directionalShadowMatrix[f]=_.shadow.matrix,t.directional[f]=S,f++}else if(_.isSpotLight){var S=e.get(_);if(S.position.setFromMatrixPosition(_.matrixWorld),S.position.applyMatrix4(m),S.color.copy(M).multiplyScalar(w),S.distance=A,S.direction.setFromMatrixPosition(_.matrixWorld),n.setFromMatrixPosition(_.target.matrixWorld),S.direction.sub(n),S.direction.transformDirection(m),S.coneCos=Math.cos(_.angle),S.penumbraCos=Math.cos(_.angle*(1-_.penumbra)),S.decay=_.distance===0?0:_.decay,S.shadow=_.castShadow,_.castShadow){var C=_.shadow;S.shadowBias=C.bias,S.shadowRadius=C.radius,S.shadowMapSize=C.mapSize}t.spotShadowMap[p]=P,t.spotShadowMatrix[p]=_.shadow.matrix,t.spot[p]=S,p++}else if(_.isRectAreaLight){var S=e.get(_);S.color.copy(M).multiplyScalar(w/(_.width*_.height)),S.position.setFromMatrixPosition(_.matrixWorld),S.position.applyMatrix4(m),i.identity(),r.copy(_.matrixWorld),r.premultiply(m),i.extractRotation(r),S.halfWidth.set(_.width*.5,0,0),S.halfHeight.set(0,_.height*.5,0),S.halfWidth.applyMatrix4(i),S.halfHeight.applyMatrix4(i),t.rectArea[y]=S,y++}else if(_.isPointLight){var S=e.get(_);if(S.position.setFromMatrixPosition(_.matrixWorld),S.position.applyMatrix4(m),S.color.copy(_.color).multiplyScalar(_.intensity),S.distance=_.distance,S.decay=_.distance===0?0:_.decay,S.shadow=_.castShadow,_.castShadow){var C=_.shadow;S.shadowBias=C.bias,S.shadowRadius=C.radius,S.shadowMapSize=C.mapSize,S.shadowCameraNear=C.camera.near,S.shadowCameraFar=C.camera.far}t.pointShadowMap[d]=P,t.pointShadowMatrix[d]=_.shadow.matrix,t.point[d]=S,d++}else if(_.isHemisphereLight){var S=e.get(_);S.direction.setFromMatrixPosition(_.matrixWorld),S.direction.transformDirection(m),S.direction.normalize(),S.skyColor.copy(_.color).multiplyScalar(w),S.groundColor.copy(_.groundColor).multiplyScalar(w),t.hemi[x]=S,x++}}t.ambient[0]=h,t.ambient[1]=u,t.ambient[2]=l,t.directional.length=f,t.spot.length=p,t.rectArea.length=y,t.point.length=d,t.hemi.length=x,t.hash=f+","+d+","+p+","+y+","+x+","+s.length}return{setup:a,state:t}}function il(e,t){var n={};function r(a){var o=t.frame,s=a.geometry,c=e.get(a,s);return n[c.id]!==o&&(s.isGeometry&&c.updateFromObject(a),e.update(c),n[c.id]=o),c}function i(){n={}}return{update:r,clear:i}}function al(e){for(var t=e.split(`
`),n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join(`
`)}function Qa(e,t,n){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS)===!1&&console.error("THREE.WebGLShader: Shader couldn't compile."),e.getShaderInfoLog(r)!==""&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",t===e.VERTEX_SHADER?"vertex":"fragment",e.getShaderInfoLog(r),al(n)),r}var ol=0;function Ho(e){switch(e){case Dr:return["Linear","( value )"];case ac:return["sRGB","( value )"];case oc:return["RGBE","( value )"];case sc:return["RGBM","( value, 7.0 )"];case cc:return["RGBM","( value, 16.0 )"];case hc:return["RGBD","( value, 256.0 )"];case Lo:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+e)}}function Pi(e,t){var n=Ho(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function sl(e,t){var n=Ho(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function cl(e,t){var n;switch(t){case wo:n="Linear";break;case Hs:n="Reinhard";break;case Vs:n="Uncharted2";break;case ks:n="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+t)}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function hl(e,t,n){e=e||{};var r=[e.derivatives||t.envMapCubeUV||t.bumpMap||t.normalMap||t.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(e.fragDepth||t.logarithmicDepthBuffer)&&n.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",e.drawBuffers&&n.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(e.shaderTextureLOD||t.envMap)&&n.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""];return r.filter(Ln).join(`
`)}function ul(e){var t=[];for(var n in e){var r=e[n];r!==!1&&t.push("#define "+n+" "+r)}return t.join(`
`)}function ll(e,t,n){for(var r={},i=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),a=0;a<i;a++){var o=e.getActiveAttrib(t,a),s=o.name;r[s]=e.getAttribLocation(t,s)}return r}function Ln(e){return e!==""}function Ka(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights)}function Yi(e){var t=/^[ \t]*#include +<([\w\d.]+)>/gm;function n(r,i){var a=Pe[i];if(a===void 0)throw new Error("Can not resolve #include <"+i+">");return Yi(a)}return e.replace(t,n)}function $a(e){var t=/for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;function n(r,i,a,o){for(var s="",c=parseInt(i);c<parseInt(a);c++)s+=o.replace(/\[ i \]/g,"[ "+c+" ]");return s}return e.replace(t,n)}function fl(e,t,n,r,i,a){var o=e.context,s=r.defines,c=i.vertexShader,h=i.fragmentShader,u="SHADOWMAP_TYPE_BASIC";a.shadowMapType===fo?u="SHADOWMAP_TYPE_PCF":a.shadowMapType===gs&&(u="SHADOWMAP_TYPE_PCF_SOFT");var l="ENVMAP_TYPE_CUBE",f="ENVMAP_MODE_REFLECTION",d="ENVMAP_BLENDING_MULTIPLY";if(a.envMap){switch(r.envMap.mapping){case ba:case Bi:l="ENVMAP_TYPE_CUBE";break;case wa:case Ma:l="ENVMAP_TYPE_CUBE_UV";break;case Mo:case zi:l="ENVMAP_TYPE_EQUIREC";break;case Eo:l="ENVMAP_TYPE_SPHERE";break}switch(r.envMap.mapping){case Bi:case zi:f="ENVMAP_MODE_REFRACTION";break}switch(r.combine){case _i:d="ENVMAP_BLENDING_MULTIPLY";break;case zs:d="ENVMAP_BLENDING_MIX";break;case Gs:d="ENVMAP_BLENDING_ADD";break}}var p=e.gammaFactor>0?e.gammaFactor:1,y=hl(r.extensions,a,t),x=ul(s),m=o.createProgram(),v,g;r.isRawShaderMaterial?(v=[x,`
`].filter(Ln).join(`
`),g=[y,x,`
`].filter(Ln).join(`
`)):(v=["precision "+a.precision+" float;","precision "+a.precision+" int;","#define SHADER_NAME "+i.name,x,a.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+p,"#define MAX_BONES "+a.maxBones,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+f:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.displacementMap&&a.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.vertexColors?"#define USE_COLOR":"",a.flatShading?"#define FLAT_SHADED":"",a.skinning?"#define USE_SKINNING":"",a.useVertexTexture?"#define BONE_TEXTURE":"",a.morphTargets?"#define USE_MORPHTARGETS":"",a.morphNormals&&a.flatShading===!1?"#define USE_MORPHNORMALS":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+a.numClippingPlanes,a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+u:"",a.sizeAttenuation?"#define USE_SIZEATTENUATION":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&t.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","	attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Ln).join(`
`),g=[y,"precision "+a.precision+" float;","precision "+a.precision+" int;","#define SHADER_NAME "+i.name,x,a.alphaTest?"#define ALPHATEST "+a.alphaTest:"","#define GAMMA_FACTOR "+p,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+l:"",a.envMap?"#define "+f:"",a.envMap?"#define "+d:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.vertexColors?"#define USE_COLOR":"",a.gradientMap?"#define USE_GRADIENTMAP":"",a.flatShading?"#define FLAT_SHADED":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+a.numClippingPlanes,"#define UNION_CLIPPING_PLANES "+(a.numClippingPlanes-a.numClipIntersection),a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+u:"",a.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",a.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&t.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",a.envMap&&t.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",a.toneMapping!==Ai?"#define TONE_MAPPING":"",a.toneMapping!==Ai?Pe.tonemapping_pars_fragment:"",a.toneMapping!==Ai?cl("toneMapping",a.toneMapping):"",a.dithering?"#define DITHERING":"",a.outputEncoding||a.mapEncoding||a.envMapEncoding||a.emissiveMapEncoding?Pe.encodings_pars_fragment:"",a.mapEncoding?Pi("mapTexelToLinear",a.mapEncoding):"",a.envMapEncoding?Pi("envMapTexelToLinear",a.envMapEncoding):"",a.emissiveMapEncoding?Pi("emissiveMapTexelToLinear",a.emissiveMapEncoding):"",a.outputEncoding?sl("linearToOutputTexel",a.outputEncoding):"",a.depthPacking?"#define DEPTH_PACKING "+r.depthPacking:"",`
`].filter(Ln).join(`
`)),c=Yi(c),c=Ka(c,a),h=Yi(h),h=Ka(h,a),r.isShaderMaterial||(c=$a(c),h=$a(h));var _=v+c,M=g+h,w=Qa(o,o.VERTEX_SHADER,_),A=Qa(o,o.FRAGMENT_SHADER,M);o.attachShader(m,w),o.attachShader(m,A),r.index0AttributeName!==void 0?o.bindAttribLocation(m,0,r.index0AttributeName):a.morphTargets===!0&&o.bindAttribLocation(m,0,"position"),o.linkProgram(m);var P=o.getProgramInfoLog(m),S=o.getShaderInfoLog(w),C=o.getShaderInfoLog(A),D=!0,H=!0;o.getProgramParameter(m,o.LINK_STATUS)===!1?(D=!1,console.error("THREE.WebGLProgram: shader error: ",o.getError(),"gl.VALIDATE_STATUS",o.getProgramParameter(m,o.VALIDATE_STATUS),"gl.getProgramInfoLog",P,S,C)):P!==""?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",P):(S===""||C==="")&&(H=!1),H&&(this.diagnostics={runnable:D,material:r,programLog:P,vertexShader:{log:S,prefix:v},fragmentShader:{log:C,prefix:g}}),o.deleteShader(w),o.deleteShader(A);var L;this.getUniforms=function(){return L===void 0&&(L=new kt(o,m,e)),L};var E;return this.getAttributes=function(){return E===void 0&&(E=ll(o,m)),E},this.destroy=function(){o.deleteProgram(m),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.id=ol++,this.code=n,this.usedTimes=1,this.program=m,this.vertexShader=w,this.fragmentShader=A,this}function dl(e,t,n){var r=[],i={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow"},a=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];function o(c){var h=c.skeleton,u=h.bones;if(n.floatVertexTextures)return 1024;var l=n.maxVertexUniforms,f=Math.floor((l-20)/4),d=Math.min(f,u.length);return d<u.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+u.length+" bones. This GPU supports "+d+"."),0):d}function s(c,h){var u;return c?c.isTexture?u=c.encoding:c.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),u=c.texture.encoding):u=Dr,u===Dr&&h&&(u=Lo),u}this.getParameters=function(c,h,u,l,f,d,p){var y=i[c.type],x=p.isSkinnedMesh?o(p):0,m=n.precision;c.precision!==null&&(m=n.getMaxPrecision(c.precision),m!==c.precision&&console.warn("THREE.WebGLProgram.getParameters:",c.precision,"not supported, using",m,"instead."));var v=e.getRenderTarget(),g={shaderID:y,precision:m,supportsVertexTextures:n.vertexTextures,outputEncoding:s(v?v.texture:null,e.gammaOutput),map:!!c.map,mapEncoding:s(c.map,e.gammaInput),envMap:!!c.envMap,envMapMode:c.envMap&&c.envMap.mapping,envMapEncoding:s(c.envMap,e.gammaInput),envMapCubeUV:!!c.envMap&&(c.envMap.mapping===wa||c.envMap.mapping===Ma),lightMap:!!c.lightMap,aoMap:!!c.aoMap,emissiveMap:!!c.emissiveMap,emissiveMapEncoding:s(c.emissiveMap,e.gammaInput),bumpMap:!!c.bumpMap,normalMap:!!c.normalMap,displacementMap:!!c.displacementMap,roughnessMap:!!c.roughnessMap,metalnessMap:!!c.metalnessMap,specularMap:!!c.specularMap,alphaMap:!!c.alphaMap,gradientMap:!!c.gradientMap,combine:c.combine,vertexColors:c.vertexColors,fog:!!l,useFog:c.fog,fogExp:l&&l.isFogExp2,flatShading:c.flatShading,sizeAttenuation:c.sizeAttenuation,logarithmicDepthBuffer:n.logarithmicDepthBuffer,skinning:c.skinning&&x>0,maxBones:x,useVertexTexture:n.floatVertexTextures,morphTargets:c.morphTargets,morphNormals:c.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:h.directional.length,numPointLights:h.point.length,numSpotLights:h.spot.length,numRectAreaLights:h.rectArea.length,numHemiLights:h.hemi.length,numClippingPlanes:f,numClipIntersection:d,dithering:c.dithering,shadowMapEnabled:e.shadowMap.enabled&&p.receiveShadow&&u.length>0,shadowMapType:e.shadowMap.type,toneMapping:e.toneMapping,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:c.premultipliedAlpha,alphaTest:c.alphaTest,doubleSided:c.side===gr,flipSided:c.side===Ht,depthPacking:c.depthPacking!==void 0?c.depthPacking:!1};return g},this.getProgramCode=function(c,h){var u=[];if(h.shaderID?u.push(h.shaderID):(u.push(c.fragmentShader),u.push(c.vertexShader)),c.defines!==void 0)for(var l in c.defines)u.push(l),u.push(c.defines[l]);for(var f=0;f<a.length;f++)u.push(h[a[f]]);return u.push(c.onBeforeCompile.toString()),u.push(e.gammaOutput),u.join()},this.acquireProgram=function(c,h,u,l){for(var f,d=0,p=r.length;d<p;d++){var y=r[d];if(y.code===l){f=y,++f.usedTimes;break}}return f===void 0&&(f=new fl(e,t,l,c,h,u),r.push(f)),f},this.releaseProgram=function(c){if(--c.usedTimes===0){var h=r.indexOf(c);r[h]=r[r.length-1],r.pop(),c.destroy()}},this.programs=r}function pl(e,t,n,r,i,a,o){var s=typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext;function c(L,E){if(L.width>E||L.height>E){var B=E/Math.max(L.width,L.height),I=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");I.width=Math.floor(L.width*B),I.height=Math.floor(L.height*B);var N=I.getContext("2d");return N.drawImage(L,0,0,L.width,L.height,0,0,I.width,I.height),console.warn("THREE.WebGLRenderer: image is too big ("+L.width+"x"+L.height+"). Resized to "+I.width+"x"+I.height,L),I}return L}function h(L){return me.isPowerOfTwo(L.width)&&me.isPowerOfTwo(L.height)}function u(L){if(L instanceof HTMLImageElement||L instanceof HTMLCanvasElement){var E=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");E.width=me.nearestPowerOfTwo(L.width),E.height=me.nearestPowerOfTwo(L.height);var B=E.getContext("2d");return B.drawImage(L,0,0,E.width,E.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+L.width+"x"+L.height+"). Resized to "+E.width+"x"+E.height,L),E}return L}function l(L){return L.wrapS!==ct||L.wrapT!==ct||L.minFilter!==ht&&L.minFilter!==tt}function f(L,E){return L.generateMipmaps&&E&&L.minFilter!==ht&&L.minFilter!==tt}function d(L){return L===ht||L===Ea||L===Ta?e.NEAREST:e.LINEAR}function p(L){var E=L.target;E.removeEventListener("dispose",p),x(E),o.textures--}function y(L){var E=L.target;E.removeEventListener("dispose",y),m(E),o.textures--}function x(L){var E=r.get(L);if(L.image&&E.__image__webglTextureCube)e.deleteTexture(E.__image__webglTextureCube);else{if(E.__webglInit===void 0)return;e.deleteTexture(E.__webglTexture)}r.remove(L)}function m(L){var E=r.get(L),B=r.get(L.texture);if(L){if(B.__webglTexture!==void 0&&e.deleteTexture(B.__webglTexture),L.depthTexture&&L.depthTexture.dispose(),L.isWebGLRenderTargetCube)for(var I=0;I<6;I++)e.deleteFramebuffer(E.__webglFramebuffer[I]),E.__webglDepthbuffer&&e.deleteRenderbuffer(E.__webglDepthbuffer[I]);else e.deleteFramebuffer(E.__webglFramebuffer),E.__webglDepthbuffer&&e.deleteRenderbuffer(E.__webglDepthbuffer);r.remove(L.texture),r.remove(L)}}function v(L,E){var B=r.get(L);if(L.version>0&&B.__version!==L.version){var I=L.image;if(I===void 0)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",L);else if(I.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",L);else{w(B,L,E);return}}n.activeTexture(e.TEXTURE0+E),n.bindTexture(e.TEXTURE_2D,B.__webglTexture)}function g(L,E){var B=r.get(L);if(L.image.length===6)if(L.version>0&&B.__version!==L.version){B.__image__webglTextureCube||(L.addEventListener("dispose",p),B.__image__webglTextureCube=e.createTexture(),o.textures++),n.activeTexture(e.TEXTURE0+E),n.bindTexture(e.TEXTURE_CUBE_MAP,B.__image__webglTextureCube),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,L.flipY);for(var I=L&&L.isCompressedTexture,N=L.image[0]&&L.image[0].isDataTexture,z=[],V=0;V<6;V++)!I&&!N?z[V]=c(L.image[V],i.maxCubemapSize):z[V]=N?L.image[V].image:L.image[V];var W=z[0],X=h(W),Y=a.convert(L.format),j=a.convert(L.type);M(e.TEXTURE_CUBE_MAP,L,X);for(var V=0;V<6;V++)if(!I)N?n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+V,0,Y,z[V].width,z[V].height,0,Y,j,z[V].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+V,0,Y,Y,j,z[V]);else for(var re,O=z[V].mipmaps,ae=0,G=O.length;ae<G;ae++)re=O[ae],L.format!==Ut&&L.format!==Un?n.getCompressedTextureFormats().indexOf(Y)>-1?n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+V,ae,Y,re.width,re.height,0,re.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+V,ae,Y,re.width,re.height,0,Y,j,re.data);f(L,X)&&e.generateMipmap(e.TEXTURE_CUBE_MAP),B.__version=L.version,L.onUpdate&&L.onUpdate(L)}else n.activeTexture(e.TEXTURE0+E),n.bindTexture(e.TEXTURE_CUBE_MAP,B.__image__webglTextureCube)}function _(L,E){n.activeTexture(e.TEXTURE0+E),n.bindTexture(e.TEXTURE_CUBE_MAP,r.get(L).__webglTexture)}function M(L,E,B){var I;if(B?(e.texParameteri(L,e.TEXTURE_WRAP_S,a.convert(E.wrapS)),e.texParameteri(L,e.TEXTURE_WRAP_T,a.convert(E.wrapT)),e.texParameteri(L,e.TEXTURE_MAG_FILTER,a.convert(E.magFilter)),e.texParameteri(L,e.TEXTURE_MIN_FILTER,a.convert(E.minFilter))):(e.texParameteri(L,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(L,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),(E.wrapS!==ct||E.wrapT!==ct)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",E),e.texParameteri(L,e.TEXTURE_MAG_FILTER,d(E.magFilter)),e.texParameteri(L,e.TEXTURE_MIN_FILTER,d(E.minFilter)),E.minFilter!==ht&&E.minFilter!==tt&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",E)),I=t.get("EXT_texture_filter_anisotropic"),I){if(E.type===Dn&&t.get("OES_texture_float_linear")===null||E.type===Aa&&t.get("OES_texture_half_float_linear")===null)return;(E.anisotropy>1||r.get(E).__currentAnisotropy)&&(e.texParameterf(L,I.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(E.anisotropy,i.getMaxAnisotropy())),r.get(E).__currentAnisotropy=E.anisotropy)}}function w(L,E,B){L.__webglInit===void 0&&(L.__webglInit=!0,E.addEventListener("dispose",p),L.__webglTexture=e.createTexture(),o.textures++),n.activeTexture(e.TEXTURE0+B),n.bindTexture(e.TEXTURE_2D,L.__webglTexture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,E.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,E.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,E.unpackAlignment);var I=c(E.image,i.maxTextureSize);l(E)&&h(I)===!1&&(I=u(I));var N=h(I),z=a.convert(E.format),V=a.convert(E.type);M(e.TEXTURE_2D,E,N);var W,X=E.mipmaps;if(E.isDepthTexture){var Y=e.DEPTH_COMPONENT;if(E.type===Dn){if(!s)throw new Error("Float Depth Texture only supported in WebGL2.0");Y=e.DEPTH_COMPONENT32F}else s&&(Y=e.DEPTH_COMPONENT16);E.format===en&&Y===e.DEPTH_COMPONENT&&E.type!==Rr&&E.type!==So&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),E.type=Rr,V=a.convert(E.type)),E.format===Fn&&(Y=e.DEPTH_STENCIL,E.type!==Pr&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),E.type=Pr,V=a.convert(E.type))),n.texImage2D(e.TEXTURE_2D,0,Y,I.width,I.height,0,z,V,null)}else if(E.isDataTexture)if(X.length>0&&N){for(var j=0,re=X.length;j<re;j++)W=X[j],n.texImage2D(e.TEXTURE_2D,j,z,W.width,W.height,0,z,V,W.data);E.generateMipmaps=!1}else n.texImage2D(e.TEXTURE_2D,0,z,I.width,I.height,0,z,V,I.data);else if(E.isCompressedTexture)for(var j=0,re=X.length;j<re;j++)W=X[j],E.format!==Ut&&E.format!==Un?n.getCompressedTextureFormats().indexOf(z)>-1?n.compressedTexImage2D(e.TEXTURE_2D,j,z,W.width,W.height,0,W.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(e.TEXTURE_2D,j,z,W.width,W.height,0,z,V,W.data);else if(X.length>0&&N){for(var j=0,re=X.length;j<re;j++)W=X[j],n.texImage2D(e.TEXTURE_2D,j,z,z,V,W);E.generateMipmaps=!1}else n.texImage2D(e.TEXTURE_2D,0,z,z,V,I);f(E,N)&&e.generateMipmap(e.TEXTURE_2D),L.__version=E.version,E.onUpdate&&E.onUpdate(E)}function A(L,E,B,I){var N=a.convert(E.texture.format),z=a.convert(E.texture.type);n.texImage2D(I,0,N,E.width,E.height,0,N,z,null),e.bindFramebuffer(e.FRAMEBUFFER,L),e.framebufferTexture2D(e.FRAMEBUFFER,B,I,r.get(E.texture).__webglTexture,0),e.bindFramebuffer(e.FRAMEBUFFER,null)}function P(L,E){e.bindRenderbuffer(e.RENDERBUFFER,L),E.depthBuffer&&!E.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,E.width,E.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,L)):E.depthBuffer&&E.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,E.width,E.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,L)):e.renderbufferStorage(e.RENDERBUFFER,e.RGBA4,E.width,E.height),e.bindRenderbuffer(e.RENDERBUFFER,null)}function S(L,E){var B=E&&E.isWebGLRenderTargetCube;if(B)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(e.FRAMEBUFFER,L),!(E.depthTexture&&E.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(E.depthTexture).__webglTexture||E.depthTexture.image.width!==E.width||E.depthTexture.image.height!==E.height)&&(E.depthTexture.image.width=E.width,E.depthTexture.image.height=E.height,E.depthTexture.needsUpdate=!0),v(E.depthTexture,0);var I=r.get(E.depthTexture).__webglTexture;if(E.depthTexture.format===en)e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,I,0);else if(E.depthTexture.format===Fn)e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,I,0);else throw new Error("Unknown depthTexture format")}function C(L){var E=r.get(L),B=L.isWebGLRenderTargetCube===!0;if(L.depthTexture){if(B)throw new Error("target.depthTexture not supported in Cube render targets");S(E.__webglFramebuffer,L)}else if(B){E.__webglDepthbuffer=[];for(var I=0;I<6;I++)e.bindFramebuffer(e.FRAMEBUFFER,E.__webglFramebuffer[I]),E.__webglDepthbuffer[I]=e.createRenderbuffer(),P(E.__webglDepthbuffer[I],L)}else e.bindFramebuffer(e.FRAMEBUFFER,E.__webglFramebuffer),E.__webglDepthbuffer=e.createRenderbuffer(),P(E.__webglDepthbuffer,L);e.bindFramebuffer(e.FRAMEBUFFER,null)}function D(L){var E=r.get(L),B=r.get(L.texture);L.addEventListener("dispose",y),B.__webglTexture=e.createTexture(),o.textures++;var I=L.isWebGLRenderTargetCube===!0,N=h(L);if(I){E.__webglFramebuffer=[];for(var z=0;z<6;z++)E.__webglFramebuffer[z]=e.createFramebuffer()}else E.__webglFramebuffer=e.createFramebuffer();if(I){n.bindTexture(e.TEXTURE_CUBE_MAP,B.__webglTexture),M(e.TEXTURE_CUBE_MAP,L.texture,N);for(var z=0;z<6;z++)A(E.__webglFramebuffer[z],L,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+z);f(L.texture,N)&&e.generateMipmap(e.TEXTURE_CUBE_MAP),n.bindTexture(e.TEXTURE_CUBE_MAP,null)}else n.bindTexture(e.TEXTURE_2D,B.__webglTexture),M(e.TEXTURE_2D,L.texture,N),A(E.__webglFramebuffer,L,e.COLOR_ATTACHMENT0,e.TEXTURE_2D),f(L.texture,N)&&e.generateMipmap(e.TEXTURE_2D),n.bindTexture(e.TEXTURE_2D,null);L.depthBuffer&&C(L)}function H(L){var E=L.texture,B=h(L);if(f(E,B)){var I=L.isWebGLRenderTargetCube?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,N=r.get(E).__webglTexture;n.bindTexture(I,N),e.generateMipmap(I),n.bindTexture(I,null)}}this.setTexture2D=v,this.setTextureCube=g,this.setTextureCubeDynamic=_,this.setupRenderTarget=D,this.updateRenderTargetMipmap=H}function yl(){var e={};function t(i){var a=i.uuid,o=e[a];return o===void 0&&(o={},e[a]=o),o}function n(i){delete e[i.uuid]}function r(){e={}}return{get:t,remove:n,clear:r}}function xl(e,t,n){function r(){var F=!1,Q=new Ce,ee=null,ye=new Ce(0,0,0,0);return{setMask:function(oe){ee!==oe&&!F&&(e.colorMask(oe,oe,oe,oe),ee=oe)},setLocked:function(oe){F=oe},setClear:function(oe,we,Ae,Le,Ne){Ne===!0&&(oe*=Le,we*=Le,Ae*=Le),Q.set(oe,we,Ae,Le),ye.equals(Q)===!1&&(e.clearColor(oe,we,Ae,Le),ye.copy(Q))},reset:function(){F=!1,ee=null,ye.set(-1,0,0,0)}}}function i(){var F=!1,Q=null,ee=null,ye=null;return{setTest:function(oe){oe?ae(e.DEPTH_TEST):G(e.DEPTH_TEST)},setMask:function(oe){Q!==oe&&!F&&(e.depthMask(oe),Q=oe)},setFunc:function(oe){if(ee!==oe){if(oe)switch(oe){case Is:e.depthFunc(e.NEVER);break;case Ds:e.depthFunc(e.ALWAYS);break;case Us:e.depthFunc(e.LESS);break;case Ni:e.depthFunc(e.LEQUAL);break;case Fs:e.depthFunc(e.EQUAL);break;case Os:e.depthFunc(e.GEQUAL);break;case Ns:e.depthFunc(e.GREATER);break;case Bs:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}else e.depthFunc(e.LEQUAL);ee=oe}},setLocked:function(oe){F=oe},setClear:function(oe){ye!==oe&&(e.clearDepth(oe),ye=oe)},reset:function(){F=!1,Q=null,ee=null,ye=null}}}function a(){var F=!1,Q=null,ee=null,ye=null,oe=null,we=null,Ae=null,Le=null,Ne=null;return{setTest:function(Ee){Ee?ae(e.STENCIL_TEST):G(e.STENCIL_TEST)},setMask:function(Ee){Q!==Ee&&!F&&(e.stencilMask(Ee),Q=Ee)},setFunc:function(Ee,$e,Je){(ee!==Ee||ye!==$e||oe!==Je)&&(e.stencilFunc(Ee,$e,Je),ee=Ee,ye=$e,oe=Je)},setOp:function(Ee,$e,Je){(we!==Ee||Ae!==$e||Le!==Je)&&(e.stencilOp(Ee,$e,Je),we=Ee,Ae=$e,Le=Je)},setLocked:function(Ee){F=Ee},setClear:function(Ee){Ne!==Ee&&(e.clearStencil(Ee),Ne=Ee)},reset:function(){F=!1,Q=null,ee=null,ye=null,oe=null,we=null,Ae=null,Le=null,Ne=null}}}var o=new r,s=new i,c=new a,h=e.getParameter(e.MAX_VERTEX_ATTRIBS),u=new Uint8Array(h),l=new Uint8Array(h),f=new Uint8Array(h),d={},p=null,y=null,x=null,m=null,v=null,g=null,_=null,M=null,w=null,A=!1,P=null,S=null,C=null,D=null,H=null,L=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS),E=parseFloat(/^WebGL\ ([0-9])/.exec(e.getParameter(e.VERSION))[1]),B=parseFloat(E)>=1,I=null,N={},z=new Ce,V=new Ce;function W(F,Q,ee){var ye=new Uint8Array(4),oe=e.createTexture();e.bindTexture(F,oe),e.texParameteri(F,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(F,e.TEXTURE_MAG_FILTER,e.NEAREST);for(var we=0;we<ee;we++)e.texImage2D(Q+we,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,ye);return oe}var X={};X[e.TEXTURE_2D]=W(e.TEXTURE_2D,e.TEXTURE_2D,1),X[e.TEXTURE_CUBE_MAP]=W(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),o.setClear(0,0,0,1),s.setClear(1),c.setClear(0),ae(e.DEPTH_TEST),s.setFunc(Ni),Ie(!1),Oe(Lr),ae(e.CULL_FACE),ae(e.BLEND),pe(_r);function Y(){for(var F=0,Q=u.length;F<Q;F++)u[F]=0}function j(F){if(u[F]=1,l[F]===0&&(e.enableVertexAttribArray(F),l[F]=1),f[F]!==0){var Q=t.get("ANGLE_instanced_arrays");Q.vertexAttribDivisorANGLE(F,0),f[F]=0}}function re(F,Q){if(u[F]=1,l[F]===0&&(e.enableVertexAttribArray(F),l[F]=1),f[F]!==Q){var ee=t.get("ANGLE_instanced_arrays");ee.vertexAttribDivisorANGLE(F,Q),f[F]=Q}}function O(){for(var F=0,Q=l.length;F!==Q;++F)l[F]!==u[F]&&(e.disableVertexAttribArray(F),l[F]=0)}function ae(F){d[F]!==!0&&(e.enable(F),d[F]=!0)}function G(F){d[F]!==!1&&(e.disable(F),d[F]=!1)}function fe(){if(p===null&&(p=[],t.get("WEBGL_compressed_texture_pvrtc")||t.get("WEBGL_compressed_texture_s3tc")||t.get("WEBGL_compressed_texture_etc1")))for(var F=e.getParameter(e.COMPRESSED_TEXTURE_FORMATS),Q=0;Q<F.length;Q++)p.push(F[Q]);return p}function K(F){return y!==F?(e.useProgram(F),y=F,!0):!1}function pe(F,Q,ee,ye,oe,we,Ae,Le){if(F!==Oi?ae(e.BLEND):G(e.BLEND),F!==vo){if(F!==x||Le!==A)switch(F){case yo:Le?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE,e.ONE,e.ONE)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.SRC_ALPHA,e.ONE));break;case xo:Le?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.ONE_MINUS_SRC_COLOR));break;case mo:Le?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.SRC_COLOR));break;default:Le?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA))}m=null,v=null,g=null,_=null,M=null,w=null}else oe=oe||Q,we=we||ee,Ae=Ae||ye,(Q!==m||oe!==_)&&(e.blendEquationSeparate(n.convert(Q),n.convert(oe)),m=Q,_=oe),(ee!==v||ye!==g||we!==M||Ae!==w)&&(e.blendFuncSeparate(n.convert(ee),n.convert(ye),n.convert(we),n.convert(Ae)),v=ee,g=ye,M=we,w=Ae);x=F,A=Le}function Te(F){F.side===gr?G(e.CULL_FACE):ae(e.CULL_FACE),Ie(F.side===Ht),F.transparent===!0?pe(F.blending,F.blendEquation,F.blendSrc,F.blendDst,F.blendEquationAlpha,F.blendSrcAlpha,F.blendDstAlpha,F.premultipliedAlpha):pe(Oi),s.setFunc(F.depthFunc),s.setTest(F.depthTest),s.setMask(F.depthWrite),o.setMask(F.colorWrite),Se(F.polygonOffset,F.polygonOffsetFactor,F.polygonOffsetUnits)}function Ie(F){P!==F&&(F?e.frontFace(e.CW):e.frontFace(e.CCW),P=F)}function Oe(F){F!==ms?(ae(e.CULL_FACE),F!==S&&(F===Lr?e.cullFace(e.BACK):F===lo?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):G(e.CULL_FACE),S=F}function He(F){F!==C&&(B&&e.lineWidth(F),C=F)}function Se(F,Q,ee){F?(ae(e.POLYGON_OFFSET_FILL),(D!==Q||H!==ee)&&(e.polygonOffset(Q,ee),D=Q,H=ee)):G(e.POLYGON_OFFSET_FILL)}function xt(F){F?ae(e.SCISSOR_TEST):G(e.SCISSOR_TEST)}function mt(F){F===void 0&&(F=e.TEXTURE0+L-1),I!==F&&(e.activeTexture(F),I=F)}function We(F,Q){I===null&&mt();var ee=N[I];ee===void 0&&(ee={type:void 0,texture:void 0},N[I]=ee),(ee.type!==F||ee.texture!==Q)&&(e.bindTexture(F,Q||X[F]),ee.type=F,ee.texture=Q)}function Mt(){try{e.compressedTexImage2D.apply(e,arguments)}catch(F){console.error("THREE.WebGLState:",F)}}function Jt(){try{e.texImage2D.apply(e,arguments)}catch(F){console.error("THREE.WebGLState:",F)}}function qe(F){z.equals(F)===!1&&(e.scissor(F.x,F.y,F.z,F.w),z.copy(F))}function Ze(F){V.equals(F)===!1&&(e.viewport(F.x,F.y,F.z,F.w),V.copy(F))}function be(){for(var F=0;F<l.length;F++)l[F]===1&&(e.disableVertexAttribArray(F),l[F]=0);d={},p=null,I=null,N={},y=null,x=null,P=null,S=null,o.reset(),s.reset(),c.reset()}return{buffers:{color:o,depth:s,stencil:c},initAttributes:Y,enableAttribute:j,enableAttributeAndDivisor:re,disableUnusedAttributes:O,enable:ae,disable:G,getCompressedTextureFormats:fe,useProgram:K,setBlending:pe,setMaterial:Te,setFlipSided:Ie,setCullFace:Oe,setLineWidth:He,setPolygonOffset:Se,setScissorTest:xt,activeTexture:mt,bindTexture:We,compressedTexImage2D:Mt,texImage2D:Jt,scissor:qe,viewport:Ze,reset:be}}function ml(e,t,n){var r;function i(){if(r!==void 0)return r;var _=t.get("EXT_texture_filter_anisotropic");return _!==null?r=e.getParameter(_.MAX_TEXTURE_MAX_ANISOTROPY_EXT):r=0,r}function a(_){if(_==="highp"){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";_="mediump"}return _==="mediump"&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var o=n.precision!==void 0?n.precision:"highp",s=a(o);s!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",s,"instead."),o=s);var c=n.logarithmicDepthBuffer===!0&&!!t.get("EXT_frag_depth"),h=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),u=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),l=e.getParameter(e.MAX_TEXTURE_SIZE),f=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),d=e.getParameter(e.MAX_VERTEX_ATTRIBS),p=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),y=e.getParameter(e.MAX_VARYING_VECTORS),x=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),m=u>0,v=!!t.get("OES_texture_float"),g=m&&v;return{getMaxAnisotropy:i,getMaxPrecision:a,precision:o,logarithmicDepthBuffer:c,maxTextures:h,maxVertexTextures:u,maxTextureSize:l,maxCubemapSize:f,maxAttributes:d,maxVertexUniforms:p,maxVaryings:y,maxFragmentUniforms:x,vertexTextures:m,floatFragmentTextures:v,floatVertexTextures:g}}function qi(e){ze.call(this),this.cameras=e||[]}qi.prototype=Object.assign(Object.create(ze.prototype),{constructor:qi,isArrayCamera:!0});function vl(e){var t=this,n=null,r=null;"VRFrameData"in window&&(r=new window.VRFrameData);var i=new ue,a=new ue,o=new ue,s=new ze;s.bounds=new Ce(0,0,.5,1),s.layers.enable(1);var c=new ze;c.bounds=new Ce(.5,0,.5,1),c.layers.enable(2);var h=new qi([s,c]);h.layers.enable(1),h.layers.enable(2);var u,l;function f(){if(n!==null&&n.isPresenting){var d=n.getEyeParameters("left"),p=d.renderWidth,y=d.renderHeight;l=e.getPixelRatio(),u=e.getSize(),e.setDrawingBufferSize(p*2,y,1)}else t.enabled&&e.setDrawingBufferSize(u.width,u.height,l)}window.addEventListener("vrdisplaypresentchange",f,!1),this.enabled=!1,this.standing=!1,this.getDevice=function(){return n},this.setDevice=function(d){d!==void 0&&(n=d)},this.getCamera=function(d){if(n===null)return d;n.depthNear=d.near,n.depthFar=d.far,n.getFrameData(r);var p=r.pose;p.position!==null?d.position.fromArray(p.position):d.position.set(0,0,0),p.orientation!==null&&d.quaternion.fromArray(p.orientation),d.updateMatrixWorld();var y=n.stageParameters;if(this.standing&&y&&(a.fromArray(y.sittingToStandingTransform),o.getInverse(a),d.matrixWorld.multiply(a),d.matrixWorldInverse.multiply(o)),n.isPresenting===!1)return d;s.near=d.near,c.near=d.near,s.far=d.far,c.far=d.far,h.matrixWorld.copy(d.matrixWorld),h.matrixWorldInverse.copy(d.matrixWorldInverse),s.matrixWorldInverse.fromArray(r.leftViewMatrix),c.matrixWorldInverse.fromArray(r.rightViewMatrix),this.standing&&y&&(s.matrixWorldInverse.multiply(o),c.matrixWorldInverse.multiply(o));var x=d.parent;x!==null&&(i.getInverse(x.matrixWorld),s.matrixWorldInverse.multiply(i),c.matrixWorldInverse.multiply(i)),s.matrixWorld.getInverse(s.matrixWorldInverse),c.matrixWorld.getInverse(c.matrixWorldInverse),s.projectionMatrix.fromArray(r.leftProjectionMatrix),c.projectionMatrix.fromArray(r.rightProjectionMatrix),h.projectionMatrix.copy(s.projectionMatrix);var m=n.getLayers();if(m.length){var v=m[0];v.leftBounds!==null&&v.leftBounds.length===4&&s.bounds.fromArray(v.leftBounds),v.rightBounds!==null&&v.rightBounds.length===4&&c.bounds.fromArray(v.rightBounds)}return h},this.getStandingMatrix=function(){return a},this.submitFrame=function(){n&&n.isPresenting&&n.submitFrame()},this.dispose=function(){window.removeEventListener("vrdisplaypresentchange",f)}}function gl(e){var t={};return{get:function(n){if(t[n]!==void 0)return t[n];var r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"WEBGL_compressed_texture_etc1":r=e.getExtension("WEBGL_compressed_texture_etc1");break;default:r=e.getExtension(n)}return r===null&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),t[n]=r,r}}}function _l(){var e=this,t=null,n=0,r=!1,i=!1,a=new dt,o=new _t,s={value:null,needsUpdate:!1};this.uniform=s,this.numPlanes=0,this.numIntersection=0,this.init=function(u,l,f){var d=u.length!==0||l||n!==0||r;return r=l,t=h(u,f,0),n=u.length,d},this.beginShadows=function(){i=!0,h(null)},this.endShadows=function(){i=!1,c()},this.setState=function(u,l,f,d,p,y){if(!r||u===null||u.length===0||i&&!f)i?h(null):c();else{var x=i?0:n,m=x*4,v=p.clippingState||null;s.value=v,v=h(u,d,m,y);for(var g=0;g!==m;++g)v[g]=t[g];p.clippingState=v,this.numIntersection=l?this.numPlanes:0,this.numPlanes+=x}};function c(){s.value!==t&&(s.value=t,s.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function h(u,l,f,d){var p=u!==null?u.length:0,y=null;if(p!==0){if(y=s.value,d!==!0||y===null){var x=f+p*4,m=l.matrixWorldInverse;o.getNormalMatrix(m),(y===null||y.length<x)&&(y=new Float32Array(x));for(var v=0,g=f;v!==p;++v,g+=4)a.copy(u[v]).applyMatrix4(m,o),a.normal.toArray(y,g),y[g+3]=a.constant}s.value=y,s.needsUpdate=!0}return e.numPlanes=p,y}}function bl(e,t){function n(r){var i;if(r===Ct)return e.REPEAT;if(r===ct)return e.CLAMP_TO_EDGE;if(r===rn)return e.MIRRORED_REPEAT;if(r===ht)return e.NEAREST;if(r===Ea)return e.NEAREST_MIPMAP_NEAREST;if(r===Ta)return e.NEAREST_MIPMAP_LINEAR;if(r===tt)return e.LINEAR;if(r===To)return e.LINEAR_MIPMAP_NEAREST;if(r===bi)return e.LINEAR_MIPMAP_LINEAR;if(r===Sa)return e.UNSIGNED_BYTE;if(r===Ys)return e.UNSIGNED_SHORT_4_4_4_4;if(r===qs)return e.UNSIGNED_SHORT_5_5_5_1;if(r===Zs)return e.UNSIGNED_SHORT_5_6_5;if(r===Ws)return e.BYTE;if(r===Xs)return e.SHORT;if(r===Rr)return e.UNSIGNED_SHORT;if(r===js)return e.INT;if(r===So)return e.UNSIGNED_INT;if(r===Dn)return e.FLOAT;if(r===Aa&&(i=t.get("OES_texture_half_float"),i!==null))return i.HALF_FLOAT_OES;if(r===Js)return e.ALPHA;if(r===Un)return e.RGB;if(r===Ut)return e.RGBA;if(r===Qs)return e.LUMINANCE;if(r===Ks)return e.LUMINANCE_ALPHA;if(r===en)return e.DEPTH_COMPONENT;if(r===Fn)return e.DEPTH_STENCIL;if(r===go)return e.FUNC_ADD;if(r===bs)return e.FUNC_SUBTRACT;if(r===ws)return e.FUNC_REVERSE_SUBTRACT;if(r===Ms)return e.ZERO;if(r===Es)return e.ONE;if(r===Ts)return e.SRC_COLOR;if(r===Ss)return e.ONE_MINUS_SRC_COLOR;if(r===_o)return e.SRC_ALPHA;if(r===bo)return e.ONE_MINUS_SRC_ALPHA;if(r===As)return e.DST_ALPHA;if(r===Ls)return e.ONE_MINUS_DST_ALPHA;if(r===Rs)return e.DST_COLOR;if(r===Ps)return e.ONE_MINUS_DST_COLOR;if(r===Cs)return e.SRC_ALPHA_SATURATE;if((r===Ba||r===za||r===Ga||r===Ha)&&(i=t.get("WEBGL_compressed_texture_s3tc"),i!==null)){if(r===Ba)return i.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===za)return i.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===Ga)return i.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===Ha)return i.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((r===Va||r===ka||r===Wa||r===Xa)&&(i=t.get("WEBGL_compressed_texture_pvrtc"),i!==null)){if(r===Va)return i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===ka)return i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===Wa)return i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===Xa)return i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(r===$s&&(i=t.get("WEBGL_compressed_texture_etc1"),i!==null))return i.COMPRESSED_RGB_ETC1_WEBGL;if((r===Oa||r===Na)&&(i=t.get("EXT_blend_minmax"),i!==null)){if(r===Oa)return i.MIN_EXT;if(r===Na)return i.MAX_EXT}return r===Pr&&(i=t.get("WEBGL_depth_texture"),i!==null)?i.UNSIGNED_INT_24_8_WEBGL:0}return{convert:n}}function Pa(e){console.log("THREE.WebGLRenderer",xs),e=e||{};var t=e.canvas!==void 0?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),n=e.context!==void 0?e.context:null,r=e.alpha!==void 0?e.alpha:!1,i=e.depth!==void 0?e.depth:!0,a=e.stencil!==void 0?e.stencil:!0,o=e.antialias!==void 0?e.antialias:!1,s=e.premultipliedAlpha!==void 0?e.premultipliedAlpha:!0,c=e.preserveDrawingBuffer!==void 0?e.preserveDrawingBuffer:!1,h=[],u=[],l=null,f=[],d=[];this.domElement=t,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=wo,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var p=this,y=!1,x=null,m=null,v=-1,g="",_=null,M=null,w=new Ce,A=new Ce,P=null,S=0,C=t.width,D=t.height,H=1,L=new Ce(0,0,C,D),E=new Ce(0,0,C,D),B=!1,I=new Ra,N=new _l,z=!1,V=!1,W=new ue,X=new T,Y={geometries:0,textures:0},j={frame:0,calls:0,vertices:0,faces:0,points:0};this.info={render:j,memory:Y,programs:null};function re(){return x===null?H:1}var O;try{var ae={alpha:r,depth:i,stencil:a,antialias:o,premultipliedAlpha:s,preserveDrawingBuffer:c};if(O=n||t.getContext("webgl",ae)||t.getContext("experimental-webgl",ae),O===null)throw t.getContext("webgl")!==null?"Error creating WebGL context with your selected attributes.":"Error creating WebGL context.";O.getShaderPrecisionFormat===void 0&&(O.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}}),t.addEventListener("webglcontextlost",oe,!1),t.addEventListener("webglcontextrestored",we,!1)}catch(b){console.error("THREE.WebGLRenderer: "+b)}var G,fe,K,pe,Te,Ie,Oe,He,Se,xt,mt,We,Mt,Jt,qe,Ze,be,F;function Q(){G=new gl(O),G.get("WEBGL_depth_texture"),G.get("OES_texture_float"),G.get("OES_texture_float_linear"),G.get("OES_texture_half_float"),G.get("OES_texture_half_float_linear"),G.get("OES_standard_derivatives"),G.get("ANGLE_instanced_arrays"),G.get("OES_element_index_uint")&&(te.MaxIndex=4294967296),F=new bl(O,G),fe=new ml(O,G,e),K=new xl(O,G,F),K.scissor(A.copy(E).multiplyScalar(H)),K.viewport(w.copy(L).multiplyScalar(H)),pe=new yl,Te=new pl(O,G,K,pe,fe,F,Y),Ie=new ku(O),Oe=new tl(O,Ie,Y),He=new il(Oe,j),Mt=new Ku(O),xt=new dl(p,G,fe),Se=new rl,mt=new Ju,We=new ju(p,K,Oe,s),Jt=new el(O,G,j),qe=new $u(O,G,j),Ze=new Gu(p,O,K,Te,fe),be=new Hu(p,O,K,Te,fe),p.info.programs=xt.programs,p.context=O,p.capabilities=fe,p.extensions=G,p.properties=pe,p.renderLists=mt,p.state=K}Q();var ee=new vl(p);this.vr=ee;var ye=new No(p,He,fe.maxTextureSize);this.shadowMap=ye,this.getContext=function(){return O},this.getContextAttributes=function(){return O.getContextAttributes()},this.forceContextLoss=function(){var b=G.get("WEBGL_lose_context");b&&b.loseContext()},this.forceContextRestore=function(){var b=G.get("WEBGL_lose_context");b&&b.restoreContext()},this.getPixelRatio=function(){return H},this.setPixelRatio=function(b){b!==void 0&&(H=b,this.setSize(C,D,!1))},this.getSize=function(){return{width:C,height:D}},this.setSize=function(b,R,U){var k=ee.getDevice();if(k&&k.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}C=b,D=R,t.width=b*H,t.height=R*H,U!==!1&&(t.style.width=b+"px",t.style.height=R+"px"),this.setViewport(0,0,b,R)},this.getDrawingBufferSize=function(){return{width:C*H,height:D*H}},this.setDrawingBufferSize=function(b,R,U){C=b,D=R,H=U,t.width=b*U,t.height=R*U,this.setViewport(0,0,b,R)},this.setViewport=function(b,R,U,k){L.set(b,D-R-k,U,k),K.viewport(w.copy(L).multiplyScalar(H))},this.setScissor=function(b,R,U,k){E.set(b,D-R-k,U,k),K.scissor(A.copy(E).multiplyScalar(H))},this.setScissorTest=function(b){K.setScissorTest(B=b)},this.getClearColor=We.getClearColor,this.setClearColor=We.setClearColor,this.getClearAlpha=We.getClearAlpha,this.setClearAlpha=We.setClearAlpha,this.clear=function(b,R,U){var k=0;(b===void 0||b)&&(k|=O.COLOR_BUFFER_BIT),(R===void 0||R)&&(k|=O.DEPTH_BUFFER_BIT),(U===void 0||U)&&(k|=O.STENCIL_BUFFER_BIT),O.clear(k)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(b,R,U,k){this.setRenderTarget(b),this.clear(R,U,k)},this.dispose=function(){t.removeEventListener("webglcontextlost",oe,!1),t.removeEventListener("webglcontextrestored",we,!1),mt.dispose(),ee.dispose()};function oe(b){b.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),y=!0}function we(b){console.log("THREE.WebGLRenderer: Context Restored."),y=!1,Q()}function Ae(b){var R=b.target;R.removeEventListener("dispose",Ae),Le(R)}function Le(b){Ne(b),pe.remove(b)}function Ne(b){var R=pe.get(b).program;b.program=void 0,R!==void 0&&xt.releaseProgram(R)}function Ee(b,R,U){b.render(function(k){p.renderBufferImmediate(k,R,U)})}this.renderBufferImmediate=function(b,R,U){K.initAttributes();var k=pe.get(b);b.hasPositions&&!k.position&&(k.position=O.createBuffer()),b.hasNormals&&!k.normal&&(k.normal=O.createBuffer()),b.hasUvs&&!k.uv&&(k.uv=O.createBuffer()),b.hasColors&&!k.color&&(k.color=O.createBuffer());var $=R.getAttributes();if(b.hasPositions&&(O.bindBuffer(O.ARRAY_BUFFER,k.position),O.bufferData(O.ARRAY_BUFFER,b.positionArray,O.DYNAMIC_DRAW),K.enableAttribute($.position),O.vertexAttribPointer($.position,3,O.FLOAT,!1,0,0)),b.hasNormals){if(O.bindBuffer(O.ARRAY_BUFFER,k.normal),!U.isMeshPhongMaterial&&!U.isMeshStandardMaterial&&!U.isMeshNormalMaterial&&U.flatShading===!0)for(var ce=0,Me=b.count*3;ce<Me;ce+=9){var he=b.normalArray,_e=(he[ce+0]+he[ce+3]+he[ce+6])/3,ve=(he[ce+1]+he[ce+4]+he[ce+7])/3,de=(he[ce+2]+he[ce+5]+he[ce+8])/3;he[ce+0]=_e,he[ce+1]=ve,he[ce+2]=de,he[ce+3]=_e,he[ce+4]=ve,he[ce+5]=de,he[ce+6]=_e,he[ce+7]=ve,he[ce+8]=de}O.bufferData(O.ARRAY_BUFFER,b.normalArray,O.DYNAMIC_DRAW),K.enableAttribute($.normal),O.vertexAttribPointer($.normal,3,O.FLOAT,!1,0,0)}b.hasUvs&&U.map&&(O.bindBuffer(O.ARRAY_BUFFER,k.uv),O.bufferData(O.ARRAY_BUFFER,b.uvArray,O.DYNAMIC_DRAW),K.enableAttribute($.uv),O.vertexAttribPointer($.uv,2,O.FLOAT,!1,0,0)),b.hasColors&&U.vertexColors!==ga&&(O.bindBuffer(O.ARRAY_BUFFER,k.color),O.bufferData(O.ARRAY_BUFFER,b.colorArray,O.DYNAMIC_DRAW),K.enableAttribute($.color),O.vertexAttribPointer($.color,3,O.FLOAT,!1,0,0)),K.disableUnusedAttributes(),O.drawArrays(O.TRIANGLES,0,b.count),b.count=0},this.renderBufferDirect=function(b,R,U,k,$,ce){K.setMaterial(k);var Me=Sn(b,R,k,$),he=U.id+"_"+Me.id+"_"+(k.wireframe===!0),_e=!1;he!==g&&(g=he,_e=!0),$.morphTargetInfluences&&(Mt.update($,U,k,Me),_e=!0);var ve=U.index,de=U.attributes.position,ne=1;k.wireframe===!0&&(ve=Oe.getWireframeAttribute(U),ne=2);var Xe,Re=Jt;ve!==null&&(Xe=Ie.get(ve),Re=qe,Re.setIndex(Xe)),_e&&($e(k,Me,U),ve!==null&&O.bindBuffer(O.ELEMENT_ARRAY_BUFFER,Xe.buffer));var ot=0;ve!==null?ot=ve.count:de!==void 0&&(ot=de.count);var Ve=U.drawRange.start*ne,Qe=U.drawRange.count*ne,Et=ce!==null?ce.start*ne:0,An=ce!==null?ce.count*ne:1/0,st=Math.max(Ve,Et),ys=Math.min(ot,Ve+Qe,Et+An)-1,Ei=Math.max(0,ys-st+1);if(Ei!==0){if($.isMesh)if(k.wireframe===!0)K.setLineWidth(k.wireframeLinewidth*re()),Re.setMode(O.LINES);else switch($.drawMode){case Ao:Re.setMode(O.TRIANGLES);break;case rc:Re.setMode(O.TRIANGLE_STRIP);break;case ic:Re.setMode(O.TRIANGLE_FAN);break}else if($.isLine){var Ti=k.linewidth;Ti===void 0&&(Ti=1),K.setLineWidth(Ti*re()),$.isLineSegments?Re.setMode(O.LINES):$.isLineLoop?Re.setMode(O.LINE_LOOP):Re.setMode(O.LINE_STRIP)}else $.isPoints&&Re.setMode(O.POINTS);U&&U.isInstancedBufferGeometry?U.maxInstancedCount>0&&Re.renderInstances(U,st,Ei):Re.render(st,Ei)}};function $e(b,R,U,k){if(U&&U.isInstancedBufferGeometry&&G.get("ANGLE_instanced_arrays")===null){console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}k===void 0&&(k=0),K.initAttributes();var $=U.attributes,ce=R.getAttributes(),Me=b.defaultAttributeValues;for(var he in ce){var _e=ce[he];if(_e>=0){var ve=$[he];if(ve!==void 0){var de=ve.normalized,ne=ve.itemSize,Xe=Ie.get(ve);if(Xe===void 0)continue;var Re=Xe.buffer,ot=Xe.type,Ve=Xe.bytesPerElement;if(ve.isInterleavedBufferAttribute){var Qe=ve.data,Et=Qe.stride,An=ve.offset;Qe&&Qe.isInstancedInterleavedBuffer?(K.enableAttributeAndDivisor(_e,Qe.meshPerAttribute),U.maxInstancedCount===void 0&&(U.maxInstancedCount=Qe.meshPerAttribute*Qe.count)):K.enableAttribute(_e),O.bindBuffer(O.ARRAY_BUFFER,Re),O.vertexAttribPointer(_e,ne,ot,de,Et*Ve,(k*Et+An)*Ve)}else ve.isInstancedBufferAttribute?(K.enableAttributeAndDivisor(_e,ve.meshPerAttribute),U.maxInstancedCount===void 0&&(U.maxInstancedCount=ve.meshPerAttribute*ve.count)):K.enableAttribute(_e),O.bindBuffer(O.ARRAY_BUFFER,Re),O.vertexAttribPointer(_e,ne,ot,de,0,k*ne*Ve)}else if(Me!==void 0){var st=Me[he];if(st!==void 0)switch(st.length){case 2:O.vertexAttrib2fv(_e,st);break;case 3:O.vertexAttrib3fv(_e,st);break;case 4:O.vertexAttrib4fv(_e,st);break;default:O.vertexAttrib1fv(_e,st)}}}}K.disableUnusedAttributes()}this.compile=function(b,R){h.length=0,u.length=0,b.traverse(function(U){U.isLight&&(h.push(U),U.castShadow&&u.push(U))}),Se.setup(h,u,R),b.traverse(function(U){if(U.material)if(Array.isArray(U.material))for(var k=0;k<U.material.length;k++)Kt(U.material[k],b.fog,U);else Kt(U.material,b.fog,U)})};var Je=null;function wr(){(ee.getDevice()||window).requestAnimationFrame(En)}function En(b){Je!==null&&Je(b),(ee.getDevice()||window).requestAnimationFrame(En)}this.animate=function(b){Je=b,wr()},this.render=function(b,R,U,k){if(!(R&&R.isCamera)){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(!y){g="",v=-1,_=null,b.autoUpdate===!0&&b.updateMatrixWorld(),R.parent===null&&R.updateMatrixWorld(),ee.enabled&&(R=ee.getCamera(R)),W.multiplyMatrices(R.projectionMatrix,R.matrixWorldInverse),I.setFromMatrix(W),h.length=0,u.length=0,f.length=0,d.length=0,V=this.localClippingEnabled,z=N.init(this.clippingPlanes,V,R),l=mt.get(b,R),l.init(),Tn(b,R,p.sortObjects),p.sortObjects===!0&&l.sort(),z&&N.beginShadows(),ye.render(u,b,R),Se.setup(h,u,R),z&&N.endShadows(),j.frame++,j.calls=0,j.vertices=0,j.faces=0,j.points=0,U===void 0&&(U=null),this.setRenderTarget(U),We.render(l,b,R,k);var $=l.opaque,ce=l.transparent;if(b.overrideMaterial){var Me=b.overrideMaterial;$.length&&Qt($,b,R,Me),ce.length&&Qt(ce,b,R,Me)}else $.length&&Qt($,b,R),ce.length&&Qt(ce,b,R);be.render(f,b,R),Ze.render(d,b,R,w),U&&Te.updateRenderTargetMipmap(U),K.buffers.depth.setTest(!0),K.buffers.depth.setMask(!0),K.buffers.color.setMask(!0),K.setPolygonOffset(!1),ee.enabled&&ee.submitFrame()}};function Tn(b,R,U){if(b.visible){var k=b.layers.test(R.layers);if(k){if(b.isLight)h.push(b),b.castShadow&&u.push(b);else if(b.isSprite)(!b.frustumCulled||I.intersectsSprite(b))&&f.push(b);else if(b.isLensFlare)d.push(b);else if(b.isImmediateRenderObject)U&&X.setFromMatrixPosition(b.matrixWorld).applyMatrix4(W),l.push(b,null,b.material,X.z,null);else if((b.isMesh||b.isLine||b.isPoints)&&(b.isSkinnedMesh&&b.skeleton.update(),!b.frustumCulled||I.intersectsObject(b))){U&&X.setFromMatrixPosition(b.matrixWorld).applyMatrix4(W);var $=He.update(b),ce=b.material;if(Array.isArray(ce))for(var Me=$.groups,he=0,_e=Me.length;he<_e;he++){var ve=Me[he],de=ce[ve.materialIndex];de&&de.visible&&l.push(b,$,de,X.z,ve)}else ce.visible&&l.push(b,$,ce,X.z,null)}}for(var ne=b.children,he=0,_e=ne.length;he<_e;he++)Tn(ne[he],R,U)}}function Qt(b,R,U,k){for(var $=0,ce=b.length;$<ce;$++){var Me=b[$],he=Me.object,_e=Me.geometry,ve=k===void 0?Me.material:k,de=Me.group;if(U.isArrayCamera){M=U;for(var ne=U.cameras,Xe=0,Re=ne.length;Xe<Re;Xe++){var ot=ne[Xe];if(he.layers.test(ot.layers)){var Ve=ot.bounds,Qe=Ve.x*C,Et=Ve.y*D,An=Ve.z*C,st=Ve.w*D;K.viewport(w.set(Qe,Et,An,st).multiplyScalar(H)),Mr(he,R,ot,_e,ve,de)}}}else M=null,Mr(he,R,U,_e,ve,de)}}function Mr(b,R,U,k,$,ce){if(b.onBeforeRender(p,R,U,k,$,ce),b.modelViewMatrix.multiplyMatrices(U.matrixWorldInverse,b.matrixWorld),b.normalMatrix.getNormalMatrix(b.modelViewMatrix),b.isImmediateRenderObject){K.setMaterial($);var Me=Sn(U,R.fog,$,b);g="",Ee(b,Me,$)}else p.renderBufferDirect(U,R.fog,k,$,b,ce);b.onAfterRender(p,R,U,k,$,ce)}function Kt(b,R,U){var k=pe.get(b),$=xt.getParameters(b,Se.state,u,R,N.numPlanes,N.numIntersection,U),ce=xt.getProgramCode(b,$),Me=k.program,he=!0;if(Me===void 0)b.addEventListener("dispose",Ae);else if(Me.code!==ce)Ne(b);else{if($.shaderID!==void 0)return;he=!1}if(he){if($.shaderID){var _e=tn[$.shaderID];k.shader={name:b.type,uniforms:et.clone(_e.uniforms),vertexShader:_e.vertexShader,fragmentShader:_e.fragmentShader}}else k.shader={name:b.type,uniforms:b.uniforms,vertexShader:b.vertexShader,fragmentShader:b.fragmentShader};b.onBeforeCompile(k.shader),Me=xt.acquireProgram(b,k.shader,$,ce),k.program=Me,b.program=Me}var ve=Me.getAttributes();if(b.morphTargets){b.numSupportedMorphTargets=0;for(var de=0;de<p.maxMorphTargets;de++)ve["morphTarget"+de]>=0&&b.numSupportedMorphTargets++}if(b.morphNormals){b.numSupportedMorphNormals=0;for(var de=0;de<p.maxMorphNormals;de++)ve["morphNormal"+de]>=0&&b.numSupportedMorphNormals++}var ne=k.shader.uniforms;(!b.isShaderMaterial&&!b.isRawShaderMaterial||b.clipping===!0)&&(k.numClippingPlanes=N.numPlanes,k.numIntersection=N.numIntersection,ne.clippingPlanes=N.uniform),k.fog=R,k.lightsHash=Se.state.hash,b.lights&&(ne.ambientLightColor.value=Se.state.ambient,ne.directionalLights.value=Se.state.directional,ne.spotLights.value=Se.state.spot,ne.rectAreaLights.value=Se.state.rectArea,ne.pointLights.value=Se.state.point,ne.hemisphereLights.value=Se.state.hemi,ne.directionalShadowMap.value=Se.state.directionalShadowMap,ne.directionalShadowMatrix.value=Se.state.directionalShadowMatrix,ne.spotShadowMap.value=Se.state.spotShadowMap,ne.spotShadowMatrix.value=Se.state.spotShadowMatrix,ne.pointShadowMap.value=Se.state.pointShadowMap,ne.pointShadowMatrix.value=Se.state.pointShadowMatrix);var Xe=k.program.getUniforms(),Re=kt.seqWithValue(Xe.seq,ne);k.uniformsList=Re}function Sn(b,R,U,k){S=0;var $=pe.get(U);if(z&&(V||b!==_)){var ce=b===_&&U.id===v;N.setState(U.clippingPlanes,U.clipIntersection,U.clipShadows,b,$,ce)}U.needsUpdate===!1&&($.program===void 0||U.fog&&$.fog!==R||U.lights&&$.lightsHash!==Se.state.hash||$.numClippingPlanes!==void 0&&($.numClippingPlanes!==N.numPlanes||$.numIntersection!==N.numIntersection))&&(U.needsUpdate=!0),U.needsUpdate&&(Kt(U,R,k),U.needsUpdate=!1);var Me=!1,he=!1,_e=!1,ve=$.program,de=ve.getUniforms(),ne=$.shader.uniforms;if(K.useProgram(ve.program)&&(Me=!0,he=!0,_e=!0),U.id!==v&&(v=U.id,he=!0),Me||b!==_){if(de.setValue(O,"projectionMatrix",b.projectionMatrix),fe.logarithmicDepthBuffer&&de.setValue(O,"logDepthBufFC",2/(Math.log(b.far+1)/Math.LN2)),_!==(M||b)&&(_=M||b,he=!0,_e=!0),U.isShaderMaterial||U.isMeshPhongMaterial||U.isMeshStandardMaterial||U.envMap){var Xe=de.map.cameraPosition;Xe!==void 0&&Xe.setValue(O,X.setFromMatrixPosition(b.matrixWorld))}(U.isMeshPhongMaterial||U.isMeshLambertMaterial||U.isMeshBasicMaterial||U.isMeshStandardMaterial||U.isShaderMaterial||U.skinning)&&de.setValue(O,"viewMatrix",b.matrixWorldInverse)}if(U.skinning){de.setOptional(O,k,"bindMatrix"),de.setOptional(O,k,"bindMatrixInverse");var Re=k.skeleton;if(Re){var ot=Re.bones;if(fe.floatVertexTextures){if(Re.boneTexture===void 0){var Ve=Math.sqrt(ot.length*4);Ve=me.nextPowerOfTwo(Math.ceil(Ve)),Ve=Math.max(Ve,4);var Qe=new Float32Array(Ve*Ve*4);Qe.set(Re.boneMatrices);var Et=new on(Qe,Ve,Ve,Ut,Dn);Re.boneMatrices=Qe,Re.boneTexture=Et,Re.boneTextureSize=Ve}de.setValue(O,"boneTexture",Re.boneTexture),de.setValue(O,"boneTextureSize",Re.boneTextureSize)}else de.setOptional(O,Re,"boneMatrices")}}return he&&(de.setValue(O,"toneMappingExposure",p.toneMappingExposure),de.setValue(O,"toneMappingWhitePoint",p.toneMappingWhitePoint),U.lights&&ds(ne,_e),R&&U.fog&&os(ne,R),U.isMeshBasicMaterial?at(ne,U):U.isMeshLambertMaterial?(at(ne,U),ss(ne,U)):U.isMeshPhongMaterial?(at(ne,U),U.isMeshToonMaterial?cs(ne,U):Ua(ne,U)):U.isMeshStandardMaterial?(at(ne,U),U.isMeshPhysicalMaterial?hs(ne,U):Fa(ne,U)):U.isMeshDepthMaterial?(at(ne,U),us(ne,U)):U.isMeshDistanceMaterial?(at(ne,U),ls(ne,U)):U.isMeshNormalMaterial?(at(ne,U),fs(ne,U)):U.isLineBasicMaterial?(rs(ne,U),U.isLineDashedMaterial&&is(ne,U)):U.isPointsMaterial?as(ne,U):U.isShadowMaterial&&(ne.color.value=U.color,ne.opacity.value=U.opacity),ne.ltcMat!==void 0&&(ne.ltcMat.value=se.LTC_MAT_TEXTURE),ne.ltcMag!==void 0&&(ne.ltcMag.value=se.LTC_MAG_TEXTURE),kt.upload(O,$.uniformsList,ne,p)),de.setValue(O,"modelViewMatrix",k.modelViewMatrix),de.setValue(O,"normalMatrix",k.normalMatrix),de.setValue(O,"modelMatrix",k.matrixWorld),ve}function at(b,R){b.opacity.value=R.opacity,R.color&&(b.diffuse.value=R.color),R.emissive&&b.emissive.value.copy(R.emissive).multiplyScalar(R.emissiveIntensity),R.map&&(b.map.value=R.map),R.alphaMap&&(b.alphaMap.value=R.alphaMap),R.specularMap&&(b.specularMap.value=R.specularMap),R.envMap&&(b.envMap.value=R.envMap,b.flipEnvMap.value=R.envMap&&R.envMap.isCubeTexture?-1:1,b.reflectivity.value=R.reflectivity,b.refractionRatio.value=R.refractionRatio),R.lightMap&&(b.lightMap.value=R.lightMap,b.lightMapIntensity.value=R.lightMapIntensity),R.aoMap&&(b.aoMap.value=R.aoMap,b.aoMapIntensity.value=R.aoMapIntensity);var U;if(R.map?U=R.map:R.specularMap?U=R.specularMap:R.displacementMap?U=R.displacementMap:R.normalMap?U=R.normalMap:R.bumpMap?U=R.bumpMap:R.roughnessMap?U=R.roughnessMap:R.metalnessMap?U=R.metalnessMap:R.alphaMap?U=R.alphaMap:R.emissiveMap&&(U=R.emissiveMap),U!==void 0){U.isWebGLRenderTarget&&(U=U.texture);var k=U.offset,$=U.repeat;b.offsetRepeat.value.set(k.x,k.y,$.x,$.y)}}function rs(b,R){b.diffuse.value=R.color,b.opacity.value=R.opacity}function is(b,R){b.dashSize.value=R.dashSize,b.totalSize.value=R.dashSize+R.gapSize,b.scale.value=R.scale}function as(b,R){if(b.diffuse.value=R.color,b.opacity.value=R.opacity,b.size.value=R.size*H,b.scale.value=D*.5,b.map.value=R.map,R.map!==null){var U=R.map.offset,k=R.map.repeat;b.offsetRepeat.value.set(U.x,U.y,k.x,k.y)}}function os(b,R){b.fogColor.value=R.color,R.isFog?(b.fogNear.value=R.near,b.fogFar.value=R.far):R.isFogExp2&&(b.fogDensity.value=R.density)}function ss(b,R){R.emissiveMap&&(b.emissiveMap.value=R.emissiveMap)}function Ua(b,R){b.specular.value=R.specular,b.shininess.value=Math.max(R.shininess,1e-4),R.emissiveMap&&(b.emissiveMap.value=R.emissiveMap),R.bumpMap&&(b.bumpMap.value=R.bumpMap,b.bumpScale.value=R.bumpScale),R.normalMap&&(b.normalMap.value=R.normalMap,b.normalScale.value.copy(R.normalScale)),R.displacementMap&&(b.displacementMap.value=R.displacementMap,b.displacementScale.value=R.displacementScale,b.displacementBias.value=R.displacementBias)}function cs(b,R){Ua(b,R),R.gradientMap&&(b.gradientMap.value=R.gradientMap)}function Fa(b,R){b.roughness.value=R.roughness,b.metalness.value=R.metalness,R.roughnessMap&&(b.roughnessMap.value=R.roughnessMap),R.metalnessMap&&(b.metalnessMap.value=R.metalnessMap),R.emissiveMap&&(b.emissiveMap.value=R.emissiveMap),R.bumpMap&&(b.bumpMap.value=R.bumpMap,b.bumpScale.value=R.bumpScale),R.normalMap&&(b.normalMap.value=R.normalMap,b.normalScale.value.copy(R.normalScale)),R.displacementMap&&(b.displacementMap.value=R.displacementMap,b.displacementScale.value=R.displacementScale,b.displacementBias.value=R.displacementBias),R.envMap&&(b.envMapIntensity.value=R.envMapIntensity)}function hs(b,R){b.clearCoat.value=R.clearCoat,b.clearCoatRoughness.value=R.clearCoatRoughness,Fa(b,R)}function us(b,R){R.displacementMap&&(b.displacementMap.value=R.displacementMap,b.displacementScale.value=R.displacementScale,b.displacementBias.value=R.displacementBias)}function ls(b,R){R.displacementMap&&(b.displacementMap.value=R.displacementMap,b.displacementScale.value=R.displacementScale,b.displacementBias.value=R.displacementBias),b.referencePosition.value.copy(R.referencePosition),b.nearDistance.value=R.nearDistance,b.farDistance.value=R.farDistance}function fs(b,R){R.bumpMap&&(b.bumpMap.value=R.bumpMap,b.bumpScale.value=R.bumpScale),R.normalMap&&(b.normalMap.value=R.normalMap,b.normalScale.value.copy(R.normalScale)),R.displacementMap&&(b.displacementMap.value=R.displacementMap,b.displacementScale.value=R.displacementScale,b.displacementBias.value=R.displacementBias)}function ds(b,R){b.ambientLightColor.needsUpdate=R,b.directionalLights.needsUpdate=R,b.pointLights.needsUpdate=R,b.spotLights.needsUpdate=R,b.rectAreaLights.needsUpdate=R,b.hemisphereLights.needsUpdate=R}this.setFaceCulling=function(b,R){K.setCullFace(b),K.setFlipSided(R===vs)};function ps(){var b=S;return b>=fe.maxTextures&&console.warn("THREE.WebGLRenderer: Trying to use "+b+" texture units while this GPU supports only "+fe.maxTextures),S+=1,b}this.allocTextureUnit=ps,this.setTexture2D=function(){var b=!1;return function(U,k){U&&U.isWebGLRenderTarget&&(b||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),b=!0),U=U.texture),Te.setTexture2D(U,k)}}(),this.setTexture=function(){var b=!1;return function(U,k){b||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),b=!0),Te.setTexture2D(U,k)}}(),this.setTextureCube=function(){var b=!1;return function(U,k){U&&U.isWebGLRenderTargetCube&&(b||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),b=!0),U=U.texture),U&&U.isCubeTexture||Array.isArray(U.image)&&U.image.length===6?Te.setTextureCube(U,k):Te.setTextureCubeDynamic(U,k)}}(),this.getRenderTarget=function(){return x},this.setRenderTarget=function(b){x=b,b&&pe.get(b).__webglFramebuffer===void 0&&Te.setupRenderTarget(b);var R=null,U=!1;if(b){var k=pe.get(b).__webglFramebuffer;b.isWebGLRenderTargetCube?(R=k[b.activeCubeFace],U=!0):R=k,w.copy(b.viewport),A.copy(b.scissor),P=b.scissorTest}else w.copy(L).multiplyScalar(H),A.copy(E).multiplyScalar(H),P=B;if(m!==R&&(O.bindFramebuffer(O.FRAMEBUFFER,R),m=R),K.viewport(w),K.scissor(A),K.setScissorTest(P),U){var $=pe.get(b.texture);O.framebufferTexture2D(O.FRAMEBUFFER,O.COLOR_ATTACHMENT0,O.TEXTURE_CUBE_MAP_POSITIVE_X+b.activeCubeFace,$.__webglTexture,b.activeMipMapLevel)}},this.readRenderTargetPixels=function(b,R,U,k,$,ce){if(!(b&&b.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}var Me=pe.get(b).__webglFramebuffer;if(Me){var he=!1;Me!==m&&(O.bindFramebuffer(O.FRAMEBUFFER,Me),he=!0);try{var _e=b.texture,ve=_e.format,de=_e.type;if(ve!==Ut&&F.convert(ve)!==O.getParameter(O.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(de!==Sa&&F.convert(de)!==O.getParameter(O.IMPLEMENTATION_COLOR_READ_TYPE)&&!(de===Dn&&(G.get("OES_texture_float")||G.get("WEBGL_color_buffer_float")))&&!(de===Aa&&G.get("EXT_color_buffer_half_float"))){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}O.checkFramebufferStatus(O.FRAMEBUFFER)===O.FRAMEBUFFER_COMPLETE?R>=0&&R<=b.width-k&&U>=0&&U<=b.height-$&&O.readPixels(R,U,k,$,F.convert(ve),F.convert(de),ce):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{he&&O.bindFramebuffer(O.FRAMEBUFFER,m)}}}}function zn(e,t){this.name="",this.color=new ie(e),this.density=t!==void 0?t:25e-5}zn.prototype.isFogExp2=!0;zn.prototype.clone=function(){return new zn(this.color.getHex(),this.density)};zn.prototype.toJSON=function(e){return{type:"FogExp2",color:this.color.getHex(),density:this.density}};function Gn(e,t,n){this.name="",this.color=new ie(e),this.near=t!==void 0?t:1,this.far=n!==void 0?n:1e3}Gn.prototype.isFog=!0;Gn.prototype.clone=function(){return new Gn(this.color.getHex(),this.near,this.far)};Gn.prototype.toJSON=function(e){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}};function Nr(){J.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}Nr.prototype=Object.assign(Object.create(J.prototype),{constructor:Nr,copy:function(e,t){return J.prototype.copy.call(this,e,t),e.background!==null&&(this.background=e.background.clone()),e.fog!==null&&(this.fog=e.fog.clone()),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},toJSON:function(e){var t=J.prototype.toJSON.call(this,e);return this.background!==null&&(t.object.background=this.background.toJSON(e)),this.fog!==null&&(t.object.fog=this.fog.toJSON()),t}});function eo(e,t,n,r,i){J.call(this),this.lensFlares=[],this.positionScreen=new T,this.customUpdateCallback=void 0,e!==void 0&&this.add(e,t,n,r,i)}eo.prototype=Object.assign(Object.create(J.prototype),{constructor:eo,isLensFlare:!0,copy:function(e){J.prototype.copy.call(this,e),this.positionScreen.copy(e.positionScreen),this.customUpdateCallback=e.customUpdateCallback;for(var t=0,n=e.lensFlares.length;t<n;t++)this.lensFlares.push(e.lensFlares[t]);return this},add:function(e,t,n,r,i,a){t===void 0&&(t=-1),n===void 0&&(n=0),a===void 0&&(a=1),i===void 0&&(i=new ie(16777215)),r===void 0&&(r=_r),n=Math.min(n,Math.max(0,n)),this.lensFlares.push({texture:e,size:t,distance:n,x:0,y:0,z:0,scale:1,rotation:0,opacity:a,color:i,blending:r})},updateLensFlares:function(){var e,t=this.lensFlares.length,n,r=-this.positionScreen.x*2,i=-this.positionScreen.y*2;for(e=0;e<t;e++)n=this.lensFlares[e],n.x=this.positionScreen.x+r*n.distance,n.y=this.positionScreen.y+i*n.distance,n.wantedRotation=n.x*Math.PI*.25,n.rotation+=(n.wantedRotation-n.rotation)*.25}});function jt(e){ge.call(this),this.type="SpriteMaterial",this.color=new ie(16777215),this.map=null,this.rotation=0,this.fog=!1,this.lights=!1,this.setValues(e)}jt.prototype=Object.create(ge.prototype);jt.prototype.constructor=jt;jt.prototype.isSpriteMaterial=!0;jt.prototype.copy=function(e){return ge.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.rotation=e.rotation,this};function Zi(e){J.call(this),this.type="Sprite",this.material=e!==void 0?e:new jt}Zi.prototype=Object.assign(Object.create(J.prototype),{constructor:Zi,isSprite:!0,raycast:function(){var e=new T,t=new T,n=new T;return function(i,a){t.setFromMatrixPosition(this.matrixWorld),i.ray.closestPointToPoint(t,e),n.setFromMatrixScale(this.matrixWorld);var o=n.x*n.y/4;if(!(t.distanceToSquared(e)>o)){var s=i.ray.origin.distanceTo(e);s<i.near||s>i.far||a.push({distance:s,point:e.clone(),face:null,object:this})}}}(),clone:function(){return new this.constructor(this.material).copy(this)}});function Br(){J.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}Br.prototype=Object.assign(Object.create(J.prototype),{constructor:Br,copy:function(e){J.prototype.copy.call(this,e,!1);for(var t=e.levels,n=0,r=t.length;n<r;n++){var i=t[n];this.addLevel(i.object.clone(),i.distance)}return this},addLevel:function(e,t){t===void 0&&(t=0),t=Math.abs(t);for(var n=this.levels,r=0;r<n.length&&!(t<n[r].distance);r++);n.splice(r,0,{distance:t,object:e}),this.add(e)},getObjectForDistance:function(e){for(var t=this.levels,n=1,r=t.length;n<r&&!(e<t[n].distance);n++);return t[n-1].object},raycast:function(){var e=new T;return function(n,r){e.setFromMatrixPosition(this.matrixWorld);var i=n.ray.origin.distanceTo(e);this.getObjectForDistance(i).raycast(n,r)}}(),update:function(){var e=new T,t=new T;return function(r){var i=this.levels;if(i.length>1){e.setFromMatrixPosition(r.matrixWorld),t.setFromMatrixPosition(this.matrixWorld);var a=e.distanceTo(t);i[0].object.visible=!0;for(var o=1,s=i.length;o<s&&a>=i[o].distance;o++)i[o-1].object.visible=!1,i[o].object.visible=!0;for(;o<s;o++)i[o].object.visible=!1}}}(),toJSON:function(e){var t=J.prototype.toJSON.call(this,e);t.object.levels=[];for(var n=this.levels,r=0,i=n.length;r<i;r++){var a=n[r];t.object.levels.push({object:a.object.uuid,distance:a.distance})}return t}});function zr(e,t){if(e=e||[],this.bones=e.slice(0),this.boneMatrices=new Float32Array(this.bones.length*16),t===void 0)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new ue)}}Object.assign(zr.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var n=new ue;this.bones[e]&&n.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(n)}},pose:function(){var e,t,n;for(t=0,n=this.bones.length;t<n;t++)e=this.bones[t],e&&e.matrixWorld.getInverse(this.boneInverses[t]);for(t=0,n=this.bones.length;t<n;t++)e=this.bones[t],e&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:function(){var e=new ue,t=new ue;return function(){for(var r=this.bones,i=this.boneInverses,a=this.boneMatrices,o=this.boneTexture,s=0,c=r.length;s<c;s++){var h=r[s]?r[s].matrixWorld:t;e.multiplyMatrices(h,i[s]),e.toArray(a,s*16)}o!==void 0&&(o.needsUpdate=!0)}}(),clone:function(){return new zr(this.bones,this.boneInverses)}});function Ji(){J.call(this),this.type="Bone"}Ji.prototype=Object.assign(Object.create(J.prototype),{constructor:Ji,isBone:!0});function Qi(e,t){Ke.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new ue,this.bindMatrixInverse=new ue;var n=this.initBones(),r=new zr(n);this.bind(r,this.matrixWorld),this.normalizeSkinWeights()}Qi.prototype=Object.assign(Object.create(Ke.prototype),{constructor:Qi,isSkinnedMesh:!0,initBones:function(){var e=[],t,n,r,i;if(this.geometry&&this.geometry.bones!==void 0){for(r=0,i=this.geometry.bones.length;r<i;r++)n=this.geometry.bones[r],t=new Ji,e.push(t),t.name=n.name,t.position.fromArray(n.pos),t.quaternion.fromArray(n.rotq),n.scl!==void 0&&t.scale.fromArray(n.scl);for(r=0,i=this.geometry.bones.length;r<i;r++)n=this.geometry.bones[r],n.parent!==-1&&n.parent!==null&&e[n.parent]!==void 0?e[n.parent].add(e[r]):this.add(e[r])}return this.updateMatrixWorld(!0),e},bind:function(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){var e,t;if(this.geometry&&this.geometry.isGeometry)for(t=0;t<this.geometry.skinWeights.length;t++){var n=this.geometry.skinWeights[t];e=1/n.lengthManhattan(),e!==1/0?n.multiplyScalar(e):n.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry){var r=new Ce,i=this.geometry.attributes.skinWeight;for(t=0;t<i.count;t++)r.x=i.getX(t),r.y=i.getY(t),r.z=i.getZ(t),r.w=i.getW(t),e=1/r.lengthManhattan(),e!==1/0?r.multiplyScalar(e):r.set(1,0,0,0),i.setXYZW(t,r.x,r.y,r.z,r.w)}},updateMatrixWorld:function(e){Ke.prototype.updateMatrixWorld.call(this,e),this.bindMode==="attached"?this.bindMatrixInverse.getInverse(this.matrixWorld):this.bindMode==="detached"?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function Ue(e){ge.call(this),this.type="LineBasicMaterial",this.color=new ie(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(e)}Ue.prototype=Object.create(ge.prototype);Ue.prototype.constructor=Ue;Ue.prototype.isLineBasicMaterial=!0;Ue.prototype.copy=function(e){return ge.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this};function rt(e,t,n){if(n===1)return console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new Be(e,t);J.call(this),this.type="Line",this.geometry=e!==void 0?e:new te,this.material=t!==void 0?t:new Ue({color:Math.random()*16777215})}rt.prototype=Object.assign(Object.create(J.prototype),{constructor:rt,isLine:!0,raycast:function(){var e=new ue,t=new wn,n=new gt;return function(i,a){var o=i.linePrecision,s=o*o,c=this.geometry,h=this.matrixWorld;if(c.boundingSphere===null&&c.computeBoundingSphere(),n.copy(c.boundingSphere),n.applyMatrix4(h),i.ray.intersectsSphere(n)!==!1){e.getInverse(h),t.copy(i.ray).applyMatrix4(e);var u=new T,l=new T,f=new T,d=new T,p=this&&this.isLineSegments?2:1;if(c.isBufferGeometry){var y=c.index,x=c.attributes,m=x.position.array;if(y!==null)for(var v=y.array,g=0,_=v.length-1;g<_;g+=p){var M=v[g],w=v[g+1];u.fromArray(m,M*3),l.fromArray(m,w*3);var A=t.distanceSqToSegment(u,l,d,f);if(!(A>s)){d.applyMatrix4(this.matrixWorld);var P=i.ray.origin.distanceTo(d);P<i.near||P>i.far||a.push({distance:P,point:f.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this})}}else for(var g=0,_=m.length/3-1;g<_;g+=p){u.fromArray(m,3*g),l.fromArray(m,3*g+3);var A=t.distanceSqToSegment(u,l,d,f);if(!(A>s)){d.applyMatrix4(this.matrixWorld);var P=i.ray.origin.distanceTo(d);P<i.near||P>i.far||a.push({distance:P,point:f.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this})}}}else if(c.isGeometry)for(var S=c.vertices,C=S.length,g=0;g<C-1;g+=p){var A=t.distanceSqToSegment(S[g],S[g+1],d,f);if(!(A>s)){d.applyMatrix4(this.matrixWorld);var P=i.ray.origin.distanceTo(d);P<i.near||P>i.far||a.push({distance:P,point:f.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this})}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function Be(e,t){rt.call(this,e,t),this.type="LineSegments"}Be.prototype=Object.assign(Object.create(rt.prototype),{constructor:Be,isLineSegments:!0});function Ki(e,t){rt.call(this,e,t),this.type="LineLoop"}Ki.prototype=Object.assign(Object.create(rt.prototype),{constructor:Ki,isLineLoop:!0});function Ot(e){ge.call(this),this.type="PointsMaterial",this.color=new ie(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=!1,this.setValues(e)}Ot.prototype=Object.create(ge.prototype);Ot.prototype.constructor=Ot;Ot.prototype.isPointsMaterial=!0;Ot.prototype.copy=function(e){return ge.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this};function Gr(e,t){J.call(this),this.type="Points",this.geometry=e!==void 0?e:new te,this.material=t!==void 0?t:new Ot({color:Math.random()*16777215})}Gr.prototype=Object.assign(Object.create(J.prototype),{constructor:Gr,isPoints:!0,raycast:function(){var e=new ue,t=new wn,n=new gt;return function(i,a){var o=this,s=this.geometry,c=this.matrixWorld,h=i.params.Points.threshold;if(s.boundingSphere===null&&s.computeBoundingSphere(),n.copy(s.boundingSphere),n.applyMatrix4(c),n.radius+=h,i.ray.intersectsSphere(n)===!1)return;e.getInverse(c),t.copy(i.ray).applyMatrix4(e);var u=h/((this.scale.x+this.scale.y+this.scale.z)/3),l=u*u,f=new T;function d(A,P){var S=t.distanceSqToPoint(A);if(S<l){var C=t.closestPointToPoint(A);C.applyMatrix4(c);var D=i.ray.origin.distanceTo(C);if(D<i.near||D>i.far)return;a.push({distance:D,distanceToRay:Math.sqrt(S),point:C.clone(),index:P,face:null,object:o})}}if(s.isBufferGeometry){var p=s.index,y=s.attributes,x=y.position.array;if(p!==null)for(var m=p.array,v=0,g=m.length;v<g;v++){var _=m[v];f.fromArray(x,_*3),d(f,_)}else for(var v=0,M=x.length/3;v<M;v++)f.fromArray(x,v*3),d(f,v)}else for(var w=s.vertices,v=0,M=w.length;v<M;v++)d(w[v],v)}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function Hn(){J.call(this),this.type="Group"}Hn.prototype=Object.assign(Object.create(J.prototype),{constructor:Hn});function $i(e,t,n,r,i,a,o,s,c){De.call(this,e,t,n,r,i,a,o,s,c),this.generateMipmaps=!1;var h=this;function u(){requestAnimationFrame(u),e.readyState>=e.HAVE_CURRENT_DATA&&(h.needsUpdate=!0)}u()}$i.prototype=Object.create(De.prototype);$i.prototype.constructor=$i;function Vn(e,t,n,r,i,a,o,s,c,h,u,l){De.call(this,null,a,o,s,c,h,r,i,u,l),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}Vn.prototype=Object.create(De.prototype);Vn.prototype.constructor=Vn;Vn.prototype.isCompressedTexture=!0;function Hr(e,t,n,r,i,a,o,s,c,h){if(h=h!==void 0?h:en,h!==en&&h!==Fn)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&h===en&&(n=Rr),n===void 0&&h===Fn&&(n=Pr),De.call(this,null,r,i,a,o,s,h,n,c),this.image={width:e,height:t},this.magFilter=o!==void 0?o:ht,this.minFilter=s!==void 0?s:ht,this.flipY=!1,this.generateMipmaps=!1}Hr.prototype=Object.create(De.prototype);Hr.prototype.constructor=Hr;Hr.prototype.isDepthTexture=!0;function Vr(e){te.call(this),this.type="WireframeGeometry";var t=[],n,r,i,a,o,s=[0,0],c={},h,u,l,f,d=["a","b","c"],p;if(e&&e.isGeometry){var y=e.faces;for(n=0,i=y.length;n<i;n++){var x=y[n];for(r=0;r<3;r++)u=x[d[r]],l=x[d[(r+1)%3]],s[0]=Math.min(u,l),s[1]=Math.max(u,l),f=s[0]+","+s[1],c[f]===void 0&&(c[f]={index1:s[0],index2:s[1]})}for(f in c)h=c[f],p=e.vertices[h.index1],t.push(p.x,p.y,p.z),p=e.vertices[h.index2],t.push(p.x,p.y,p.z)}else if(e&&e.isBufferGeometry){var m,v,g,_,M,w,A,P;if(p=new T,e.index!==null){for(m=e.attributes.position,v=e.index,g=e.groups,g.length===0&&(g=[{start:0,count:v.count,materialIndex:0}]),a=0,o=g.length;a<o;++a)for(_=g[a],M=_.start,w=_.count,n=M,i=M+w;n<i;n+=3)for(r=0;r<3;r++)u=v.getX(n+r),l=v.getX(n+(r+1)%3),s[0]=Math.min(u,l),s[1]=Math.max(u,l),f=s[0]+","+s[1],c[f]===void 0&&(c[f]={index1:s[0],index2:s[1]});for(f in c)h=c[f],p.fromBufferAttribute(m,h.index1),t.push(p.x,p.y,p.z),p.fromBufferAttribute(m,h.index2),t.push(p.x,p.y,p.z)}else for(m=e.attributes.position,n=0,i=m.count/3;n<i;n++)for(r=0;r<3;r++)A=3*n+r,p.fromBufferAttribute(m,A),t.push(p.x,p.y,p.z),P=3*n+(r+1)%3,p.fromBufferAttribute(m,P),t.push(p.x,p.y,p.z)}this.addAttribute("position",new Z(t,3))}Vr.prototype=Object.create(te.prototype);Vr.prototype.constructor=Vr;function kr(e,t,n){le.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n},this.fromBufferGeometry(new kn(e,t,n)),this.mergeVertices()}kr.prototype=Object.create(le.prototype);kr.prototype.constructor=kr;function kn(e,t,n){te.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:n};var r=[],i=[],a=[],o=[],s=1e-5,c=new T,h=new T,u=new T,l=new T,f=new T,d,p,y=t+1;for(d=0;d<=n;d++){var x=d/n;for(p=0;p<=t;p++){var m=p/t;h=e(m,x,h),i.push(h.x,h.y,h.z),m-s>=0?(u=e(m-s,x,u),l.subVectors(h,u)):(u=e(m+s,x,u),l.subVectors(u,h)),x-s>=0?(u=e(m,x-s,u),f.subVectors(h,u)):(u=e(m,x+s,u),f.subVectors(u,h)),c.crossVectors(l,f).normalize(),a.push(c.x,c.y,c.z),o.push(m,x)}}for(d=0;d<n;d++)for(p=0;p<t;p++){var v=d*y+p,g=d*y+p+1,_=(d+1)*y+p+1,M=(d+1)*y+p;r.push(v,g,M),r.push(g,_,M)}this.setIndex(r),this.addAttribute("position",new Z(i,3)),this.addAttribute("normal",new Z(a,3)),this.addAttribute("uv",new Z(o,2))}kn.prototype=Object.create(te.prototype);kn.prototype.constructor=kn;function Wr(e,t,n,r){le.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r},this.fromBufferGeometry(new it(e,t,n,r)),this.mergeVertices()}Wr.prototype=Object.create(le.prototype);Wr.prototype.constructor=Wr;function it(e,t,n,r){te.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r},n=n||1,r=r||0;var i=[],a=[];o(r),c(n),h(),this.addAttribute("position",new Z(i,3)),this.addAttribute("normal",new Z(i.slice(),3)),this.addAttribute("uv",new Z(a,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function o(m){for(var v=new T,g=new T,_=new T,M=0;M<t.length;M+=3)f(t[M+0],v),f(t[M+1],g),f(t[M+2],_),s(v,g,_,m)}function s(m,v,g,_){var M=Math.pow(2,_),w=[],A,P;for(A=0;A<=M;A++){w[A]=[];var S=m.clone().lerp(g,A/M),C=v.clone().lerp(g,A/M),D=M-A;for(P=0;P<=D;P++)P===0&&A===M?w[A][P]=S:w[A][P]=S.clone().lerp(C,P/D)}for(A=0;A<M;A++)for(P=0;P<2*(M-A)-1;P++){var H=Math.floor(P/2);P%2===0?(l(w[A][H+1]),l(w[A+1][H]),l(w[A][H])):(l(w[A][H+1]),l(w[A+1][H+1]),l(w[A+1][H]))}}function c(m){for(var v=new T,g=0;g<i.length;g+=3)v.x=i[g+0],v.y=i[g+1],v.z=i[g+2],v.normalize().multiplyScalar(m),i[g+0]=v.x,i[g+1]=v.y,i[g+2]=v.z}function h(){for(var m=new T,v=0;v<i.length;v+=3){m.x=i[v+0],m.y=i[v+1],m.z=i[v+2];var g=y(m)/2/Math.PI+.5,_=x(m)/Math.PI+.5;a.push(g,1-_)}d(),u()}function u(){for(var m=0;m<a.length;m+=6){var v=a[m+0],g=a[m+2],_=a[m+4],M=Math.max(v,g,_),w=Math.min(v,g,_);M>.9&&w<.1&&(v<.2&&(a[m+0]+=1),g<.2&&(a[m+2]+=1),_<.2&&(a[m+4]+=1))}}function l(m){i.push(m.x,m.y,m.z)}function f(m,v){var g=m*3;v.x=e[g+0],v.y=e[g+1],v.z=e[g+2]}function d(){for(var m=new T,v=new T,g=new T,_=new T,M=new q,w=new q,A=new q,P=0,S=0;P<i.length;P+=9,S+=6){m.set(i[P+0],i[P+1],i[P+2]),v.set(i[P+3],i[P+4],i[P+5]),g.set(i[P+6],i[P+7],i[P+8]),M.set(a[S+0],a[S+1]),w.set(a[S+2],a[S+3]),A.set(a[S+4],a[S+5]),_.copy(m).add(v).add(g).divideScalar(3);var C=y(_);p(M,S+0,m,C),p(w,S+2,v,C),p(A,S+4,g,C)}}function p(m,v,g,_){_<0&&m.x===1&&(a[v]=m.x-1),g.x===0&&g.z===0&&(a[v]=_/2/Math.PI+.5)}function y(m){return Math.atan2(m.z,-m.x)}function x(m){return Math.atan2(-m.y,Math.sqrt(m.x*m.x+m.z*m.z))}}it.prototype=Object.create(te.prototype);it.prototype.constructor=it;function Xr(e,t){le.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Wn(e,t)),this.mergeVertices()}Xr.prototype=Object.create(le.prototype);Xr.prototype.constructor=Xr;function Wn(e,t){var n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];it.call(this,n,r,e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}Wn.prototype=Object.create(it.prototype);Wn.prototype.constructor=Wn;function jr(e,t){le.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new hn(e,t)),this.mergeVertices()}jr.prototype=Object.create(le.prototype);jr.prototype.constructor=jr;function hn(e,t){var n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];it.call(this,n,r,e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}hn.prototype=Object.create(it.prototype);hn.prototype.constructor=hn;function Yr(e,t){le.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Xn(e,t)),this.mergeVertices()}Yr.prototype=Object.create(le.prototype);Yr.prototype.constructor=Yr;function Xn(e,t){var n=(1+Math.sqrt(5))/2,r=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],i=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];it.call(this,r,i,e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}Xn.prototype=Object.create(it.prototype);Xn.prototype.constructor=Xn;function qr(e,t){le.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new jn(e,t)),this.mergeVertices()}qr.prototype=Object.create(le.prototype);qr.prototype.constructor=qr;function jn(e,t){var n=(1+Math.sqrt(5))/2,r=1/n,i=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];it.call(this,i,a,e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}jn.prototype=Object.create(it.prototype);jn.prototype.constructor=jn;function Zr(e,t,n,r,i,a){le.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i},a!==void 0&&console.warn("THREE.TubeGeometry: taper has been removed.");var o=new Yn(e,t,n,r,i);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals,this.fromBufferGeometry(o),this.mergeVertices()}Zr.prototype=Object.create(le.prototype);Zr.prototype.constructor=Zr;function Yn(e,t,n,r,i){te.call(this),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i},t=t||64,n=n||1,r=r||8,i=i||!1;var a=e.computeFrenetFrames(t,i);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;var o=new T,s=new T,c=new q,h,u,l=[],f=[],d=[],p=[];y(),this.setIndex(p),this.addAttribute("position",new Z(l,3)),this.addAttribute("normal",new Z(f,3)),this.addAttribute("uv",new Z(d,2));function y(){for(h=0;h<t;h++)x(h);x(i===!1?t:0),v(),m()}function x(g){var _=e.getPointAt(g/t),M=a.normals[g],w=a.binormals[g];for(u=0;u<=r;u++){var A=u/r*Math.PI*2,P=Math.sin(A),S=-Math.cos(A);s.x=S*M.x+P*w.x,s.y=S*M.y+P*w.y,s.z=S*M.z+P*w.z,s.normalize(),f.push(s.x,s.y,s.z),o.x=_.x+n*s.x,o.y=_.y+n*s.y,o.z=_.z+n*s.z,l.push(o.x,o.y,o.z)}}function m(){for(u=1;u<=t;u++)for(h=1;h<=r;h++){var g=(r+1)*(u-1)+(h-1),_=(r+1)*u+(h-1),M=(r+1)*u+h,w=(r+1)*(u-1)+h;p.push(g,_,w),p.push(_,M,w)}}function v(){for(h=0;h<=t;h++)for(u=0;u<=r;u++)c.x=h/t,c.y=u/r,d.push(c.x,c.y)}}Yn.prototype=Object.create(te.prototype);Yn.prototype.constructor=Yn;function Jr(e,t,n,r,i,a,o){le.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:a},o!==void 0&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new qn(e,t,n,r,i,a)),this.mergeVertices()}Jr.prototype=Object.create(le.prototype);Jr.prototype.constructor=Jr;function qn(e,t,n,r,i,a){te.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:a},e=e||100,t=t||40,n=Math.floor(n)||64,r=Math.floor(r)||8,i=i||2,a=a||3;var o=[],s=[],c=[],h=[],u,l,f=new T,d=new T,p=new T,y=new T,x=new T,m=new T,v=new T;for(u=0;u<=n;++u){var g=u/n*i*Math.PI*2;for(D(g,i,a,e,p),D(g+.01,i,a,e,y),m.subVectors(y,p),v.addVectors(y,p),x.crossVectors(m,v),v.crossVectors(x,m),x.normalize(),v.normalize(),l=0;l<=r;++l){var _=l/r*Math.PI*2,M=-t*Math.cos(_),w=t*Math.sin(_);f.x=p.x+(M*v.x+w*x.x),f.y=p.y+(M*v.y+w*x.y),f.z=p.z+(M*v.z+w*x.z),s.push(f.x,f.y,f.z),d.subVectors(f,p).normalize(),c.push(d.x,d.y,d.z),h.push(u/n),h.push(l/r)}}for(l=1;l<=n;l++)for(u=1;u<=r;u++){var A=(r+1)*(l-1)+(u-1),P=(r+1)*l+(u-1),S=(r+1)*l+u,C=(r+1)*(l-1)+u;o.push(A,P,C),o.push(P,S,C)}this.setIndex(o),this.addAttribute("position",new Z(s,3)),this.addAttribute("normal",new Z(c,3)),this.addAttribute("uv",new Z(h,2));function D(H,L,E,B,I){var N=Math.cos(H),z=Math.sin(H),V=E/L*H,W=Math.cos(V);I.x=B*(2+W)*.5*N,I.y=B*(2+W)*z*.5,I.z=B*Math.sin(V)*.5}}qn.prototype=Object.create(te.prototype);qn.prototype.constructor=qn;function Qr(e,t,n,r,i){le.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},this.fromBufferGeometry(new Zn(e,t,n,r,i)),this.mergeVertices()}Qr.prototype=Object.create(le.prototype);Qr.prototype.constructor=Qr;function Zn(e,t,n,r,i){te.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},e=e||100,t=t||40,n=Math.floor(n)||8,r=Math.floor(r)||6,i=i||Math.PI*2;var a=[],o=[],s=[],c=[],h=new T,u=new T,l=new T,f,d;for(f=0;f<=n;f++)for(d=0;d<=r;d++){var p=d/r*i,y=f/n*Math.PI*2;u.x=(e+t*Math.cos(y))*Math.cos(p),u.y=(e+t*Math.cos(y))*Math.sin(p),u.z=t*Math.sin(y),o.push(u.x,u.y,u.z),h.x=e*Math.cos(p),h.y=e*Math.sin(p),l.subVectors(u,h).normalize(),s.push(l.x,l.y,l.z),c.push(d/r),c.push(f/n)}for(f=1;f<=n;f++)for(d=1;d<=r;d++){var x=(r+1)*f+d-1,m=(r+1)*(f-1)+d-1,v=(r+1)*(f-1)+d,g=(r+1)*f+d;a.push(x,m,g),a.push(m,v,g)}this.setIndex(a),this.addAttribute("position",new Z(o,3)),this.addAttribute("normal",new Z(s,3)),this.addAttribute("uv",new Z(c,2))}Zn.prototype=Object.create(te.prototype);Zn.prototype.constructor=Zn;var vt={area:function(e){for(var t=e.length,n=0,r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return n*.5},triangulate:function(){function e(t,n,r,i,a,o){var s,c,h,u,l,f,d,p,y;if(c=t[o[n]].x,h=t[o[n]].y,u=t[o[r]].x,l=t[o[r]].y,f=t[o[i]].x,d=t[o[i]].y,(u-c)*(d-h)-(l-h)*(f-c)<=0)return!1;var x,m,v,g,_,M,w,A,P,S,C,D,H,L,E;for(x=f-u,m=d-l,v=c-f,g=h-d,_=u-c,M=l-h,s=0;s<a;s++)if(p=t[o[s]].x,y=t[o[s]].y,!(p===c&&y===h||p===u&&y===l||p===f&&y===d)&&(w=p-c,A=y-h,P=p-u,S=y-l,C=p-f,D=y-d,E=x*S-m*P,H=_*A-M*w,L=v*D-g*C,E>=-Number.EPSILON&&L>=-Number.EPSILON&&H>=-Number.EPSILON))return!1;return!0}return function(n,r){var i=n.length;if(i<3)return null;var a=[],o=[],s=[],c,h,u;if(vt.area(n)>0)for(h=0;h<i;h++)o[h]=h;else for(h=0;h<i;h++)o[h]=i-1-h;var l=i,f=2*l;for(h=l-1;l>2;){if(f--<=0)return console.warn("THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()"),r?s:a;if(c=h,l<=c&&(c=0),h=c+1,l<=h&&(h=0),u=h+1,l<=u&&(u=0),e(n,c,h,u,l,o)){var d,p,y,x,m;for(d=o[c],p=o[h],y=o[u],a.push([n[d],n[p],n[y]]),s.push([o[c],o[h],o[u]]),x=h,m=h+1;m<l;x++,m++)o[x]=o[m];l--,f=2*l}}return r?s:a}}(),triangulateShape:function(e,t){function n(g){var _=g.length;_>2&&g[_-1].equals(g[0])&&g.pop()}n(e),t.forEach(n);function r(g,_,M){return g.x!==_.x?g.x<_.x?g.x<=M.x&&M.x<=_.x:_.x<=M.x&&M.x<=g.x:g.y<_.y?g.y<=M.y&&M.y<=_.y:_.y<=M.y&&M.y<=g.y}function i(g,_,M,w,A){var P=_.x-g.x,S=_.y-g.y,C=w.x-M.x,D=w.y-M.y,H=g.x-M.x,L=g.y-M.y,E=S*C-P*D,B=S*H-P*L;if(Math.abs(E)>Number.EPSILON){var I;if(E>0){if(B<0||B>E)return[];if(I=D*H-C*L,I<0||I>E)return[]}else{if(B>0||B<E)return[];if(I=D*H-C*L,I>0||I<E)return[]}if(I===0)return A&&(B===0||B===E)?[]:[g];if(I===E)return A&&(B===0||B===E)?[]:[_];if(B===0)return[M];if(B===E)return[w];var N=I/E;return[{x:g.x+N*P,y:g.y+N*S}]}else{if(B!==0||D*H!==C*L)return[];var z=P===0&&S===0,V=C===0&&D===0;if(z&&V)return g.x!==M.x||g.y!==M.y?[]:[g];if(z)return r(M,w,g)?[g]:[];if(V)return r(g,_,M)?[M]:[];var W,X,Y,j,re,O,ae,G;return P!==0?(g.x<_.x?(W=g,Y=g.x,X=_,j=_.x):(W=_,Y=_.x,X=g,j=g.x),M.x<w.x?(re=M,ae=M.x,O=w,G=w.x):(re=w,ae=w.x,O=M,G=M.x)):(g.y<_.y?(W=g,Y=g.y,X=_,j=_.y):(W=_,Y=_.y,X=g,j=g.y),M.y<w.y?(re=M,ae=M.y,O=w,G=w.y):(re=w,ae=w.y,O=M,G=M.y)),Y<=ae?j<ae?[]:j===ae?A?[]:[re]:j<=G?[re,X]:[re,O]:Y>G?[]:Y===G?A?[]:[W]:j<=G?[W,X]:[W,O]}}function a(g,_,M,w){var A=_.x-g.x,P=_.y-g.y,S=M.x-g.x,C=M.y-g.y,D=w.x-g.x,H=w.y-g.y,L=A*C-P*S,E=A*H-P*D;if(Math.abs(L)>Number.EPSILON){var B=D*C-H*S;return L>0?E>=0&&B>=0:E>=0||B>=0}else return E>0}function o(g,_){var M=g.concat(),w;function A(G,fe){var K=M.length-1,pe=G-1;pe<0&&(pe=K);var Te=G+1;Te>K&&(Te=0);var Ie=a(M[G],M[pe],M[Te],w[fe]);if(!Ie)return!1;var Oe=w.length-1,He=fe-1;He<0&&(He=Oe);var Se=fe+1;return Se>Oe&&(Se=0),Ie=a(w[fe],w[He],w[Se],M[G]),!!Ie}function P(G,fe){var K,pe,Te;for(K=0;K<M.length;K++)if(pe=K+1,pe%=M.length,Te=i(G,fe,M[K],M[pe],!0),Te.length>0)return!0;return!1}var S=[];function C(G,fe){var K,pe,Te,Ie,Oe;for(K=0;K<S.length;K++)for(pe=_[S[K]],Te=0;Te<pe.length;Te++)if(Ie=Te+1,Ie%=pe.length,Oe=i(G,fe,pe[Te],pe[Ie],!0),Oe.length>0)return!0;return!1}for(var D,H,L,E,B,I,N=[],z,V,W,X,Y=0,j=_.length;Y<j;Y++)S.push(Y);for(var re=0,O=S.length*2;S.length>0;){if(O--,O<0){console.log('THREE.ShapeUtils: Infinite Loop! Holes left:" + indepHoles.length + ", Probably Hole outside Shape!');break}for(H=re;H<M.length;H++){L=M[H],D=-1;for(var Y=0;Y<S.length;Y++)if(B=S[Y],I=L.x+":"+L.y+":"+B,N[I]===void 0){w=_[B];for(var ae=0;ae<w.length;ae++)if(E=w[ae],!!A(H,ae)&&!P(L,E)&&!C(L,E)){D=ae,S.splice(Y,1),z=M.slice(0,H+1),V=M.slice(H),W=w.slice(D),X=w.slice(0,D+1),M=z.concat(W).concat(X).concat(V),re=H;break}if(D>=0)break;N[I]=!0}if(D>=0)break}}return M}for(var s,c,h,u,l,f,d={},p=e.concat(),y=0,x=t.length;y<x;y++)Array.prototype.push.apply(p,t[y]);for(s=0,c=p.length;s<c;s++)l=p[s].x+":"+p[s].y,d[l]!==void 0&&console.warn("THREE.ShapeUtils: Duplicate point",l,s),d[l]=s;var m=o(e,t),v=vt.triangulate(m,!1);for(s=0,c=v.length;s<c;s++)for(u=v[s],h=0;h<3;h++)l=u[h].x+":"+u[h].y,f=d[l],f!==void 0&&(u[h]=f);return v.concat()},isClockWise:function(e){return vt.area(e)<0}};function Yt(e,t){le.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new bt(e,t)),this.mergeVertices()}Yt.prototype=Object.create(le.prototype);Yt.prototype.constructor=Yt;function bt(e,t){typeof e>"u"||(te.call(this),this.type="ExtrudeBufferGeometry",e=Array.isArray(e)?e:[e],this.addShapeList(e,t),this.computeVertexNormals())}bt.prototype=Object.create(te.prototype);bt.prototype.constructor=bt;bt.prototype.getArrays=function(){var e=this.getAttribute("position"),t=e?Array.prototype.slice.call(e.array):[],n=this.getAttribute("uv"),r=n?Array.prototype.slice.call(n.array):[],i=this.index,a=i?Array.prototype.slice.call(i.array):[];return{position:t,uv:r,index:a}};bt.prototype.addShapeList=function(e,t){var n=e.length;t.arrays=this.getArrays();for(var r=0;r<n;r++){var i=e[r];this.addShape(i,t)}this.setIndex(t.arrays.index),this.addAttribute("position",new Z(t.arrays.position,3)),this.addAttribute("uv",new Z(t.arrays.uv,2))};bt.prototype.addShape=function(e,t){var n=t.arrays?t.arrays:this.getArrays(),r=n.position,i=n.index,a=n.uv,o=[],s=t.amount!==void 0?t.amount:100,c=t.bevelThickness!==void 0?t.bevelThickness:6,h=t.bevelSize!==void 0?t.bevelSize:c-2,u=t.bevelSegments!==void 0?t.bevelSegments:3,l=t.bevelEnabled!==void 0?t.bevelEnabled:!0,f=t.curveSegments!==void 0?t.curveSegments:12,d=t.steps!==void 0?t.steps:1,p=t.extrudePath,y,x=!1,m=t.UVGenerator!==void 0?t.UVGenerator:Yt.WorldUVGenerator,v,g,_,M;p&&(y=p.getSpacedPoints(d),x=!0,l=!1,v=t.frames!==void 0?t.frames:p.computeFrenetFrames(d,!1),g=new T,_=new T,M=new T),l||(u=0,c=0,h=0);var w,A,P,S=this,C=e.extractPoints(f),D=C.shape,H=C.holes,L=!vt.isClockWise(D);if(L)for(D=D.reverse(),A=0,P=H.length;A<P;A++)w=H[A],vt.isClockWise(w)&&(H[A]=w.reverse());var E=vt.triangulateShape(D,H),B=D;for(A=0,P=H.length;A<P;A++)w=H[A],D=D.concat(w);function I(be,F,Q){return F||console.error("THREE.ExtrudeGeometry: vec does not exist"),F.clone().multiplyScalar(Q).add(be)}var N,z,V,W,X,Y=D.length,j,re=E.length;function O(be,F,Q){var ee,ye,oe,we=be.x-F.x,Ae=be.y-F.y,Le=Q.x-be.x,Ne=Q.y-be.y,Ee=we*we+Ae*Ae,$e=we*Ne-Ae*Le;if(Math.abs($e)>Number.EPSILON){var Je=Math.sqrt(Ee),wr=Math.sqrt(Le*Le+Ne*Ne),En=F.x-Ae/Je,Tn=F.y+we/Je,Qt=Q.x-Ne/wr,Mr=Q.y+Le/wr,Kt=((Qt-En)*Ne-(Mr-Tn)*Le)/(we*Ne-Ae*Le);ee=En+we*Kt-be.x,ye=Tn+Ae*Kt-be.y;var Sn=ee*ee+ye*ye;if(Sn<=2)return new q(ee,ye);oe=Math.sqrt(Sn/2)}else{var at=!1;we>Number.EPSILON?Le>Number.EPSILON&&(at=!0):we<-Number.EPSILON?Le<-Number.EPSILON&&(at=!0):Math.sign(Ae)===Math.sign(Ne)&&(at=!0),at?(ee=-Ae,ye=we,oe=Math.sqrt(Ee)):(ee=we,ye=Ae,oe=Math.sqrt(Ee/2))}return new q(ee/oe,ye/oe)}for(var ae=[],G=0,fe=B.length,K=fe-1,pe=G+1;G<fe;G++,K++,pe++)K===fe&&(K=0),pe===fe&&(pe=0),ae[G]=O(B[G],B[K],B[pe]);var Te=[],Ie,Oe=ae.concat();for(A=0,P=H.length;A<P;A++){for(w=H[A],Ie=[],G=0,fe=w.length,K=fe-1,pe=G+1;G<fe;G++,K++,pe++)K===fe&&(K=0),pe===fe&&(pe=0),Ie[G]=O(w[G],w[K],w[pe]);Te.push(Ie),Oe=Oe.concat(Ie)}for(N=0;N<u;N++){for(V=N/u,W=c*Math.cos(V*Math.PI/2),z=h*Math.sin(V*Math.PI/2),G=0,fe=B.length;G<fe;G++)X=I(B[G],ae[G],z),We(X.x,X.y,-W);for(A=0,P=H.length;A<P;A++)for(w=H[A],Ie=Te[A],G=0,fe=w.length;G<fe;G++)X=I(w[G],Ie[G],z),We(X.x,X.y,-W)}for(z=h,G=0;G<Y;G++)X=l?I(D[G],Oe[G],z):D[G],x?(_.copy(v.normals[0]).multiplyScalar(X.x),g.copy(v.binormals[0]).multiplyScalar(X.y),M.copy(y[0]).add(_).add(g),We(M.x,M.y,M.z)):We(X.x,X.y,0);var He;for(He=1;He<=d;He++)for(G=0;G<Y;G++)X=l?I(D[G],Oe[G],z):D[G],x?(_.copy(v.normals[He]).multiplyScalar(X.x),g.copy(v.binormals[He]).multiplyScalar(X.y),M.copy(y[He]).add(_).add(g),We(M.x,M.y,M.z)):We(X.x,X.y,s/d*He);for(N=u-1;N>=0;N--){for(V=N/u,W=c*Math.cos(V*Math.PI/2),z=h*Math.sin(V*Math.PI/2),G=0,fe=B.length;G<fe;G++)X=I(B[G],ae[G],z),We(X.x,X.y,s+W);for(A=0,P=H.length;A<P;A++)for(w=H[A],Ie=Te[A],G=0,fe=w.length;G<fe;G++)X=I(w[G],Ie[G],z),x?We(X.x,X.y+y[d-1].y,y[d-1].x+W):We(X.x,X.y,s+W)}Se(),xt();function Se(){var be=r.length/3;if(l){var F=0,Q=Y*F;for(G=0;G<re;G++)j=E[G],Mt(j[2]+Q,j[1]+Q,j[0]+Q);for(F=d+u*2,Q=Y*F,G=0;G<re;G++)j=E[G],Mt(j[0]+Q,j[1]+Q,j[2]+Q)}else{for(G=0;G<re;G++)j=E[G],Mt(j[2],j[1],j[0]);for(G=0;G<re;G++)j=E[G],Mt(j[0]+Y*d,j[1]+Y*d,j[2]+Y*d)}S.addGroup(be,r.length/3-be,t.material!==void 0?t.material:0)}function xt(){var be=r.length/3,F=0;for(mt(B,F),F+=B.length,A=0,P=H.length;A<P;A++)w=H[A],mt(w,F),F+=w.length;S.addGroup(be,r.length/3-be,t.extrudeMaterial!==void 0?t.extrudeMaterial:1)}function mt(be,F){var Q,ee;for(G=be.length;--G>=0;){Q=G,ee=G-1,ee<0&&(ee=be.length-1);var ye=0,oe=d+u*2;for(ye=0;ye<oe;ye++){var we=Y*ye,Ae=Y*(ye+1),Le=F+Q+we,Ne=F+ee+we,Ee=F+ee+Ae,$e=F+Q+Ae;Jt(Le,Ne,Ee,$e)}}}function We(be,F,Q){o.push(be),o.push(F),o.push(Q)}function Mt(be,F,Q){qe(be),qe(F),qe(Q);var ee=r.length/3,ye=m.generateTopUV(S,r,ee-3,ee-2,ee-1);Ze(ye[0]),Ze(ye[1]),Ze(ye[2])}function Jt(be,F,Q,ee,ye,oe,we,Ae,Le){qe(be),qe(F),qe(ee),qe(F),qe(Q),qe(ee);var Ne=r.length/3,Ee=m.generateSideWallUV(S,r,Ne-6,Ne-3,Ne-2,Ne-1);Ze(Ee[0]),Ze(Ee[1]),Ze(Ee[3]),Ze(Ee[1]),Ze(Ee[2]),Ze(Ee[3])}function qe(be){i.push(r.length/3),r.push(o[be*3+0]),r.push(o[be*3+1]),r.push(o[be*3+2])}function Ze(be){a.push(be.x),a.push(be.y)}t.arrays||(this.setIndex(i),this.addAttribute("position",new Z(r,3)),this.addAttribute("uv",new Z(t.arrays.uv,2)))};Yt.WorldUVGenerator={generateTopUV:function(e,t,n,r,i){var a=t[n*3],o=t[n*3+1],s=t[r*3],c=t[r*3+1],h=t[i*3],u=t[i*3+1];return[new q(a,o),new q(s,c),new q(h,u)]},generateSideWallUV:function(e,t,n,r,i,a){var o=t[n*3],s=t[n*3+1],c=t[n*3+2],h=t[r*3],u=t[r*3+1],l=t[r*3+2],f=t[i*3],d=t[i*3+1],p=t[i*3+2],y=t[a*3],x=t[a*3+1],m=t[a*3+2];return Math.abs(s-u)<.01?[new q(o,1-c),new q(h,1-l),new q(f,1-p),new q(y,1-m)]:[new q(s,1-c),new q(u,1-l),new q(d,1-p),new q(x,1-m)]}};function Kr(e,t){le.call(this),this.type="TextGeometry",this.parameters={text:e,parameters:t},this.fromBufferGeometry(new Jn(e,t)),this.mergeVertices()}Kr.prototype=Object.create(le.prototype);Kr.prototype.constructor=Kr;function Jn(e,t){t=t||{};var n=t.font;if(!(n&&n.isFont))return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new le;var r=n.generateShapes(e,t.size,t.curveSegments);t.amount=t.height!==void 0?t.height:50,t.bevelThickness===void 0&&(t.bevelThickness=10),t.bevelSize===void 0&&(t.bevelSize=8),t.bevelEnabled===void 0&&(t.bevelEnabled=!1),bt.call(this,r,t),this.type="TextBufferGeometry"}Jn.prototype=Object.create(bt.prototype);Jn.prototype.constructor=Jn;function Qn(e,t,n,r,i,a,o){le.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:a,thetaLength:o},this.fromBufferGeometry(new un(e,t,n,r,i,a,o)),this.mergeVertices()}Qn.prototype=Object.create(le.prototype);Qn.prototype.constructor=Qn;function un(e,t,n,r,i,a,o){te.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:a,thetaLength:o},e=e||50,t=Math.max(3,Math.floor(t)||8),n=Math.max(2,Math.floor(n)||6),r=r!==void 0?r:0,i=i!==void 0?i:Math.PI*2,a=a!==void 0?a:0,o=o!==void 0?o:Math.PI;var s=a+o,c,h,u=0,l=[],f=new T,d=new T,p=[],y=[],x=[],m=[];for(h=0;h<=n;h++){var v=[],g=h/n;for(c=0;c<=t;c++){var _=c/t;f.x=-e*Math.cos(r+_*i)*Math.sin(a+g*o),f.y=e*Math.cos(a+g*o),f.z=e*Math.sin(r+_*i)*Math.sin(a+g*o),y.push(f.x,f.y,f.z),d.set(f.x,f.y,f.z).normalize(),x.push(d.x,d.y,d.z),m.push(_,1-g),v.push(u++)}l.push(v)}for(h=0;h<n;h++)for(c=0;c<t;c++){var M=l[h][c+1],w=l[h][c],A=l[h+1][c],P=l[h+1][c+1];(h!==0||a>0)&&p.push(M,w,P),(h!==n-1||s<Math.PI)&&p.push(w,A,P)}this.setIndex(p),this.addAttribute("position",new Z(y,3)),this.addAttribute("normal",new Z(x,3)),this.addAttribute("uv",new Z(m,2))}un.prototype=Object.create(te.prototype);un.prototype.constructor=un;function $r(e,t,n,r,i,a){le.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:a},this.fromBufferGeometry(new Kn(e,t,n,r,i,a)),this.mergeVertices()}$r.prototype=Object.create(le.prototype);$r.prototype.constructor=$r;function Kn(e,t,n,r,i,a){te.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:a},e=e||20,t=t||50,i=i!==void 0?i:0,a=a!==void 0?a:Math.PI*2,n=n!==void 0?Math.max(3,n):8,r=r!==void 0?Math.max(1,r):1;var o=[],s=[],c=[],h=[],u,l=e,f=(t-e)/r,d=new T,p=new q,y,x;for(y=0;y<=r;y++){for(x=0;x<=n;x++)u=i+x/n*a,d.x=l*Math.cos(u),d.y=l*Math.sin(u),s.push(d.x,d.y,d.z),c.push(0,0,1),p.x=(d.x/t+1)/2,p.y=(d.y/t+1)/2,h.push(p.x,p.y);l+=f}for(y=0;y<r;y++){var m=y*(n+1);for(x=0;x<n;x++){u=x+m;var v=u,g=u+n+1,_=u+n+2,M=u+1;o.push(v,g,M),o.push(g,_,M)}}this.setIndex(o),this.addAttribute("position",new Z(s,3)),this.addAttribute("normal",new Z(c,3)),this.addAttribute("uv",new Z(h,2))}Kn.prototype=Object.create(te.prototype);Kn.prototype.constructor=Kn;function ei(e,t,n,r){le.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},this.fromBufferGeometry(new $n(e,t,n,r)),this.mergeVertices()}ei.prototype=Object.create(le.prototype);ei.prototype.constructor=ei;function $n(e,t,n,r){te.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t)||12,n=n||0,r=r||Math.PI*2,r=me.clamp(r,0,Math.PI*2);var i=[],a=[],o=[],s,c=1/t,h=new T,u=new q,l,f;for(l=0;l<=t;l++){var d=n+l*c*r,p=Math.sin(d),y=Math.cos(d);for(f=0;f<=e.length-1;f++)h.x=e[f].x*p,h.y=e[f].y,h.z=e[f].x*y,a.push(h.x,h.y,h.z),u.x=l/t,u.y=f/(e.length-1),o.push(u.x,u.y)}for(l=0;l<t;l++)for(f=0;f<e.length-1;f++){s=f+l*e.length;var x=s,m=s+e.length,v=s+e.length+1,g=s+1;i.push(x,m,g),i.push(m,v,g)}if(this.setIndex(i),this.addAttribute("position",new Z(a,3)),this.addAttribute("uv",new Z(o,2)),this.computeVertexNormals(),r===Math.PI*2){var _=this.attributes.normal.array,M=new T,w=new T,A=new T;for(s=t*e.length*3,l=0,f=0;l<e.length;l++,f+=3)M.x=_[f+0],M.y=_[f+1],M.z=_[f+2],w.x=_[s+f+0],w.y=_[s+f+1],w.z=_[s+f+2],A.addVectors(M,w).normalize(),_[f+0]=_[s+f+0]=A.x,_[f+1]=_[s+f+1]=A.y,_[f+2]=_[s+f+2]=A.z}}$n.prototype=Object.create(te.prototype);$n.prototype.constructor=$n;function er(e,t){le.call(this),this.type="ShapeGeometry",typeof t=="object"&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new tr(e,t)),this.mergeVertices()}er.prototype=Object.create(le.prototype);er.prototype.constructor=er;function tr(e,t){te.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t},t=t||12;var n=[],r=[],i=[],a=[],o=0,s=0;if(Array.isArray(e)===!1)h(e);else for(var c=0;c<e.length;c++)h(e[c]),this.addGroup(o,s,c),o+=s,s=0;this.setIndex(n),this.addAttribute("position",new Z(r,3)),this.addAttribute("normal",new Z(i,3)),this.addAttribute("uv",new Z(a,2));function h(u){var l,f,d,p=r.length/3,y=u.extractPoints(t),x=y.shape,m=y.holes;if(vt.isClockWise(x)===!1)for(x=x.reverse(),l=0,f=m.length;l<f;l++)d=m[l],vt.isClockWise(d)===!0&&(m[l]=d.reverse());var v=vt.triangulateShape(x,m);for(l=0,f=m.length;l<f;l++)d=m[l],x=x.concat(d);for(l=0,f=x.length;l<f;l++){var g=x[l];r.push(g.x,g.y,0),i.push(0,0,1),a.push(g.x,g.y)}for(l=0,f=v.length;l<f;l++){var _=v[l],M=_[0]+p,w=_[1]+p,A=_[2]+p;n.push(M,w,A),s+=3}}}tr.prototype=Object.create(te.prototype);tr.prototype.constructor=tr;function ti(e,t){te.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=t!==void 0?t:1;var n=[],r=Math.cos(me.DEG2RAD*t),i=[0,0],a={},o,s,c,h=["a","b","c"],u;e.isBufferGeometry?(u=new le,u.fromBufferGeometry(e)):u=e.clone(),u.mergeVertices(),u.computeFaceNormals();for(var l=u.vertices,f=u.faces,d=0,p=f.length;d<p;d++)for(var y=f[d],x=0;x<3;x++)o=y[h[x]],s=y[h[(x+1)%3]],i[0]=Math.min(o,s),i[1]=Math.max(o,s),c=i[0]+","+i[1],a[c]===void 0?a[c]={index1:i[0],index2:i[1],face1:d,face2:void 0}:a[c].face2=d;for(c in a){var m=a[c];if(m.face2===void 0||f[m.face1].normal.dot(f[m.face2].normal)<=r){var v=l[m.index1];n.push(v.x,v.y,v.z),v=l[m.index2],n.push(v.x,v.y,v.z)}}this.addAttribute("position",new Z(n,3))}ti.prototype=Object.create(te.prototype);ti.prototype.constructor=ti;function ln(e,t,n,r,i,a,o,s){le.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:a,thetaStart:o,thetaLength:s},this.fromBufferGeometry(new Nt(e,t,n,r,i,a,o,s)),this.mergeVertices()}ln.prototype=Object.create(le.prototype);ln.prototype.constructor=ln;function Nt(e,t,n,r,i,a,o,s){te.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:a,thetaStart:o,thetaLength:s};var c=this;e=e!==void 0?e:20,t=t!==void 0?t:20,n=n!==void 0?n:100,r=Math.floor(r)||8,i=Math.floor(i)||1,a=a!==void 0?a:!1,o=o!==void 0?o:0,s=s!==void 0?s:2*Math.PI;var h=[],u=[],l=[],f=[],d=0,p=[],y=n/2,x=0;m(),a===!1&&(e>0&&v(!0),t>0&&v(!1)),this.setIndex(h),this.addAttribute("position",new Z(u,3)),this.addAttribute("normal",new Z(l,3)),this.addAttribute("uv",new Z(f,2));function m(){var g,_,M=new T,w=new T,A=0,P=(t-e)/n;for(_=0;_<=i;_++){var S=[],C=_/i,D=C*(t-e)+e;for(g=0;g<=r;g++){var H=g/r,L=H*s+o,E=Math.sin(L),B=Math.cos(L);w.x=D*E,w.y=-C*n+y,w.z=D*B,u.push(w.x,w.y,w.z),M.set(E,P,B).normalize(),l.push(M.x,M.y,M.z),f.push(H,1-C),S.push(d++)}p.push(S)}for(g=0;g<r;g++)for(_=0;_<i;_++){var I=p[_][g],N=p[_+1][g],z=p[_+1][g+1],V=p[_][g+1];h.push(I,N,V),h.push(N,z,V),A+=6}c.addGroup(x,A,0),x+=A}function v(g){var _,M,w,A=new q,P=new T,S=0,C=g===!0?e:t,D=g===!0?1:-1;for(M=d,_=1;_<=r;_++)u.push(0,y*D,0),l.push(0,D,0),f.push(.5,.5),d++;for(w=d,_=0;_<=r;_++){var H=_/r,L=H*s+o,E=Math.cos(L),B=Math.sin(L);P.x=C*B,P.y=y*D,P.z=C*E,u.push(P.x,P.y,P.z),l.push(0,D,0),A.x=E*.5+.5,A.y=B*.5*D+.5,f.push(A.x,A.y),d++}for(_=0;_<r;_++){var I=M+_,N=w+_;g===!0?h.push(N,N+1,I):h.push(N+1,N,I),S+=3}c.addGroup(x,S,g===!0?1:2),x+=S}}Nt.prototype=Object.create(te.prototype);Nt.prototype.constructor=Nt;function ni(e,t,n,r,i,a,o){ln.call(this,0,e,t,n,r,i,a,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:a,thetaLength:o}}ni.prototype=Object.create(ln.prototype);ni.prototype.constructor=ni;function ri(e,t,n,r,i,a,o){Nt.call(this,0,e,t,n,r,i,a,o),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:a,thetaLength:o}}ri.prototype=Object.create(Nt.prototype);ri.prototype.constructor=ri;function ii(e,t,n,r){le.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},this.fromBufferGeometry(new nr(e,t,n,r)),this.mergeVertices()}ii.prototype=Object.create(le.prototype);ii.prototype.constructor=ii;function nr(e,t,n,r){te.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},e=e||50,t=t!==void 0?Math.max(3,t):8,n=n!==void 0?n:0,r=r!==void 0?r:Math.PI*2;var i=[],a=[],o=[],s=[],c,h,u=new T,l=new q;for(a.push(0,0,0),o.push(0,0,1),s.push(.5,.5),h=0,c=3;h<=t;h++,c+=3){var f=n+h/t*r;u.x=e*Math.cos(f),u.y=e*Math.sin(f),a.push(u.x,u.y,u.z),o.push(0,0,1),l.x=(a[c]/e+1)/2,l.y=(a[c+1]/e+1)/2,s.push(l.x,l.y)}for(c=1;c<=t;c++)i.push(c,c+1,0);this.setIndex(i),this.addAttribute("position",new Z(a,3)),this.addAttribute("normal",new Z(o,3)),this.addAttribute("uv",new Z(s,2))}nr.prototype=Object.create(te.prototype);nr.prototype.constructor=nr;var ft=Object.freeze({WireframeGeometry:Vr,ParametricGeometry:kr,ParametricBufferGeometry:kn,TetrahedronGeometry:Xr,TetrahedronBufferGeometry:Wn,OctahedronGeometry:jr,OctahedronBufferGeometry:hn,IcosahedronGeometry:Yr,IcosahedronBufferGeometry:Xn,DodecahedronGeometry:qr,DodecahedronBufferGeometry:jn,PolyhedronGeometry:Wr,PolyhedronBufferGeometry:it,TubeGeometry:Zr,TubeBufferGeometry:Yn,TorusKnotGeometry:Jr,TorusKnotBufferGeometry:qn,TorusGeometry:Qr,TorusBufferGeometry:Zn,TextGeometry:Kr,TextBufferGeometry:Jn,SphereGeometry:Qn,SphereBufferGeometry:un,RingGeometry:$r,RingBufferGeometry:Kn,PlaneGeometry:Or,PlaneBufferGeometry:cn,LatheGeometry:ei,LatheBufferGeometry:$n,ShapeGeometry:er,ShapeBufferGeometry:tr,ExtrudeGeometry:Yt,ExtrudeBufferGeometry:bt,EdgesGeometry:ti,ConeGeometry:ni,ConeBufferGeometry:ri,CylinderGeometry:ln,CylinderBufferGeometry:Nt,CircleGeometry:ii,CircleBufferGeometry:nr,BoxGeometry:Fr,BoxBufferGeometry:sn});function rr(e){ge.call(this),this.type="ShadowMaterial",this.color=new ie(0),this.opacity=1,this.lights=!0,this.transparent=!0,this.setValues(e)}rr.prototype=Object.create(ge.prototype);rr.prototype.constructor=rr;rr.prototype.isShadowMaterial=!0;function ir(e){yt.call(this,e),this.type="RawShaderMaterial"}ir.prototype=Object.create(yt.prototype);ir.prototype.constructor=ir;ir.prototype.isRawShaderMaterial=!0;function St(e){ge.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new ie(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ie(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new q(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}St.prototype=Object.create(ge.prototype);St.prototype.constructor=St;St.prototype.isMeshStandardMaterial=!0;St.prototype.copy=function(e){return ge.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this};function fn(e){St.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(e)}fn.prototype=Object.create(St.prototype);fn.prototype.constructor=fn;fn.prototype.isMeshPhysicalMaterial=!0;fn.prototype.copy=function(e){return St.prototype.copy.call(this,e),this.defines={PHYSICAL:""},this.reflectivity=e.reflectivity,this.clearCoat=e.clearCoat,this.clearCoatRoughness=e.clearCoatRoughness,this};function wt(e){ge.call(this),this.type="MeshPhongMaterial",this.color=new ie(16777215),this.specular=new ie(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ie(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new q(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=_i,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}wt.prototype=Object.create(ge.prototype);wt.prototype.constructor=wt;wt.prototype.isMeshPhongMaterial=!0;wt.prototype.copy=function(e){return ge.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this};function dn(e){wt.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(e)}dn.prototype=Object.create(wt.prototype);dn.prototype.constructor=dn;dn.prototype.isMeshToonMaterial=!0;dn.prototype.copy=function(e){return wt.prototype.copy.call(this,e),this.gradientMap=e.gradientMap,this};function pn(e){ge.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new q(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}pn.prototype=Object.create(ge.prototype);pn.prototype.constructor=pn;pn.prototype.isMeshNormalMaterial=!0;pn.prototype.copy=function(e){return ge.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this};function yn(e){ge.call(this),this.type="MeshLambertMaterial",this.color=new ie(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ie(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=_i,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}yn.prototype=Object.create(ge.prototype);yn.prototype.constructor=yn;yn.prototype.isMeshLambertMaterial=!0;yn.prototype.copy=function(e){return ge.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this};function xn(e){Ue.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}xn.prototype=Object.create(Ue.prototype);xn.prototype.constructor=xn;xn.prototype.isLineDashedMaterial=!0;xn.prototype.copy=function(e){return Ue.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var wl=Object.freeze({ShadowMaterial:rr,SpriteMaterial:jt,RawShaderMaterial:ir,ShaderMaterial:yt,PointsMaterial:Ot,MeshPhysicalMaterial:fn,MeshStandardMaterial:St,MeshPhongMaterial:wt,MeshToonMaterial:dn,MeshNormalMaterial:pn,MeshLambertMaterial:yn,MeshDepthMaterial:Wt,MeshDistanceMaterial:Xt,MeshBasicMaterial:nt,LineDashedMaterial:xn,LineBasicMaterial:Ue,Material:ge}),ai={enabled:!1,files:{},add:function(e,t){this.enabled!==!1&&(this.files[e]=t)},get:function(e){if(this.enabled!==!1)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};function Vo(e,t,n){var r=this,i=!1,a=0,o=0;this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(s){o++,i===!1&&r.onStart!==void 0&&r.onStart(s,a,o),i=!0},this.itemEnd=function(s){a++,r.onProgress!==void 0&&r.onProgress(s,a,o),a===o&&(i=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(s){r.onError!==void 0&&r.onError(s)}}var lt=new Vo;function Rt(e){this.manager=e!==void 0?e:lt}Object.assign(Rt.prototype,{load:function(e,t,n,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e);var i=this,a=ai.get(e);if(a!==void 0)return i.manager.itemStart(e),setTimeout(function(){t&&t(a),i.manager.itemEnd(e)},0),a;var o=/^data:(.*?)(;base64)?,(.*)$/,s=e.match(o);if(s){var c=s[1],h=!!s[2],u=s[3];u=window.decodeURIComponent(u),h&&(u=window.atob(u));try{var l,f=(this.responseType||"").toLowerCase();switch(f){case"arraybuffer":case"blob":l=new ArrayBuffer(u.length);for(var d=new Uint8Array(l),p=0;p<u.length;p++)d[p]=u.charCodeAt(p);f==="blob"&&(l=new Blob([l],{type:c}));break;case"document":var y=new DOMParser;l=y.parseFromString(u,c);break;case"json":l=JSON.parse(u);break;default:l=u;break}window.setTimeout(function(){t&&t(l),i.manager.itemEnd(e)},0)}catch(v){window.setTimeout(function(){r&&r(v),i.manager.itemEnd(e),i.manager.itemError(e)},0)}}else{var x=new XMLHttpRequest;x.open("GET",e,!0),x.addEventListener("load",function(v){var g=v.target.response;ai.add(e,g),this.status===200?(t&&t(g),i.manager.itemEnd(e)):this.status===0?(console.warn("THREE.FileLoader: HTTP Status 0 received."),t&&t(g),i.manager.itemEnd(e)):(r&&r(v),i.manager.itemEnd(e),i.manager.itemError(e))},!1),n!==void 0&&x.addEventListener("progress",function(v){n(v)},!1),x.addEventListener("error",function(v){r&&r(v),i.manager.itemEnd(e),i.manager.itemError(e)},!1),this.responseType!==void 0&&(x.responseType=this.responseType),this.withCredentials!==void 0&&(x.withCredentials=this.withCredentials),x.overrideMimeType&&x.overrideMimeType(this.mimeType!==void 0?this.mimeType:"text/plain");for(var m in this.requestHeader)x.setRequestHeader(m,this.requestHeader[m]);x.send(null)}return i.manager.itemStart(e),x},setPath:function(e){return this.path=e,this},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}});function Ml(e){this.manager=e!==void 0?e:lt,this._parser=null}Object.assign(Ml.prototype,{load:function(e,t,n,r){var i=this,a=[],o=new Vn;o.image=a;var s=new Rt(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer");function c(f){s.load(e[f],function(d){var p=i._parser(d,!0);a[f]={width:p.width,height:p.height,format:p.format,mipmaps:p.mipmaps},h+=1,h===6&&(p.mipmapCount===1&&(o.minFilter=tt),o.format=p.format,o.needsUpdate=!0,t&&t(o))},n,r)}if(Array.isArray(e))for(var h=0,u=0,l=e.length;u<l;++u)c(u);else s.load(e,function(f){var d=i._parser(f,!0);if(d.isCubemap)for(var p=d.mipmaps.length/d.mipmapCount,y=0;y<p;y++){a[y]={mipmaps:[]};for(var x=0;x<d.mipmapCount;x++)a[y].mipmaps.push(d.mipmaps[y*d.mipmapCount+x]),a[y].format=d.format,a[y].width=d.width,a[y].height=d.height}else o.image.width=d.width,o.image.height=d.height,o.mipmaps=d.mipmaps;d.mipmapCount===1&&(o.minFilter=tt),o.format=d.format,o.needsUpdate=!0,t&&t(o)},n,r);return o},setPath:function(e){return this.path=e,this}});function El(e){this.manager=e!==void 0?e:lt,this._parser=null}Object.assign(El.prototype,{load:function(e,t,n,r){var i=this,a=new on,o=new Rt(this.manager);return o.setResponseType("arraybuffer"),o.load(e,function(s){var c=i._parser(s);c&&(c.image!==void 0?a.image=c.image:c.data!==void 0&&(a.image.width=c.width,a.image.height=c.height,a.image.data=c.data),a.wrapS=c.wrapS!==void 0?c.wrapS:ct,a.wrapT=c.wrapT!==void 0?c.wrapT:ct,a.magFilter=c.magFilter!==void 0?c.magFilter:tt,a.minFilter=c.minFilter!==void 0?c.minFilter:bi,a.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.format!==void 0&&(a.format=c.format),c.type!==void 0&&(a.type=c.type),c.mipmaps!==void 0&&(a.mipmaps=c.mipmaps),c.mipmapCount===1&&(a.minFilter=tt),a.needsUpdate=!0,t&&t(a,c))},n,r),a}});function wi(e){this.manager=e!==void 0?e:lt}Object.assign(wi.prototype,{crossOrigin:"Anonymous",load:function(e,t,n,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e);var i=this,a=ai.get(e);if(a!==void 0)return i.manager.itemStart(e),setTimeout(function(){t&&t(a),i.manager.itemEnd(e)},0),a;var o=document.createElementNS("http://www.w3.org/1999/xhtml","img");return o.addEventListener("load",function(){ai.add(e,this),t&&t(this),i.manager.itemEnd(e)},!1),o.addEventListener("error",function(s){r&&r(s),i.manager.itemEnd(e),i.manager.itemError(e)},!1),e.substr(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),i.manager.itemStart(e),o.src=e,o},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}});function Tl(e){this.manager=e!==void 0?e:lt}Object.assign(Tl.prototype,{crossOrigin:"Anonymous",load:function(e,t,n,r){var i=new Vt,a=new wi(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);var o=0;function s(h){a.load(e[h],function(u){i.images[h]=u,o++,o===6&&(i.needsUpdate=!0,t&&t(i))},void 0,r)}for(var c=0;c<e.length;++c)s(c);return i},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}});function ko(e){this.manager=e!==void 0?e:lt}Object.assign(ko.prototype,{crossOrigin:"Anonymous",load:function(e,t,n,r){var i=new wi(this.manager);i.setCrossOrigin(this.crossOrigin),i.setPath(this.path);var a=new De;return a.image=i.load(e,function(){var o=e.search(/\.(jpg|jpeg)$/)>0||e.search(/^data\:image\/jpeg/)===0;a.format=o?Un:Ut,a.needsUpdate=!0,t!==void 0&&t(a)},n,r),a},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}});function ke(e,t){J.call(this),this.type="Light",this.color=new ie(e),this.intensity=t!==void 0?t:1,this.receiveShadow=void 0}ke.prototype=Object.assign(Object.create(J.prototype),{constructor:ke,isLight:!0,copy:function(e){return J.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){var t=J.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}});function ea(e,t,n){ke.call(this,e,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(J.DefaultUp),this.updateMatrix(),this.groundColor=new ie(t)}ea.prototype=Object.assign(Object.create(ke.prototype),{constructor:ea,isHemisphereLight:!0,copy:function(e){return ke.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}});function Mn(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new q(512,512),this.map=null,this.matrix=new ue}Object.assign(Mn.prototype,{copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){var e={};return this.bias!==0&&(e.bias=this.bias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}});function ta(){Mn.call(this,new ze(50,1,.5,500))}ta.prototype=Object.assign(Object.create(Mn.prototype),{constructor:ta,isSpotLightShadow:!0,update:function(e){var t=this.camera,n=me.RAD2DEG*2*e.angle,r=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;(n!==t.fov||r!==t.aspect||i!==t.far)&&(t.fov=n,t.aspect=r,t.far=i,t.updateProjectionMatrix())}});function na(e,t,n,r,i,a){ke.call(this,e,t),this.type="SpotLight",this.position.copy(J.DefaultUp),this.updateMatrix(),this.target=new J,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(o){this.intensity=o/Math.PI}}),this.distance=n!==void 0?n:0,this.angle=r!==void 0?r:Math.PI/3,this.penumbra=i!==void 0?i:0,this.decay=a!==void 0?a:1,this.shadow=new ta}na.prototype=Object.assign(Object.create(ke.prototype),{constructor:na,isSpotLight:!0,copy:function(e){return ke.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}});function ra(e,t,n,r){ke.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return this.intensity*4*Math.PI},set:function(i){this.intensity=i/(4*Math.PI)}}),this.distance=n!==void 0?n:0,this.decay=r!==void 0?r:1,this.shadow=new Mn(new ze(90,1,.5,500))}ra.prototype=Object.assign(Object.create(ke.prototype),{constructor:ra,isPointLight:!0,copy:function(e){return ke.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}});function ia(){Mn.call(this,new Dt(-5,5,5,-5,.5,500))}ia.prototype=Object.assign(Object.create(Mn.prototype),{constructor:ia});function aa(e,t){ke.call(this,e,t),this.type="DirectionalLight",this.position.copy(J.DefaultUp),this.updateMatrix(),this.target=new J,this.shadow=new ia}aa.prototype=Object.assign(Object.create(ke.prototype),{constructor:aa,isDirectionalLight:!0,copy:function(e){return ke.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}});function oa(e,t){ke.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}oa.prototype=Object.assign(Object.create(ke.prototype),{constructor:oa,isAmbientLight:!0});function sa(e,t,n,r){ke.call(this,e,t),this.type="RectAreaLight",this.position.set(0,1,0),this.updateMatrix(),this.width=n!==void 0?n:10,this.height=r!==void 0?r:10}sa.prototype=Object.assign(Object.create(ke.prototype),{constructor:sa,isRectAreaLight:!0,copy:function(e){return ke.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){var t=ke.prototype.toJSON.call(this,e);return t.object.width=this.width,t.object.height=this.height,t}});var je={arraySlice:function(e,t,n){return je.isTypedArray(e)?new e.constructor(e.subarray(t,n!==void 0?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:typeof t.BYTES_PER_ELEMENT=="number"?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){function t(a,o){return e[a]-e[o]}for(var n=e.length,r=new Array(n),i=0;i!==n;++i)r[i]=i;return r.sort(t),r},sortedArray:function(e,t,n){for(var r=e.length,i=new e.constructor(r),a=0,o=0;o!==r;++a)for(var s=n[a]*t,c=0;c!==t;++c)i[o++]=e[s+c];return i},flattenJSON:function(e,t,n,r){for(var i=1,a=e[0];a!==void 0&&a[r]===void 0;)a=e[i++];if(a!==void 0){var o=a[r];if(o!==void 0)if(Array.isArray(o))do o=a[r],o!==void 0&&(t.push(a.time),n.push.apply(n,o)),a=e[i++];while(a!==void 0);else if(o.toArray!==void 0)do o=a[r],o!==void 0&&(t.push(a.time),o.toArray(n,n.length)),a=e[i++];while(a!==void 0);else do o=a[r],o!==void 0&&(t.push(a.time),n.push(o)),a=e[i++];while(a!==void 0)}}};function ut(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n}Object.assign(ut.prototype,{evaluate:function(e){var t=this.parameterPositions,n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{var a;n:{r:if(!(e<r)){for(var o=n+2;;){if(r===void 0){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,i)}if(n===o)break;if(i=r,r=t[++n],e<r)break t}a=t.length;break n}if(!(e>=i)){var s=t[1];e<s&&(n=2,i=s);for(var o=n-2;;){if(i===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(n===o)break;if(r=i,i=t[--n-1],e>=i)break t}a=n,n=0;break n}break e}for(;n<a;){var c=n+a>>>1;e<t[c]?a=c:n=c+1}if(r=t[n],i=t[n-1],i===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(r===void 0)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,i,e)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r,a=0;a!==r;++a)t[a]=n[i+a];return t},interpolate_:function(e,t,n,r){throw new Error("call to abstract method")},intervalChanged_:function(e,t,n){}});//!\ DECLARE ALIAS AFTER assign prototype !
Object.assign(ut.prototype,{beforeStart_:ut.prototype.copySampleValue_,afterEnd_:ut.prototype.copySampleValue_});function ca(e,t,n,r){ut.call(this,e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}ca.prototype=Object.assign(Object.create(ut.prototype),{constructor:ca,DefaultSettings_:{endingStart:an,endingEnd:an},intervalChanged_:function(e,t,n){var r=this.parameterPositions,i=e-2,a=e+1,o=r[i],s=r[a];if(o===void 0)switch(this.getSettings_().endingStart){case $t:i=e,o=2*t-n;break;case Ir:i=r.length-2,o=t+r[i]-r[i+1];break;default:i=e,o=n}if(s===void 0)switch(this.getSettings_().endingEnd){case $t:a=e,s=2*n-t;break;case Ir:a=1,s=n+r[1]-r[0];break;default:a=e-1,s=t}var c=(n-t)*.5,h=this.valueSize;this._weightPrev=c/(t-o),this._weightNext=c/(s-n),this._offsetPrev=i*h,this._offsetNext=a*h},interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,c=s-o,h=this._offsetPrev,u=this._offsetNext,l=this._weightPrev,f=this._weightNext,d=(n-t)/(r-t),p=d*d,y=p*d,x=-l*y+2*l*p-l*d,m=(1+l)*y+(-1.5-2*l)*p+(-.5+l)*d+1,v=(-1-f)*y+(1.5+f)*p+.5*d,g=f*y-f*p,_=0;_!==o;++_)i[_]=x*a[h+_]+m*a[c+_]+v*a[s+_]+g*a[u+_];return i}});function oi(e,t,n,r){ut.call(this,e,t,n,r)}oi.prototype=Object.assign(Object.create(ut.prototype),{constructor:oi,interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,c=s-o,h=(n-t)/(r-t),u=1-h,l=0;l!==o;++l)i[l]=a[c+l]*u+a[s+l]*h;return i}});function ha(e,t,n,r){ut.call(this,e,t,n,r)}ha.prototype=Object.assign(Object.create(ut.prototype),{constructor:ha,interpolate_:function(e,t,n,r){return this.copySampleValue_(e-1)}});var Pt;Pt={TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:Ar,InterpolantFactoryMethodDiscrete:function(e){return new ha(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new oi(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new ca(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case Cr:t=this.InterpolantFactoryMethodDiscrete;break;case Ar:t=this.InterpolantFactoryMethodLinear;break;case Li:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);console.warn("THREE.KeyframeTrackPrototype:",n);return}this.createInterpolant=t},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Cr;case this.InterpolantFactoryMethodLinear:return Ar;case this.InterpolantFactoryMethodSmooth:return Li}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(e!==0)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]+=e;return this},scale:function(e){if(e!==1)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]*=e;return this},trim:function(e,t){for(var n=this.times,r=n.length,i=0,a=r-1;i!==r&&n[i]<e;)++i;for(;a!==-1&&n[a]>t;)--a;if(++a,i!==0||a!==r){i>=a&&(a=Math.max(a,1),i=a-1);var o=this.getValueSize();this.times=je.arraySlice(n,i,a),this.values=je.arraySlice(this.values,i*o,a*o)}return this},validate:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrackPrototype: Invalid value size in track.",this),e=!1);var n=this.times,r=this.values,i=n.length;i===0&&(console.error("THREE.KeyframeTrackPrototype: Track is empty.",this),e=!1);for(var a=null,o=0;o!==i;o++){var s=n[o];if(typeof s=="number"&&isNaN(s)){console.error("THREE.KeyframeTrackPrototype: Time is not a valid number.",this,o,s),e=!1;break}if(a!==null&&a>s){console.error("THREE.KeyframeTrackPrototype: Out of order keys.",this,o,s,a),e=!1;break}a=s}if(r!==void 0&&je.isTypedArray(r))for(var o=0,c=r.length;o!==c;++o){var h=r[o];if(isNaN(h)){console.error("THREE.KeyframeTrackPrototype: Value is not a valid number.",this,o,h),e=!1;break}}return e},optimize:function(){for(var e=this.times,t=this.values,n=this.getValueSize(),r=this.getInterpolation()===Li,i=1,a=e.length-1,o=1;o<a;++o){var s=!1,c=e[o],h=e[o+1];if(c!==h&&(o!==1||c!==c[0]))if(r)s=!0;else for(var u=o*n,l=u-n,f=u+n,d=0;d!==n;++d){var p=t[u+d];if(p!==t[l+d]||p!==t[f+d]){s=!0;break}}if(s){if(o!==i){e[i]=e[o];for(var y=o*n,x=i*n,d=0;d!==n;++d)t[x+d]=t[y+d]}++i}}if(a>0){e[i]=e[a];for(var y=a*n,x=i*n,d=0;d!==n;++d)t[x+d]=t[y+d];++i}return i!==e.length&&(this.times=je.arraySlice(e,0,i),this.values=je.arraySlice(t,0,i*n)),this}};function Zt(e,t,n,r){if(e===void 0)throw new Error("track name is undefined");if(t===void 0||t.length===0)throw new Error("no keyframes in track named "+e);this.name=e,this.times=je.convertArray(t,this.TimeBufferType),this.values=je.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation),this.validate(),this.optimize()}function ar(e,t,n,r){Zt.call(this,e,t,n,r)}ar.prototype=Object.assign(Object.create(Pt),{constructor:ar,ValueTypeName:"vector"});function ua(e,t,n,r){ut.call(this,e,t,n,r)}ua.prototype=Object.assign(Object.create(ut.prototype),{constructor:ua,interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,c=(n-t)/(r-t),h=s+o;s!==h;s+=4)Ge.slerpFlat(i,0,a,s-o,a,s,c);return i}});function si(e,t,n,r){Zt.call(this,e,t,n,r)}si.prototype=Object.assign(Object.create(Pt),{constructor:si,ValueTypeName:"quaternion",DefaultInterpolation:Ar,InterpolantFactoryMethodLinear:function(e){return new ua(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0});function or(e,t,n,r){Zt.call(this,e,t,n,r)}or.prototype=Object.assign(Object.create(Pt),{constructor:or,ValueTypeName:"number"});function la(e,t,n,r){Zt.call(this,e,t,n,r)}la.prototype=Object.assign(Object.create(Pt),{constructor:la,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:Cr,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function fa(e,t,n){Zt.call(this,e,t,n)}fa.prototype=Object.assign(Object.create(Pt),{constructor:fa,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:Cr,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function da(e,t,n,r){Zt.call(this,e,t,n,r)}da.prototype=Object.assign(Object.create(Pt),{constructor:da,ValueTypeName:"color"});function mn(e,t,n,r){Zt.apply(this,arguments)}mn.prototype=Pt;Pt.constructor=mn;Object.assign(mn,{parse:function(e){if(e.type===void 0)throw new Error("track type undefined, can not parse");var t=mn._getTrackTypeForValueTypeName(e.type);if(e.times===void 0){var n=[],r=[];je.flattenJSON(e.keys,n,r,"value"),e.times=n,e.values=r}return t.parse!==void 0?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)},toJSON:function(e){var t=e.constructor,n;if(t.toJSON!==void 0)n=t.toJSON(e);else{n={name:e.name,times:je.convertArray(e.times,Array),values:je.convertArray(e.values,Array)};var r=e.getInterpolation();r!==e.DefaultInterpolation&&(n.interpolation=r)}return n.type=e.ValueTypeName,n},_getTrackTypeForValueTypeName:function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return or;case"vector":case"vector2":case"vector3":case"vector4":return ar;case"color":return da;case"quaternion":return si;case"bool":case"boolean":return fa;case"string":return la}throw new Error("Unsupported typeName: "+e)}});function pt(e,t,n){this.name=e,this.tracks=n,this.duration=t!==void 0?t:-1,this.uuid=me.generateUUID(),this.duration<0&&this.resetDuration(),this.optimize()}Object.assign(pt,{parse:function(e){for(var t=[],n=e.tracks,r=1/(e.fps||1),i=0,a=n.length;i!==a;++i)t.push(mn.parse(n[i]).scale(r));return new pt(e.name,e.duration,t)},toJSON:function(e){for(var t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t},i=0,a=n.length;i!==a;++i)t.push(mn.toJSON(n[i]));return r},CreateFromMorphTargetSequence:function(e,t,n,r){for(var i=t.length,a=[],o=0;o<i;o++){var s=[],c=[];s.push((o+i-1)%i,o,(o+1)%i),c.push(0,1,0);var h=je.getKeyframeOrder(s);s=je.sortedArray(s,1,h),c=je.sortedArray(c,1,h),!r&&s[0]===0&&(s.push(i),c.push(c[0])),a.push(new or(".morphTargetInfluences["+t[o].name+"]",s,c).scale(1/n))}return new pt(e,-1,a)},findByName:function(e,t){var n=e;if(!Array.isArray(e)){var r=e;n=r.geometry&&r.geometry.animations||r.animations}for(var i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null},CreateClipsFromMorphTargetSequences:function(e,t,n){for(var r={},i=/^([\w-]*?)([\d]+)$/,a=0,o=e.length;a<o;a++){var s=e[a],c=s.name.match(i);if(c&&c.length>1){var h=c[1],u=r[h];u||(r[h]=u=[]),u.push(s)}}var l=[];for(var h in r)l.push(pt.CreateFromMorphTargetSequence(h,r[h],t,n));return l},parseAnimation:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(g,_,M,w,A){if(M.length!==0){var P=[],S=[];je.flattenJSON(M,P,S,w),P.length!==0&&A.push(new g(_,P,S))}},r=[],i=e.name||"default",a=e.length||-1,o=e.fps||30,s=e.hierarchy||[],c=0;c<s.length;c++){var h=s[c].keys;if(!(!h||h.length===0))if(h[0].morphTargets){for(var u={},l=0;l<h.length;l++)if(h[l].morphTargets)for(var f=0;f<h[l].morphTargets.length;f++)u[h[l].morphTargets[f]]=-1;for(var d in u){for(var p=[],y=[],f=0;f!==h[l].morphTargets.length;++f){var x=h[l];p.push(x.time),y.push(x.morphTarget===d?1:0)}r.push(new or(".morphTargetInfluence["+d+"]",p,y))}a=u.length*(o||1)}else{var m=".bones["+t[c].name+"]";n(ar,m+".position",h,"pos",r),n(si,m+".quaternion",h,"rot",r),n(ar,m+".scale",h,"scl",r)}}if(r.length===0)return null;var v=new pt(i,a,r);return v}});Object.assign(pt.prototype,{resetDuration:function(){for(var e=this.tracks,t=0,n=0,r=e.length;n!==r;++n){var i=this.tracks[n];t=Math.max(t,i.times[i.times.length-1])}this.duration=t},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}});function Ca(e){this.manager=e!==void 0?e:lt,this.textures={}}Object.assign(Ca.prototype,{load:function(e,t,n,r){var i=this,a=new Rt(i.manager);a.load(e,function(o){t(i.parse(JSON.parse(o)))},n,r)},setTextures:function(e){this.textures=e},parse:function(e){var t=this.textures;function n(a){return t[a]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",a),t[a]}var r=new wl[e.type];if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular.setHex(e.specular),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearCoat!==void 0&&(r.clearCoat=e.clearCoat),e.clearCoatRoughness!==void 0&&(r.clearCoatRoughness=e.clearCoatRoughness),e.uniforms!==void 0&&(r.uniforms=e.uniforms),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.vertexColors!==void 0&&(r.vertexColors=e.vertexColors),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.side!==void 0&&(r.side=e.side),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.skinning!==void 0&&(r.skinning=e.skinning),e.morphTargets!==void 0&&(r.morphTargets=e.morphTargets),e.dithering!==void 0&&(r.dithering=e.dithering),e.visible!==void 0&&(r.visible=e.visible),e.userData!==void 0&&(r.userData=e.userData),e.shading!==void 0&&(r.flatShading=e.shading===1),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=n(e.map)),e.alphaMap!==void 0&&(r.alphaMap=n(e.alphaMap),r.transparent=!0),e.bumpMap!==void 0&&(r.bumpMap=n(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=n(e.normalMap)),e.normalScale!==void 0){var i=e.normalScale;Array.isArray(i)===!1&&(i=[i,i]),r.normalScale=new q().fromArray(i)}return e.displacementMap!==void 0&&(r.displacementMap=n(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=n(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=n(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=n(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=n(e.specularMap)),e.envMap!==void 0&&(r.envMap=n(e.envMap)),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.lightMap!==void 0&&(r.lightMap=n(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=n(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=n(e.gradientMap)),r}});function Wo(e){this.manager=e!==void 0?e:lt}Object.assign(Wo.prototype,{load:function(e,t,n,r){var i=this,a=new Rt(i.manager);a.load(e,function(o){t(i.parse(JSON.parse(o)))},n,r)},parse:function(e){var t=new te,n=e.data.index;if(n!==void 0){var r=new to[n.type](n.array);t.setIndex(new xe(r,1))}var i=e.data.attributes;for(var a in i){var o=i[a],r=new to[o.type](o.array);t.addAttribute(a,new xe(r,o.itemSize,o.normalized))}var s=e.data.groups||e.data.drawcalls||e.data.offsets;if(s!==void 0)for(var c=0,h=s.length;c!==h;++c){var u=s[c];t.addGroup(u.start,u.count,u.materialIndex)}var l=e.data.boundingSphere;if(l!==void 0){var f=new T;l.center!==void 0&&f.fromArray(l.center),t.boundingSphere=new gt(f,l.radius)}return t}});var to={Int8Array,Uint8Array,Uint8ClampedArray:typeof Uint8ClampedArray<"u"?Uint8ClampedArray:Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function sr(){this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}}sr.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=this.handlers,n=0,r=t.length;n<r;n+=2){var i=t[n],a=t[n+1];if(i.test(e))return a}return null}};Object.assign(sr.prototype,{crossOrigin:void 0,extractUrlBase:function(e){var t=e.split("/");return t.length===1?"./":(t.pop(),t.join("/")+"/")},initMaterials:function(e,t,n){for(var r=[],i=0;i<e.length;++i)r[i]=this.createMaterial(e[i],t,n);return r},createMaterial:function(){var e={NoBlending:Oi,NormalBlending:_r,AdditiveBlending:yo,SubtractiveBlending:xo,MultiplyBlending:mo,CustomBlending:vo},t=new ie,n=new ko,r=new Ca;return function(a,o,s){var c={};function h(d,p,y,x,m){var v=o+d,g=sr.Handlers.get(v),_;g!==null?_=g.load(v):(n.setCrossOrigin(s),_=n.load(v)),p!==void 0&&(_.repeat.fromArray(p),p[0]!==1&&(_.wrapS=Ct),p[1]!==1&&(_.wrapT=Ct)),y!==void 0&&_.offset.fromArray(y),x!==void 0&&(x[0]==="repeat"&&(_.wrapS=Ct),x[0]==="mirror"&&(_.wrapS=rn),x[1]==="repeat"&&(_.wrapT=Ct),x[1]==="mirror"&&(_.wrapT=rn)),m!==void 0&&(_.anisotropy=m);var M=me.generateUUID();return c[M]=_,M}var u={uuid:me.generateUUID(),type:"MeshLambertMaterial"};for(var l in a){var f=a[l];switch(l){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":u.name=f;break;case"blending":u.blending=e[f];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",l,"is no longer supported.");break;case"colorDiffuse":u.color=t.fromArray(f).getHex();break;case"colorSpecular":u.specular=t.fromArray(f).getHex();break;case"colorEmissive":u.emissive=t.fromArray(f).getHex();break;case"specularCoef":u.shininess=f;break;case"shading":f.toLowerCase()==="basic"&&(u.type="MeshBasicMaterial"),f.toLowerCase()==="phong"&&(u.type="MeshPhongMaterial"),f.toLowerCase()==="standard"&&(u.type="MeshStandardMaterial");break;case"mapDiffuse":u.map=h(f,a.mapDiffuseRepeat,a.mapDiffuseOffset,a.mapDiffuseWrap,a.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":u.emissiveMap=h(f,a.mapEmissiveRepeat,a.mapEmissiveOffset,a.mapEmissiveWrap,a.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":u.lightMap=h(f,a.mapLightRepeat,a.mapLightOffset,a.mapLightWrap,a.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":u.aoMap=h(f,a.mapAORepeat,a.mapAOOffset,a.mapAOWrap,a.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":u.bumpMap=h(f,a.mapBumpRepeat,a.mapBumpOffset,a.mapBumpWrap,a.mapBumpAnisotropy);break;case"mapBumpScale":u.bumpScale=f;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":u.normalMap=h(f,a.mapNormalRepeat,a.mapNormalOffset,a.mapNormalWrap,a.mapNormalAnisotropy);break;case"mapNormalFactor":u.normalScale=[f,f];break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":u.specularMap=h(f,a.mapSpecularRepeat,a.mapSpecularOffset,a.mapSpecularWrap,a.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":u.metalnessMap=h(f,a.mapMetalnessRepeat,a.mapMetalnessOffset,a.mapMetalnessWrap,a.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":u.roughnessMap=h(f,a.mapRoughnessRepeat,a.mapRoughnessOffset,a.mapRoughnessWrap,a.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":u.alphaMap=h(f,a.mapAlphaRepeat,a.mapAlphaOffset,a.mapAlphaWrap,a.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":u.side=Ht;break;case"doubleSided":u.side=gr;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),u.opacity=f;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":u[l]=f;break;case"vertexColors":f===!0&&(u.vertexColors=_n),f==="face"&&(u.vertexColors=po);break;default:console.error("THREE.Loader.createMaterial: Unsupported",l,f);break}}return u.type==="MeshBasicMaterial"&&delete u.emissive,u.type!=="MeshPhongMaterial"&&delete u.specular,u.opacity<1&&(u.transparent=!0),r.setTextures(c),r.parse(u)}}()});function Xo(e){typeof e=="boolean"&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),e=void 0),this.manager=e!==void 0?e:lt,this.withCredentials=!1}Object.assign(Xo.prototype,{load:function(e,t,n,r){var i=this,a=this.texturePath&&typeof this.texturePath=="string"?this.texturePath:sr.prototype.extractUrlBase(e),o=new Rt(this.manager);o.setWithCredentials(this.withCredentials),o.load(e,function(s){var c=JSON.parse(s),h=c.metadata;if(h!==void 0){var u=h.type;if(u!==void 0){if(u.toLowerCase()==="object"){console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.ObjectLoader instead.");return}if(u.toLowerCase()==="scene"){console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.SceneLoader instead.");return}}}var l=i.parse(c,a);t(l.geometry,l.materials)},n,r)},setTexturePath:function(e){this.texturePath=e},parse:function(){function e(i,a){function o(re,O){return re&1<<O}var s,c,h,u,l,f,d,p,y,x,m,v,g,_,M,w,A,P,S,C,D,H,L,E,B,I,N,z=i.faces,V=i.vertices,W=i.normals,X=i.colors,Y=i.scale,j=0;if(i.uvs!==void 0){for(s=0;s<i.uvs.length;s++)i.uvs[s].length&&j++;for(s=0;s<j;s++)a.faceVertexUvs[s]=[]}for(u=0,l=V.length;u<l;)P=new T,P.x=V[u++]*Y,P.y=V[u++]*Y,P.z=V[u++]*Y,a.vertices.push(P);for(u=0,l=z.length;u<l;)if(x=z[u++],m=o(x,0),v=o(x,1),g=o(x,3),_=o(x,4),M=o(x,5),w=o(x,6),A=o(x,7),m){if(C=new Gt,C.a=z[u],C.b=z[u+1],C.c=z[u+3],D=new Gt,D.a=z[u+1],D.b=z[u+2],D.c=z[u+3],u+=4,v&&(y=z[u++],C.materialIndex=y,D.materialIndex=y),h=a.faces.length,g)for(s=0;s<j;s++)for(E=i.uvs[s],a.faceVertexUvs[s][h]=[],a.faceVertexUvs[s][h+1]=[],c=0;c<4;c++)p=z[u++],I=E[p*2],N=E[p*2+1],B=new q(I,N),c!==2&&a.faceVertexUvs[s][h].push(B),c!==0&&a.faceVertexUvs[s][h+1].push(B);if(_&&(d=z[u++]*3,C.normal.set(W[d++],W[d++],W[d]),D.normal.copy(C.normal)),M)for(s=0;s<4;s++)d=z[u++]*3,L=new T(W[d++],W[d++],W[d]),s!==2&&C.vertexNormals.push(L),s!==0&&D.vertexNormals.push(L);if(w&&(f=z[u++],H=X[f],C.color.setHex(H),D.color.setHex(H)),A)for(s=0;s<4;s++)f=z[u++],H=X[f],s!==2&&C.vertexColors.push(new ie(H)),s!==0&&D.vertexColors.push(new ie(H));a.faces.push(C),a.faces.push(D)}else{if(S=new Gt,S.a=z[u++],S.b=z[u++],S.c=z[u++],v&&(y=z[u++],S.materialIndex=y),h=a.faces.length,g)for(s=0;s<j;s++)for(E=i.uvs[s],a.faceVertexUvs[s][h]=[],c=0;c<3;c++)p=z[u++],I=E[p*2],N=E[p*2+1],B=new q(I,N),a.faceVertexUvs[s][h].push(B);if(_&&(d=z[u++]*3,S.normal.set(W[d++],W[d++],W[d])),M)for(s=0;s<3;s++)d=z[u++]*3,L=new T(W[d++],W[d++],W[d]),S.vertexNormals.push(L);if(w&&(f=z[u++],S.color.setHex(X[f])),A)for(s=0;s<3;s++)f=z[u++],S.vertexColors.push(new ie(X[f]));a.faces.push(S)}}function t(i,a){var o=i.influencesPerVertex!==void 0?i.influencesPerVertex:2;if(i.skinWeights)for(var s=0,c=i.skinWeights.length;s<c;s+=o){var h=i.skinWeights[s],u=o>1?i.skinWeights[s+1]:0,l=o>2?i.skinWeights[s+2]:0,f=o>3?i.skinWeights[s+3]:0;a.skinWeights.push(new Ce(h,u,l,f))}if(i.skinIndices)for(var s=0,c=i.skinIndices.length;s<c;s+=o){var d=i.skinIndices[s],p=o>1?i.skinIndices[s+1]:0,y=o>2?i.skinIndices[s+2]:0,x=o>3?i.skinIndices[s+3]:0;a.skinIndices.push(new Ce(d,p,y,x))}a.bones=i.bones,a.bones&&a.bones.length>0&&(a.skinWeights.length!==a.skinIndices.length||a.skinIndices.length!==a.vertices.length)&&console.warn("When skinning, number of vertices ("+a.vertices.length+"), skinIndices ("+a.skinIndices.length+"), and skinWeights ("+a.skinWeights.length+") should match.")}function n(i,a){var o=i.scale;if(i.morphTargets!==void 0)for(var s=0,c=i.morphTargets.length;s<c;s++){a.morphTargets[s]={},a.morphTargets[s].name=i.morphTargets[s].name,a.morphTargets[s].vertices=[];for(var h=a.morphTargets[s].vertices,u=i.morphTargets[s].vertices,l=0,f=u.length;l<f;l+=3){var d=new T;d.x=u[l]*o,d.y=u[l+1]*o,d.z=u[l+2]*o,h.push(d)}}if(i.morphColors!==void 0&&i.morphColors.length>0){console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');for(var p=a.faces,y=i.morphColors[0].colors,s=0,c=p.length;s<c;s++)p[s].color.fromArray(y,s*3)}}function r(i,a){var o=[],s=[];i.animation!==void 0&&s.push(i.animation),i.animations!==void 0&&(i.animations.length?s=s.concat(i.animations):s.push(i.animations));for(var c=0;c<s.length;c++){var h=pt.parseAnimation(s[c],a.bones);h&&o.push(h)}if(a.morphTargets){var u=pt.CreateClipsFromMorphTargetSequences(a.morphTargets,10);o=o.concat(u)}o.length>0&&(a.animations=o)}return function(i,a){i.data!==void 0&&(i=i.data),i.scale!==void 0?i.scale=1/i.scale:i.scale=1;var o=new le;if(e(i,o),t(i,o),n(i,o),r(i,o),o.computeFaceNormals(),o.computeBoundingSphere(),i.materials===void 0||i.materials.length===0)return{geometry:o};var s=sr.prototype.initMaterials(i.materials,a,this.crossOrigin);return{geometry:o,materials:s}}}()});function Sl(e){this.manager=e!==void 0?e:lt,this.texturePath=""}Object.assign(Sl.prototype,{load:function(e,t,n,r){this.texturePath===""&&(this.texturePath=e.substring(0,e.lastIndexOf("/")+1));var i=this,a=new Rt(i.manager);a.load(e,function(o){var s=null;try{s=JSON.parse(o)}catch(h){r!==void 0&&r(h),console.error("THREE:ObjectLoader: Can't parse "+e+".",h.message);return}var c=s.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry"){console.error("THREE.ObjectLoader: Can't load "+e+". Use THREE.JSONLoader instead.");return}i.parse(s,t)},n,r)},setTexturePath:function(e){this.texturePath=e},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e,t){var n=this.parseGeometries(e.geometries),r=this.parseImages(e.images,function(){t!==void 0&&t(o)}),i=this.parseTextures(e.textures,r),a=this.parseMaterials(e.materials,i),o=this.parseObject(e.object,n,a);return e.animations&&(o.animations=this.parseAnimations(e.animations)),(e.images===void 0||e.images.length===0)&&t!==void 0&&t(o),o},parseGeometries:function(e){var t={};if(e!==void 0)for(var n=new Xo,r=new Wo,i=0,a=e.length;i<a;i++){var o,s=e[i];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":o=new ft[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":o=new ft[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":o=new ft[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":o=new ft[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":o=new ft[s.type](s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":o=new ft[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"DodecahedronGeometry":case"IcosahedronGeometry":case"OctahedronGeometry":case"TetrahedronGeometry":o=new ft[s.type](s.radius,s.detail);break;case"RingGeometry":case"RingBufferGeometry":o=new ft[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":o=new ft[s.type](s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":o=new ft[s.type](s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q);break;case"LatheGeometry":case"LatheBufferGeometry":o=new ft[s.type](s.points,s.segments,s.phiStart,s.phiLength);break;case"BufferGeometry":o=r.parse(s);break;case"Geometry":o=n.parse(s,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+s.type+'"');continue}o.uuid=s.uuid,s.name!==void 0&&(o.name=s.name),t[s.uuid]=o}return t},parseMaterials:function(e,t){var n={};if(e!==void 0){var r=new Ca;r.setTextures(t);for(var i=0,a=e.length;i<a;i++){var o=e[i];if(o.type==="MultiMaterial"){for(var s=[],c=0;c<o.materials.length;c++)s.push(r.parse(o.materials[c]));n[o.uuid]=s}else n[o.uuid]=r.parse(o)}}return n},parseAnimations:function(e){for(var t=[],n=0;n<e.length;n++){var r=pt.parse(e[n]);t.push(r)}return t},parseImages:function(e,t){var n=this,r={};function i(l){return n.manager.itemStart(l),o.load(l,function(){n.manager.itemEnd(l)},void 0,function(){n.manager.itemEnd(l),n.manager.itemError(l)})}if(e!==void 0&&e.length>0){var a=new Vo(t),o=new wi(a);o.setCrossOrigin(this.crossOrigin);for(var s=0,c=e.length;s<c;s++){var h=e[s],u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(h.url)?h.url:n.texturePath+h.url;r[h.uuid]=i(u)}}return r},parseTextures:function(e,t){function n(c,h){return typeof c=="number"?c:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",c),h[c])}var r={};if(e!==void 0)for(var i=0,a=e.length;i<a;i++){var o=e[i];o.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),t[o.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",o.image);var s=new De(t[o.image]);s.needsUpdate=!0,s.uuid=o.uuid,o.name!==void 0&&(s.name=o.name),o.mapping!==void 0&&(s.mapping=n(o.mapping,Al)),o.offset!==void 0&&s.offset.fromArray(o.offset),o.repeat!==void 0&&s.repeat.fromArray(o.repeat),o.wrap!==void 0&&(s.wrapS=n(o.wrap[0],no),s.wrapT=n(o.wrap[1],no)),o.minFilter!==void 0&&(s.minFilter=n(o.minFilter,ro)),o.magFilter!==void 0&&(s.magFilter=n(o.magFilter,ro)),o.anisotropy!==void 0&&(s.anisotropy=o.anisotropy),o.flipY!==void 0&&(s.flipY=o.flipY),r[o.uuid]=s}return r},parseObject:function(){var e=new ue;return function(n,r,i){var a;function o(x){return r[x]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",x),r[x]}function s(x){if(x!==void 0){if(Array.isArray(x)){for(var m=[],v=0,g=x.length;v<g;v++){var _=x[v];i[_]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",_),m.push(i[_])}return m}return i[x]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",x),i[x]}}switch(n.type){case"Scene":a=new Nr,n.background!==void 0&&Number.isInteger(n.background)&&(a.background=new ie(n.background)),n.fog!==void 0&&(n.fog.type==="Fog"?a.fog=new Gn(n.fog.color,n.fog.near,n.fog.far):n.fog.type==="FogExp2"&&(a.fog=new zn(n.fog.color,n.fog.density)));break;case"PerspectiveCamera":a=new ze(n.fov,n.aspect,n.near,n.far),n.focus!==void 0&&(a.focus=n.focus),n.zoom!==void 0&&(a.zoom=n.zoom),n.filmGauge!==void 0&&(a.filmGauge=n.filmGauge),n.filmOffset!==void 0&&(a.filmOffset=n.filmOffset),n.view!==void 0&&(a.view=Object.assign({},n.view));break;case"OrthographicCamera":a=new Dt(n.left,n.right,n.top,n.bottom,n.near,n.far);break;case"AmbientLight":a=new oa(n.color,n.intensity);break;case"DirectionalLight":a=new aa(n.color,n.intensity);break;case"PointLight":a=new ra(n.color,n.intensity,n.distance,n.decay);break;case"RectAreaLight":a=new sa(n.color,n.intensity,n.width,n.height);break;case"SpotLight":a=new na(n.color,n.intensity,n.distance,n.angle,n.penumbra,n.decay);break;case"HemisphereLight":a=new ea(n.color,n.groundColor,n.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var c=o(n.geometry),h=s(n.material);c.bones&&c.bones.length>0?a=new Qi(c,h):a=new Ke(c,h);break;case"LOD":a=new Br;break;case"Line":a=new rt(o(n.geometry),s(n.material),n.mode);break;case"LineLoop":a=new Ki(o(n.geometry),s(n.material));break;case"LineSegments":a=new Be(o(n.geometry),s(n.material));break;case"PointCloud":case"Points":a=new Gr(o(n.geometry),s(n.material));break;case"Sprite":a=new Zi(s(n.material));break;case"Group":a=new Hn;break;default:a=new J}if(a.uuid=n.uuid,n.name!==void 0&&(a.name=n.name),n.matrix!==void 0?(e.fromArray(n.matrix),e.decompose(a.position,a.quaternion,a.scale)):(n.position!==void 0&&a.position.fromArray(n.position),n.rotation!==void 0&&a.rotation.fromArray(n.rotation),n.quaternion!==void 0&&a.quaternion.fromArray(n.quaternion),n.scale!==void 0&&a.scale.fromArray(n.scale)),n.castShadow!==void 0&&(a.castShadow=n.castShadow),n.receiveShadow!==void 0&&(a.receiveShadow=n.receiveShadow),n.shadow&&(n.shadow.bias!==void 0&&(a.shadow.bias=n.shadow.bias),n.shadow.radius!==void 0&&(a.shadow.radius=n.shadow.radius),n.shadow.mapSize!==void 0&&a.shadow.mapSize.fromArray(n.shadow.mapSize),n.shadow.camera!==void 0&&(a.shadow.camera=this.parseObject(n.shadow.camera))),n.visible!==void 0&&(a.visible=n.visible),n.userData!==void 0&&(a.userData=n.userData),n.children!==void 0)for(var u=n.children,l=0;l<u.length;l++)a.add(this.parseObject(u[l],r,i));if(n.type==="LOD")for(var f=n.levels,d=0;d<f.length;d++){var p=f[d],y=a.getObjectByProperty("uuid",p.object);y!==void 0&&a.addLevel(y,p.distance)}return a}}()});var Al={UVMapping:_a,CubeReflectionMapping:ba,CubeRefractionMapping:Bi,EquirectangularReflectionMapping:Mo,EquirectangularRefractionMapping:zi,SphericalReflectionMapping:Eo,CubeUVReflectionMapping:wa,CubeUVRefractionMapping:Ma},no={RepeatWrapping:Ct,ClampToEdgeWrapping:ct,MirroredRepeatWrapping:rn},ro={NearestFilter:ht,NearestMipMapNearestFilter:Ea,NearestMipMapLinearFilter:Ta,LinearFilter:tt,LinearMipMapNearestFilter:To,LinearMipMapLinearFilter:bi};function io(e,t,n,r,i){var a=(r-t)*.5,o=(i-n)*.5,s=e*e,c=e*s;return(2*n-2*r+a+o)*c+(-3*n+3*r-2*a-o)*s+a*e+n}function Ll(e,t){var n=1-e;return n*n*t}function Rl(e,t){return 2*(1-e)*e*t}function Pl(e,t){return e*e*t}function Cn(e,t,n,r){return Ll(e,t)+Rl(e,n)+Pl(e,r)}function Cl(e,t){var n=1-e;return n*n*n*t}function Il(e,t){var n=1-e;return 3*n*n*e*t}function Dl(e,t){return 3*(1-e)*e*e*t}function Ul(e,t){return e*e*e*t}function In(e,t,n,r,i){return Cl(e,t)+Il(e,n)+Dl(e,r)+Ul(e,i)}function Fe(){this.arcLengthDivisions=200}Object.assign(Fe.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e){var t=this.getUtoTmapping(e);return this.getPoint(t)},getPoints:function(e){e===void 0&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t},getSpacedPoints:function(e){e===void 0&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(e===void 0&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t=[],n,r=this.getPoint(0),i,a=0;for(t.push(0),i=1;i<=e;i++)n=this.getPoint(i/e),a+=n.distanceTo(r),t.push(a),r=n;return this.cacheArcLengths=t,t},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var n=this.getLengths(),r=0,i=n.length,a;t?a=t:a=e*n[i-1];for(var o=0,s=i-1,c;o<=s;)if(r=Math.floor(o+(s-o)/2),c=n[r]-a,c<0)o=r+1;else if(c>0)s=r-1;else{s=r;break}if(r=s,n[r]===a)return r/(i-1);var h=n[r],u=n[r+1],l=u-h,f=(a-h)/l,d=(r+f)/(i-1);return d},getTangent:function(e){var t=1e-4,n=e-t,r=e+t;n<0&&(n=0),r>1&&(r=1);var i=this.getPoint(n),a=this.getPoint(r),o=a.clone().sub(i);return o.normalize()},getTangentAt:function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)},computeFrenetFrames:function(e,t){var n=new T,r=[],i=[],a=[],o=new T,s=new ue,c,h,u;for(c=0;c<=e;c++)h=c/e,r[c]=this.getTangentAt(h),r[c].normalize();i[0]=new T,a[0]=new T;var l=Number.MAX_VALUE,f=Math.abs(r[0].x),d=Math.abs(r[0].y),p=Math.abs(r[0].z);for(f<=l&&(l=f,n.set(1,0,0)),d<=l&&(l=d,n.set(0,1,0)),p<=l&&n.set(0,0,1),o.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],o),a[0].crossVectors(r[0],i[0]),c=1;c<=e;c++)i[c]=i[c-1].clone(),a[c]=a[c-1].clone(),o.crossVectors(r[c-1],r[c]),o.length()>Number.EPSILON&&(o.normalize(),u=Math.acos(me.clamp(r[c-1].dot(r[c]),-1,1)),i[c].applyMatrix4(s.makeRotationAxis(o,u))),a[c].crossVectors(r[c],i[c]);if(t===!0)for(u=Math.acos(me.clamp(i[0].dot(i[e]),-1,1)),u/=e,r[0].dot(o.crossVectors(i[0],i[e]))>0&&(u=-u),c=1;c<=e;c++)i[c].applyMatrix4(s.makeRotationAxis(r[c],u*c)),a[c].crossVectors(r[c],i[c]);return{tangents:r,normals:i,binormals:a}}});function At(e,t){Fe.call(this),this.v1=e,this.v2=t}At.prototype=Object.create(Fe.prototype);At.prototype.constructor=At;At.prototype.isLineCurve=!0;At.prototype.getPoint=function(e){if(e===1)return this.v2.clone();var t=this.v2.clone().sub(this.v1);return t.multiplyScalar(e).add(this.v1),t};At.prototype.getPointAt=function(e){return this.getPoint(e)};At.prototype.getTangent=function(e){var t=this.v2.clone().sub(this.v1);return t.normalize()};function ci(){Fe.call(this),this.curves=[],this.autoClose=!1}ci.prototype=Object.assign(Object.create(Fe.prototype),{constructor:ci,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new At(t,e))},getPoint:function(e){for(var t=e*this.getLength(),n=this.getCurveLengths(),r=0;r<n.length;){if(n[r]>=t){var i=n[r]-t,a=this.curves[r],o=a.getLength(),s=o===0?0:1-i/o;return a.getPointAt(s)}r++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e){e===void 0&&(e=40);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t=[],n,r=0,i=this.curves;r<i.length;r++)for(var a=i[r],o=a&&a.isEllipseCurve?e*2:a&&a.isLineCurve?1:a&&a.isSplineCurve?e*a.points.length:e,s=a.getPoints(o),c=0;c<s.length;c++){var h=s[c];n&&n.equals(h)||(t.push(h),n=h)}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t},createPointsGeometry:function(e){var t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){var t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){for(var t=new le,n=0,r=e.length;n<r;n++){var i=e[n];t.vertices.push(new T(i.x,i.y,i.z||0))}return t}});function Bt(e,t,n,r,i,a,o,s){Fe.call(this),this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=i,this.aEndAngle=a,this.aClockwise=o,this.aRotation=s||0}Bt.prototype=Object.create(Fe.prototype);Bt.prototype.constructor=Bt;Bt.prototype.isEllipseCurve=!0;Bt.prototype.getPoint=function(e){for(var t=Math.PI*2,n=this.aEndAngle-this.aStartAngle,r=Math.abs(n)<Number.EPSILON;n<0;)n+=t;for(;n>t;)n-=t;n<Number.EPSILON&&(r?n=0:n=t),this.aClockwise===!0&&!r&&(n===t?n=-t:n=n-t);var i=this.aStartAngle+e*n,a=this.aX+this.xRadius*Math.cos(i),o=this.aY+this.yRadius*Math.sin(i);if(this.aRotation!==0){var s=Math.cos(this.aRotation),c=Math.sin(this.aRotation),h=a-this.aX,u=o-this.aY;a=h*s-u*c+this.aX,o=h*c+u*s+this.aY}return new q(a,o)};function vn(e){Fe.call(this),this.points=e===void 0?[]:e}vn.prototype=Object.create(Fe.prototype);vn.prototype.constructor=vn;vn.prototype.isSplineCurve=!0;vn.prototype.getPoint=function(e){var t=this.points,n=(t.length-1)*e,r=Math.floor(n),i=n-r,a=t[r===0?r:r-1],o=t[r],s=t[r>t.length-2?t.length-1:r+1],c=t[r>t.length-3?t.length-1:r+2];return new q(io(i,a.x,o.x,s.x,c.x),io(i,a.y,o.y,s.y,c.y))};function cr(e,t,n,r){Fe.call(this),this.v0=e,this.v1=t,this.v2=n,this.v3=r}cr.prototype=Object.create(Fe.prototype);cr.prototype.constructor=cr;cr.prototype.getPoint=function(e){var t=this.v0,n=this.v1,r=this.v2,i=this.v3;return new q(In(e,t.x,n.x,r.x,i.x),In(e,t.y,n.y,r.y,i.y))};function hr(e,t,n){Fe.call(this),this.v0=e,this.v1=t,this.v2=n}hr.prototype=Object.create(Fe.prototype);hr.prototype.constructor=hr;hr.prototype.getPoint=function(e){var t=this.v0,n=this.v1,r=this.v2;return new q(Cn(e,t.x,n.x,r.x),Cn(e,t.y,n.y,r.y))};var Ia=Object.assign(Object.create(ci.prototype),{fromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y)},moveTo:function(e,t){this.currentPoint.set(e,t)},lineTo:function(e,t){var n=new At(this.currentPoint.clone(),new q(e,t));this.curves.push(n),this.currentPoint.set(e,t)},quadraticCurveTo:function(e,t,n,r){var i=new hr(this.currentPoint.clone(),new q(e,t),new q(n,r));this.curves.push(i),this.currentPoint.set(n,r)},bezierCurveTo:function(e,t,n,r,i,a){var o=new cr(this.currentPoint.clone(),new q(e,t),new q(n,r),new q(i,a));this.curves.push(o),this.currentPoint.set(i,a)},splineThru:function(e){var t=[this.currentPoint.clone()].concat(e),n=new vn(t);this.curves.push(n),this.currentPoint.copy(e[e.length-1])},arc:function(e,t,n,r,i,a){var o=this.currentPoint.x,s=this.currentPoint.y;this.absarc(e+o,t+s,n,r,i,a)},absarc:function(e,t,n,r,i,a){this.absellipse(e,t,n,n,r,i,a)},ellipse:function(e,t,n,r,i,a,o,s){var c=this.currentPoint.x,h=this.currentPoint.y;this.absellipse(e+c,t+h,n,r,i,a,o,s)},absellipse:function(e,t,n,r,i,a,o,s){var c=new Bt(e,t,n,r,i,a,o,s);if(this.curves.length>0){var h=c.getPoint(0);h.equals(this.currentPoint)||this.lineTo(h.x,h.y)}this.curves.push(c);var u=c.getPoint(1);this.currentPoint.copy(u)}});function Mi(e){ci.call(this),this.currentPoint=new q,e&&this.fromPoints(e)}Mi.prototype=Ia;Ia.constructor=Mi;function nn(){Mi.apply(this,arguments),this.holes=[]}nn.prototype=Object.assign(Object.create(Ia),{constructor:nn,getPointsHoles:function(e){for(var t=[],n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t},extractAllPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},extractPoints:function(e){return this.extractAllPoints(e)}});function jo(){this.subPaths=[],this.currentPath=null}Object.assign(jo.prototype,{moveTo:function(e,t){this.currentPath=new Mi,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t)},lineTo:function(e,t){this.currentPath.lineTo(e,t)},quadraticCurveTo:function(e,t,n,r){this.currentPath.quadraticCurveTo(e,t,n,r)},bezierCurveTo:function(e,t,n,r,i,a){this.currentPath.bezierCurveTo(e,t,n,r,i,a)},splineThru:function(e){this.currentPath.splineThru(e)},toShapes:function(e,t){function n(B){for(var I=[],N=0,z=B.length;N<z;N++){var V=B[N],W=new nn;W.curves=V.curves,I.push(W)}return I}function r(B,I){for(var N=I.length,z=!1,V=N-1,W=0;W<N;V=W++){var X=I[V],Y=I[W],j=Y.x-X.x,re=Y.y-X.y;if(Math.abs(re)>Number.EPSILON){if(re<0&&(X=I[W],j=-j,Y=I[V],re=-re),B.y<X.y||B.y>Y.y)continue;if(B.y===X.y){if(B.x===X.x)return!0}else{var O=re*(B.x-X.x)-j*(B.y-X.y);if(O===0)return!0;if(O<0)continue;z=!z}}else{if(B.y!==X.y)continue;if(Y.x<=B.x&&B.x<=X.x||X.x<=B.x&&B.x<=Y.x)return!0}}return z}var i=vt.isClockWise,a=this.subPaths;if(a.length===0)return[];if(t===!0)return n(a);var o,s,c,h=[];if(a.length===1)return s=a[0],c=new nn,c.curves=s.curves,h.push(c),h;var u=!i(a[0].getPoints());u=e?!u:u;var l=[],f=[],d=[],p=0,y;f[p]=void 0,d[p]=[];for(var x=0,m=a.length;x<m;x++)s=a[x],y=s.getPoints(),o=i(y),o=e?!o:o,o?(!u&&f[p]&&p++,f[p]={s:new nn,p:y},f[p].s.curves=s.curves,u&&p++,d[p]=[]):d[p].push({h:s,p:y[0]});if(!f[0])return n(a);if(f.length>1){for(var v=!1,g=[],_=0,M=f.length;_<M;_++)l[_]=[];for(var _=0,M=f.length;_<M;_++)for(var w=d[_],A=0;A<w.length;A++){for(var P=w[A],S=!0,C=0;C<f.length;C++)r(P.p,f[C].p)&&(_!==C&&g.push({froms:_,tos:C,hole:A}),S?(S=!1,l[C].push(P)):v=!0);S&&l[_].push(P)}g.length>0&&(v||(d=l))}for(var D,x=0,H=f.length;x<H;x++){c=f[x].s,h.push(c),D=d[x];for(var L=0,E=D.length;L<E;L++)c.holes.push(D[L].h)}return h}});function Yo(e){this.data=e}Object.assign(Yo.prototype,{isFont:!0,generateShapes:function(e,t,n){function r(u){for(var l=String(u).split(""),f=t/a.resolution,d=(a.boundingBox.yMax-a.boundingBox.yMin+a.underlineThickness)*f,p=0,y=0,x=[],m=0;m<l.length;m++){var v=l[m];if(v===`
`)p=0,y-=d;else{var g=i(v,f,p,y);p+=g.offsetX,x.push(g.path)}}return x}function i(u,l,f,d){var p=a.glyphs[u]||a.glyphs["?"];if(p){var y=new jo,x=[],m,v,g,_,M,w,A,P,S;if(p.o)for(var C=p._cachedOutline||(p._cachedOutline=p.o.split(" ")),D=0,H=C.length;D<H;){var L=C[D++];switch(L){case"m":m=C[D++]*l+f,v=C[D++]*l+d,y.moveTo(m,v);break;case"l":m=C[D++]*l+f,v=C[D++]*l+d,y.lineTo(m,v);break;case"q":g=C[D++]*l+f,_=C[D++]*l+d,M=C[D++]*l+f,w=C[D++]*l+d,y.quadraticCurveTo(M,w,g,_),S=x[x.length-1],S&&(S.x,S.y);break;case"b":g=C[D++]*l+f,_=C[D++]*l+d,M=C[D++]*l+f,w=C[D++]*l+d,A=C[D++]*l+f,P=C[D++]*l+d,y.bezierCurveTo(M,w,A,P,g,_),S=x[x.length-1],S&&(S.x,S.y);break}}return{offsetX:p.ha*l,path:y}}}t===void 0&&(t=100);for(var a=this.data,o=r(e),s=[],c=0,h=o.length;c<h;c++)Array.prototype.push.apply(s,o[c].toShapes());return s}});function Fl(e){this.manager=e!==void 0?e:lt}Object.assign(Fl.prototype,{load:function(e,t,n,r){var i=this,a=new Rt(this.manager);a.load(e,function(o){var s;try{s=JSON.parse(o)}catch{console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),s=JSON.parse(o.substring(65,o.length-2))}var c=i.parse(s);t&&t(c)},n,r)},parse:function(e){return new Yo(e)}});var Er,qo={getContext:function(){return Er===void 0&&(Er=new(window.AudioContext||window.webkitAudioContext)),Er},setContext:function(e){Er=e}};function Zo(e){this.manager=e!==void 0?e:lt}Object.assign(Zo.prototype,{load:function(e,t,n,r){var i=new Rt(this.manager);i.setResponseType("arraybuffer"),i.load(e,function(a){var o=qo.getContext();o.decodeAudioData(a,function(s){t(s)})},n,r)}});function Ol(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new ze,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new ze,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}Object.assign(Ol.prototype,{update:function(){var e,t,n,r,i,a,o,s,c=new ue,h=new ue;return function(l){var f=e!==this||t!==l.focus||n!==l.fov||r!==l.aspect*this.aspect||i!==l.near||a!==l.far||o!==l.zoom||s!==this.eyeSep;if(f){e=this,t=l.focus,n=l.fov,r=l.aspect*this.aspect,i=l.near,a=l.far,o=l.zoom;var d=l.projectionMatrix.clone();s=this.eyeSep/2;var p=s*i/t,y=i*Math.tan(me.DEG2RAD*n*.5)/o,x,m;h.elements[12]=-s,c.elements[12]=s,x=-y*r+p,m=y*r+p,d.elements[0]=2*i/(m-x),d.elements[8]=(m+x)/(m-x),this.cameraL.projectionMatrix.copy(d),x=-y*r-p,m=y*r-p,d.elements[0]=2*i/(m-x),d.elements[8]=(m+x)/(m-x),this.cameraR.projectionMatrix.copy(d)}this.cameraL.matrixWorld.copy(l.matrixWorld).multiply(h),this.cameraR.matrixWorld.copy(l.matrixWorld).multiply(c)}}()});function hi(e,t,n){J.call(this),this.type="CubeCamera";var r=90,i=1,a=new ze(r,i,e,t);a.up.set(0,-1,0),a.lookAt(new T(1,0,0)),this.add(a);var o=new ze(r,i,e,t);o.up.set(0,-1,0),o.lookAt(new T(-1,0,0)),this.add(o);var s=new ze(r,i,e,t);s.up.set(0,0,1),s.lookAt(new T(0,1,0)),this.add(s);var c=new ze(r,i,e,t);c.up.set(0,0,-1),c.lookAt(new T(0,-1,0)),this.add(c);var h=new ze(r,i,e,t);h.up.set(0,-1,0),h.lookAt(new T(0,0,1)),this.add(h);var u=new ze(r,i,e,t);u.up.set(0,-1,0),u.lookAt(new T(0,0,-1)),this.add(u);var l={format:Un,magFilter:tt,minFilter:tt};this.renderTarget=new On(n,n,l),this.renderTarget.texture.name="CubeCamera",this.update=function(f,d){this.parent===null&&this.updateMatrixWorld();var p=this.renderTarget,y=p.texture.generateMipmaps;p.texture.generateMipmaps=!1,p.activeCubeFace=0,f.render(d,a,p),p.activeCubeFace=1,f.render(d,o,p),p.activeCubeFace=2,f.render(d,s,p),p.activeCubeFace=3,f.render(d,c,p),p.activeCubeFace=4,f.render(d,h,p),p.texture.generateMipmaps=y,p.activeCubeFace=5,f.render(d,u,p),f.setRenderTarget(null)},this.clear=function(f,d,p,y){for(var x=this.renderTarget,m=0;m<6;m++)x.activeCubeFace=m,f.setRenderTarget(x),f.clear(d,p,y);f.setRenderTarget(null)}}hi.prototype=Object.create(J.prototype);hi.prototype.constructor=hi;function ao(){J.call(this),this.type="AudioListener",this.context=qo.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}ao.prototype=Object.assign(Object.create(J.prototype),{constructor:ao,getInput:function(){return this.gain},removeFilter:function(){this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(e){this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){this.gain.gain.value=e},updateMatrixWorld:function(){var e=new T,t=new Ge,n=new T,r=new T;return function(a){J.prototype.updateMatrixWorld.call(this,a);var o=this.context.listener,s=this.up;this.matrixWorld.decompose(e,t,n),r.set(0,0,-1).applyQuaternion(t),o.positionX?(o.positionX.setValueAtTime(e.x,this.context.currentTime),o.positionY.setValueAtTime(e.y,this.context.currentTime),o.positionZ.setValueAtTime(e.z,this.context.currentTime),o.forwardX.setValueAtTime(r.x,this.context.currentTime),o.forwardY.setValueAtTime(r.y,this.context.currentTime),o.forwardZ.setValueAtTime(r.z,this.context.currentTime),o.upX.setValueAtTime(s.x,this.context.currentTime),o.upY.setValueAtTime(s.y,this.context.currentTime),o.upZ.setValueAtTime(s.z,this.context.currentTime)):(o.setPosition(e.x,e.y,e.z),o.setOrientation(r.x,r.y,r.z,s.x,s.y,s.z))}}()});function ur(e){J.call(this),this.type="Audio",this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.startTime=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}ur.prototype=Object.assign(Object.create(J.prototype),{constructor:ur,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.onended=this.onEnded.bind(this),e.playbackRate.setValueAtTime(this.playbackRate,this.startTime),e.start(0,this.startTime),this.isPlaying=!0,this.source=e,this.connect()},pause:function(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.source.stop(),this.startTime=this.context.currentTime,this.isPlaying=!1,this},stop:function(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.source.stop(),this.startTime=0,this.isPlaying=!1,this},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),this.isPlaying===!0?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.value=e,this}});function oo(e){ur.call(this,e),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}oo.prototype=Object.assign(Object.create(ur.prototype),{constructor:oo,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){this.panner.refDistance=e},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){this.panner.rolloffFactor=e},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){this.panner.distanceModel=e},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){this.panner.maxDistance=e},updateMatrixWorld:function(){var e=new T;return function(n){J.prototype.updateMatrixWorld.call(this,n),e.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(e.x,e.y,e.z)}}()});function Jo(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t!==void 0?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}Object.assign(Jo.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}});function Qo(e,t,n){this.binding=e,this.valueSize=n;var r=Float64Array,i;switch(t){case"quaternion":i=this._slerp;break;case"string":case"bool":r=Array,i=this._select;break;default:i=this._lerp}this.buffer=new r(n*4),this._mixBufferRegion=i,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}Object.assign(Qo.prototype,{accumulate:function(e,t){var n=this.buffer,r=this.valueSize,i=e*r+r,a=this.cumulativeWeight;if(a===0){for(var o=0;o!==r;++o)n[i+o]=n[o];a=t}else{a+=t;var s=t/a;this._mixBufferRegion(n,i,0,s,r)}this.cumulativeWeight=a},apply:function(e){var t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,a=this.binding;if(this.cumulativeWeight=0,i<1){var o=t*3;this._mixBufferRegion(n,r,o,1-i,t)}for(var s=t,c=t+t;s!==c;++s)if(n[s]!==n[s+t]){a.setValue(n,r);break}},saveOriginalState:function(){var e=this.binding,t=this.buffer,n=this.valueSize,r=n*3;e.getValue(t,r);for(var i=n,a=r;i!==a;++i)t[i]=t[r+i%n];this.cumulativeWeight=0},restoreOriginalState:function(){var e=this.valueSize*3;this.binding.setValue(this.buffer,e)},_select:function(e,t,n,r,i){if(r>=.5)for(var a=0;a!==i;++a)e[t+a]=e[n+a]},_slerp:function(e,t,n,r){Ge.slerpFlat(e,t,e,t,e,n,r)},_lerp:function(e,t,n,r,i){for(var a=1-r,o=0;o!==i;++o){var s=t+o;e[s]=e[s]*a+e[n+o]*r}}});function Ko(e,t,n){var r=n||Ye.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}Object.assign(Ko.prototype,{getValue:function(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,r=this._bindings[n];r!==void 0&&r.getValue(e,t)},setValue:function(e,t){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}});function Ye(e,t,n){this.path=t,this.parsedPath=n||Ye.parseTrackName(t),this.node=Ye.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}Object.assign(Ye,{Composite:Ko,create:function(e,t,n){return e&&e.isAnimationObjectGroup?new Ye.Composite(e,t,n):new Ye(e,t,n)},sanitizeNodeName:function(e){return e.replace(/\s/g,"_").replace(/[^\w-]/g,"")},parseTrackName:function(){var e=/((?:[\w-]+[\/:])*)/,t=/([\w-\.]+)?/,n=/(?:\.([\w-]+)(?:\[(.+)\])?)?/,r=/\.([\w-]+)(?:\[(.+)\])?/,i=new RegExp("^"+e.source+t.source+n.source+r.source+"$"),a=["material","materials","bones"];return function(o){var s=i.exec(o);if(!s)throw new Error("PropertyBinding: Cannot parse trackName: "+o);var c={nodeName:s[2],objectName:s[3],objectIndex:s[4],propertyName:s[5],propertyIndex:s[6]},h=c.nodeName&&c.nodeName.lastIndexOf(".");if(h!==void 0&&h!==-1){var u=c.nodeName.substring(h+1);a.indexOf(u)!==-1&&(c.nodeName=c.nodeName.substring(0,h),c.objectName=u)}if(c.propertyName===null||c.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+o);return c}}(),findNode:function(e,t){if(!t||t===""||t==="root"||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=function(o){for(var s=0;s<o.bones.length;s++){var c=o.bones[s];if(c.name===t)return c}return null},r=n(e.skeleton);if(r)return r}if(e.children){var i=function(o){for(var s=0;s<o.length;s++){var c=o[s];if(c.name===t||c.uuid===t)return c;var h=i(c.children);if(h)return h}return null},a=i(e.children);if(a)return a}return null}});Object.assign(Ye.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,n){t[n]=this.node[this.propertyName]},function(t,n){for(var r=this.resolvedProperty,i=0,a=r.length;i!==a;++i)t[n++]=r[i]},function(t,n){t[n]=this.resolvedProperty[this.propertyIndex]},function(t,n){this.resolvedProperty.toArray(t,n)}],SetterByBindingTypeAndVersioning:[[function(t,n){this.node[this.propertyName]=t[n]},function(t,n){this.node[this.propertyName]=t[n],this.targetObject.needsUpdate=!0},function(t,n){this.node[this.propertyName]=t[n],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,n){for(var r=this.resolvedProperty,i=0,a=r.length;i!==a;++i)r[i]=t[n++]},function(t,n){for(var r=this.resolvedProperty,i=0,a=r.length;i!==a;++i)r[i]=t[n++];this.targetObject.needsUpdate=!0},function(t,n){for(var r=this.resolvedProperty,i=0,a=r.length;i!==a;++i)r[i]=t[n++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,n){this.resolvedProperty[this.propertyIndex]=t[n]},function(t,n){this.resolvedProperty[this.propertyIndex]=t[n],this.targetObject.needsUpdate=!0},function(t,n){this.resolvedProperty[this.propertyIndex]=t[n],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,n){this.resolvedProperty.fromArray(t,n)},function(t,n){this.resolvedProperty.fromArray(t,n),this.targetObject.needsUpdate=!0},function(t,n){this.resolvedProperty.fromArray(t,n),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(t,n){this.bind(),this.getValue(t,n)},setValue:function(t,n){this.bind(),this.setValue(t,n)},bind:function(){var e=this.node,t=this.parsedPath,n=t.objectName,r=t.propertyName,i=t.propertyIndex;if(e||(e=Ye.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(n){var a=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(var o=0;o<e.length;o++)if(e[o].name===a){a=o;break}break;default:if(e[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(a!==void 0){if(e[a]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[a]}}var s=e[r];if(s===void 0){var c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+r+" but it wasn't found.",e);return}var h=this.Versioning.None;e.needsUpdate!==void 0?(h=this.Versioning.NeedsUpdate,this.targetObject=e):e.matrixWorldNeedsUpdate!==void 0&&(h=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=e);var u=this.BindingType.Direct;if(i!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}for(var o=0;o<this.node.geometry.morphAttributes.position.length;o++)if(e.geometry.morphAttributes.position[o].name===i){i=o;break}}else{if(!e.geometry.morphTargets){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);return}for(var o=0;o<this.node.geometry.morphTargets.length;o++)if(e.geometry.morphTargets[o].name===i){i=o;break}}}u=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=i}else s.fromArray!==void 0&&s.toArray!==void 0?(u=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(u=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][h]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}});//!\ DECLARE ALIAS AFTER assign prototype !
Object.assign(Ye.prototype,{_getValue_unbound:Ye.prototype.getValue,_setValue_unbound:Ye.prototype.setValue});function Nl(e){this.uuid=me.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var n=0,r=arguments.length;n!==r;++n)t[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var i=this;this.stats={objects:{get total(){return i._objects.length},get inUse(){return this.total-i.nCachedObjects_}},get bindingsPerObject(){return i._bindings.length}}}Object.assign(Nl.prototype,{isAnimationObjectGroup:!0,add:function(e){for(var t=this._objects,n=t.length,r=this.nCachedObjects_,i=this._indicesByUUID,a=this._paths,o=this._parsedPaths,s=this._bindings,c=s.length,h=0,u=arguments.length;h!==u;++h){var l=arguments[h],f=l.uuid,d=i[f],p=void 0;if(d===void 0){d=n++,i[f]=d,t.push(l);for(var y=0,x=c;y!==x;++y)s[y].push(new Ye(l,a[y],o[y]))}else if(d<r){p=t[d];var m=--r,v=t[m];i[v.uuid]=d,t[d]=v,i[f]=m,t[m]=l;for(var y=0,x=c;y!==x;++y){var g=s[y],_=g[m],M=g[d];g[d]=_,M===void 0&&(M=new Ye(l,a[y],o[y])),g[m]=M}}else t[d]!==p&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=r},remove:function(e){for(var t=this._objects,n=this.nCachedObjects_,r=this._indicesByUUID,i=this._bindings,a=i.length,o=0,s=arguments.length;o!==s;++o){var c=arguments[o],h=c.uuid,u=r[h];if(u!==void 0&&u>=n){var l=n++,f=t[l];r[f.uuid]=u,t[u]=f,r[h]=l,t[l]=c;for(var d=0,p=a;d!==p;++d){var y=i[d],x=y[l],m=y[u];y[u]=x,y[l]=m}}}this.nCachedObjects_=n},uncache:function(e){for(var t=this._objects,n=t.length,r=this.nCachedObjects_,i=this._indicesByUUID,a=this._bindings,o=a.length,s=0,c=arguments.length;s!==c;++s){var h=arguments[s],u=h.uuid,l=i[u];if(l!==void 0)if(delete i[u],l<r){var f=--r,d=t[f],p=--n,y=t[p];i[d.uuid]=l,t[l]=d,i[y.uuid]=f,t[f]=y,t.pop();for(var x=0,m=o;x!==m;++x){var v=a[x],g=v[f],_=v[p];v[l]=g,v[f]=_,v.pop()}}else{var p=--n,y=t[p];i[y.uuid]=l,t[l]=y,t.pop();for(var x=0,m=o;x!==m;++x){var v=a[x];v[l]=v[p],v.pop()}}}this.nCachedObjects_=r},subscribe_:function(e,t){var n=this._bindingsIndicesByPath,r=n[e],i=this._bindings;if(r!==void 0)return i[r];var a=this._paths,o=this._parsedPaths,s=this._objects,c=s.length,h=this.nCachedObjects_,u=new Array(c);r=i.length,n[e]=r,a.push(e),o.push(t),i.push(u);for(var l=h,f=s.length;l!==f;++l){var d=s[l];u[l]=new Ye(d,e,t)}return u},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,n=t[e];if(n!==void 0){var r=this._paths,i=this._parsedPaths,a=this._bindings,o=a.length-1,s=a[o],c=e[o];t[c]=n,a[n]=s,a.pop(),i[n]=i[o],i.pop(),r[n]=r[o],r.pop()}}});function $o(e,t,n){this._mixer=e,this._clip=t,this._localRoot=n||null;for(var r=t.tracks,i=r.length,a=new Array(i),o={endingStart:an,endingEnd:an},s=0;s!==i;++s){var c=r[s].createInterpolant(null);a[s]=c,c.settings=o}this._interpolantSettings=o,this._interpolants=a,this._propertyBindings=new Array(i),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=tc,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}Object.assign($o.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var r=this._clip.duration,i=e._clip.duration,a=i/r,o=r/i;e.warp(1,a,t),this.warp(o,1,t)}return this},crossFadeTo:function(e,t,n){return e.crossFadeFrom(this,t,n)},stopFading:function(){var e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,n){var r=this._mixer,i=r.time,a=this._timeScaleInterpolant,o=this.timeScale;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);var s=a.parameterPositions,c=a.sampleValues;return s[0]=i,s[1]=i+n,c[0]=e/o,c[1]=t/o,this},stopWarping:function(){var e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,n,r){if(!this.enabled){this._updateWeight(e);return}var i=this._startTime;if(i!==null){var a=(e-i)*n;if(a<0||n===0)return;this._startTime=null,t=n*a}t*=this._updateTimeScale(e);var o=this._updateTime(t),s=this._updateWeight(e);if(s>0)for(var c=this._interpolants,h=this._propertyBindings,u=0,l=c.length;u!==l;++u)c[u].evaluate(o),h[u].accumulate(r,s)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(n!==null){var r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;if(n!==null){var r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t},_updateTime:function(e){var t=this.time+e;if(e===0)return t;var n=this._clip.duration,r=this.loop,i=this._loopCount;if(r===ec){i===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(t>=n)t=n;else if(t<0)t=0;else break e;this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{var a=r===nc;if(i===-1&&(e>=0?(i=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),t>=n||t<0){var o=Math.floor(t/n);t-=n*o,i+=Math.abs(o);var s=this.repetitions-i;if(s<0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,t=e>0?n:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(s===0){var c=e<0;this._setEndings(c,!c,a)}else this._setEndings(!1,!1,a);this._loopCount=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}if(a&&(i&1)===1)return this.time=t,n-t}return this.time=t,t},_setEndings:function(e,t,n){var r=this._interpolantSettings;n?(r.endingStart=$t,r.endingEnd=$t):(e?r.endingStart=this.zeroSlopeAtStart?$t:an:r.endingStart=Ir,t?r.endingEnd=this.zeroSlopeAtEnd?$t:an:r.endingEnd=Ir)},_scheduleFading:function(e,t,n){var r=this._mixer,i=r.time,a=this._weightInterpolant;a===null&&(a=r._lendControlInterpolant(),this._weightInterpolant=a);var o=a.parameterPositions,s=a.sampleValues;return o[0]=i,s[0]=t,o[1]=i+e,s[1]=n,this}});function Bl(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}Object.assign(Bl.prototype,Lt.prototype,{_bindAction:function(e,t){var n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,a=e._propertyBindings,o=e._interpolants,s=n.uuid,c=this._bindingsByRootAndName,h=c[s];h===void 0&&(h={},c[s]=h);for(var u=0;u!==i;++u){var l=r[u],f=l.name,d=h[f];if(d!==void 0)a[u]=d;else{if(d=a[u],d!==void 0){d._cacheIndex===null&&(++d.referenceCount,this._addInactiveBinding(d,s,f));continue}var p=t&&t._propertyBindings[u].binding.parsedPath;d=new Qo(Ye.create(n,f,p),l.ValueTypeName,l.getValueSize()),++d.referenceCount,this._addInactiveBinding(d,s,f),a[u]=d}o[u].resultBuffer=d.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}for(var i=e._propertyBindings,a=0,o=i.length;a!==o;++a){var s=i[a];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];--i.useCount===0&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return t!==null&&t<this._nActiveActions},_addInactiveAction:function(e,t,n){var r=this._actions,i=this._actionsByClip,a=i[t];if(a===void 0)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=a;else{var o=a.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=r.length,r.push(e),a.actionByRoot[n]=e},_removeInactiveAction:function(e){var t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;var i=e._clip.uuid,a=this._actionsByClip,o=a[i],s=o.knownActions,c=s[s.length-1],h=e._byClipCacheIndex;c._byClipCacheIndex=h,s[h]=c,s.pop(),e._byClipCacheIndex=null;var u=o.actionByRoot,l=(e._localRoot||this._root).uuid;delete u[l],s.length===0&&delete a[i],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];--i.referenceCount===0&&this._removeInactiveBinding(i)}},_lendAction:function(e){var t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_takeBackAction:function(e){var t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_addInactiveBinding:function(e,t,n){var r=this._bindingsByRootAndName,i=r[t],a=this._bindings;i===void 0&&(i={},r[t]=i),i[n]=e,e._cacheIndex=a.length,a.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,a=this._bindingsByRootAndName,o=a[r],s=t[t.length-1],c=e._cacheIndex;s._cacheIndex=c,t[c]=s,t.pop(),delete o[i];e:{for(var h in o)break e;delete a[r]}},_lendBinding:function(e){var t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_takeBackBinding:function(e){var t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return n===void 0&&(n=new oi(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=t,e[t]=n),n},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t){var n=t||this._root,r=n.uuid,i=typeof e=="string"?pt.findByName(n,e):e,a=i!==null?i.uuid:e,o=this._actionsByClip[a],s=null;if(o!==void 0){var c=o.actionByRoot[r];if(c!==void 0)return c;s=o.knownActions[0],i===null&&(i=s._clip)}if(i===null)return null;var h=new $o(this,i,t);return this._bindAction(h,s),this._addInactiveAction(h,a,r),h},existingAction:function(e,t){var n=t||this._root,r=n.uuid,i=typeof e=="string"?pt.findByName(n,e):e,a=i?i.uuid:e,o=this._actionsByClip[a];return o!==void 0&&o.actionByRoot[r]||null},stopAllAction:function(){var e=this._actions,t=this._nActiveActions,n=this._bindings,r=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var i=0;i!==t;++i)e[i].reset();for(var i=0;i!==r;++i)n[i].useCount=0;return this},update:function(e){e*=this.timeScale;for(var t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),a=this._accuIndex^=1,o=0;o!==n;++o){var s=t[o];s._update(r,e,i,a)}for(var c=this._bindings,h=this._nActiveBindings,o=0;o!==h;++o)c[o].apply(a);return this},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(i!==void 0){for(var a=i.knownActions,o=0,s=a.length;o!==s;++o){var c=a[o];this._deactivateAction(c);var h=c._cacheIndex,u=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,u._cacheIndex=h,t[h]=u,t.pop(),this._removeInactiveBindingsForAction(c)}delete r[n]}},uncacheRoot:function(e){var t=e.uuid,n=this._actionsByClip;for(var r in n){var i=n[r].actionByRoot,a=i[t];a!==void 0&&(this._deactivateAction(a),this._removeInactiveAction(a))}var o=this._bindingsByRootAndName,s=o[t];if(s!==void 0)for(var c in s){var h=s[c];h.restoreOriginalState(),this._removeInactiveBinding(h)}},uncacheAction:function(e,t){var n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}});function pa(e){typeof e=="string"&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}pa.prototype.clone=function(){return new pa(this.value.clone===void 0?this.value:this.value.clone())};function so(){te.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}so.prototype=Object.assign(Object.create(te.prototype),{constructor:so,isInstancedBufferGeometry:!0,addGroup:function(e,t,n){this.groups.push({start:e,count:t,materialIndex:n})},copy:function(e){var t=e.index;t!==null&&this.setIndex(t.clone());var n=e.attributes;for(var r in n){var i=n[r];this.addAttribute(r,i.clone())}for(var a=e.groups,o=0,s=a.length;o<s;o++){var c=a[o];this.addGroup(c.start,c.count,c.materialIndex)}return this}});function es(e,t,n,r){this.uuid=me.generateUUID(),this.data=e,this.itemSize=t,this.offset=n,this.normalized=r===!0}Object.defineProperties(es.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}});Object.assign(es.prototype,{isInterleavedBufferAttribute:!0,setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}});function lr(e,t){this.uuid=me.generateUUID(),this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}Object.defineProperty(lr.prototype,"needsUpdate",{set:function(e){e===!0&&this.version++}});Object.assign(lr.prototype,{isInterleavedBuffer:!0,setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=e!==void 0?e.length/this.stride:0,this.array=e},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.stride,n*=t.stride;for(var r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this},set:function(e,t){return t===void 0&&(t=0),this.array.set(e,t),this},clone:function(){return new this.constructor().copy(this)},onUpload:function(e){return this.onUploadCallback=e,this}});function co(e,t,n){lr.call(this,e,t),this.meshPerAttribute=n||1}co.prototype=Object.assign(Object.create(lr.prototype),{constructor:co,isInstancedInterleavedBuffer:!0,copy:function(e){return lr.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}});function ho(e,t,n){xe.call(this,e,t),this.meshPerAttribute=n||1}ho.prototype=Object.assign(Object.create(xe.prototype),{constructor:ho,isInstancedBufferAttribute:!0,copy:function(e){return xe.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}});function zl(e,t,n,r){this.ray=new wn(e,t),this.near=n||0,this.far=r||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function uo(e,t){return e.distance-t.distance}function ya(e,t,n,r){if(e.visible!==!1&&(e.raycast(t,n),r===!0))for(var i=e.children,a=0,o=i.length;a<o;a++)ya(i[a],t,n,!0)}Object.assign(zl.prototype,{linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize()):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t){var n=[];return ya(e,this,n,t),n.sort(uo),n},intersectObjects:function(e,t){var n=[];if(Array.isArray(e)===!1)return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),n;for(var r=0,i=e.length;r<i;r++)ya(e[r],this,n,t);return n.sort(uo),n}});function Gl(e){this.autoStart=e!==void 0?e:!0,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}Object.assign(Gl.prototype,{start:function(){this.startTime=(typeof performance>"u"?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=(typeof performance>"u"?Date:performance).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}});function Hl(e,t,n){return this.radius=e!==void 0?e:1,this.phi=t!==void 0?t:0,this.theta=n!==void 0?n:0,this}Object.assign(Hl.prototype,{set:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){var e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this},setFromVector3:function(e){return this.radius=e.length(),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e.x,e.z),this.phi=Math.acos(me.clamp(e.y/this.radius,-1,1))),this}});function Vl(e,t,n){return this.radius=e!==void 0?e:1,this.theta=t!==void 0?t:0,this.y=n!==void 0?n:0,this}Object.assign(Vl.prototype,{set:function(e,t,n){return this.radius=e,this.theta=t,this.y=n,this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.radius=Math.sqrt(e.x*e.x+e.z*e.z),this.theta=Math.atan2(e.x,e.z),this.y=e.y,this}});function ui(e){J.call(this),this.material=e,this.render=function(t){}}ui.prototype=Object.create(J.prototype);ui.prototype.constructor=ui;ui.prototype.isImmediateRenderObject=!0;function li(e,t,n,r){this.object=e,this.size=t!==void 0?t:1;var i=n!==void 0?n:16711680,a=r!==void 0?r:1,o=0,s=this.object.geometry;s&&s.isGeometry?o=s.faces.length*3:s&&s.isBufferGeometry&&(o=s.attributes.normal.count);var c=new te,h=new Z(o*2*3,3);c.addAttribute("position",h),Be.call(this,c,new Ue({color:i,linewidth:a})),this.matrixAutoUpdate=!1,this.update()}li.prototype=Object.create(Be.prototype);li.prototype.constructor=li;li.prototype.update=function(){var e=new T,t=new T,n=new _t;return function(){var i=["a","b","c"];this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);var a=this.object.matrixWorld,o=this.geometry.attributes.position,s=this.object.geometry;if(s&&s.isGeometry)for(var c=s.vertices,h=s.faces,u=0,l=0,f=h.length;l<f;l++)for(var d=h[l],p=0,y=d.vertexNormals.length;p<y;p++){var x=c[d[i[p]]],m=d.vertexNormals[p];e.copy(x).applyMatrix4(a),t.copy(m).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),o.setXYZ(u,e.x,e.y,e.z),u=u+1,o.setXYZ(u,t.x,t.y,t.z),u=u+1}else if(s&&s.isBufferGeometry)for(var v=s.attributes.position,g=s.attributes.normal,u=0,p=0,y=v.count;p<y;p++)e.set(v.getX(p),v.getY(p),v.getZ(p)).applyMatrix4(a),t.set(g.getX(p),g.getY(p),g.getZ(p)),t.applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),o.setXYZ(u,e.x,e.y,e.z),u=u+1,o.setXYZ(u,t.x,t.y,t.z),u=u+1;o.needsUpdate=!0}}();function fr(e,t){J.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;for(var n=new te,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],i=0,a=1,o=32;i<o;i++,a++){var s=i/o*Math.PI*2,c=a/o*Math.PI*2;r.push(Math.cos(s),Math.sin(s),1,Math.cos(c),Math.sin(c),1)}n.addAttribute("position",new Z(r,3));var h=new Ue({fog:!1});this.cone=new Be(n,h),this.add(this.cone),this.update()}fr.prototype=Object.create(J.prototype);fr.prototype.constructor=fr;fr.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()};fr.prototype.update=function(){var e=new T,t=new T;return function(){this.light.updateMatrixWorld();var r=this.light.distance?this.light.distance:1e3,i=r*Math.tan(this.light.angle);this.cone.scale.set(i,i,r),e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(t.sub(e)),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}();function ts(e){var t=[];e&&e.isBone&&t.push(e);for(var n=0;n<e.children.length;n++)t.push.apply(t,ts(e.children[n]));return t}function dr(e){for(var t=ts(e),n=new te,r=[],i=[],a=new ie(0,0,1),o=new ie(0,1,0),s=0;s<t.length;s++){var c=t[s];c.parent&&c.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(a.r,a.g,a.b),i.push(o.r,o.g,o.b))}n.addAttribute("position",new Z(r,3)),n.addAttribute("color",new Z(i,3));var h=new Ue({vertexColors:_n,depthTest:!1,depthWrite:!1,transparent:!0});Be.call(this,n,h),this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.onBeforeRender()}dr.prototype=Object.create(Be.prototype);dr.prototype.constructor=dr;dr.prototype.onBeforeRender=function(){var e=new T,t=new ue,n=new ue;return function(){var i=this.bones,a=this.geometry,o=a.getAttribute("position");n.getInverse(this.root.matrixWorld);for(var s=0,c=0;s<i.length;s++){var h=i[s];h.parent&&h.parent.isBone&&(t.multiplyMatrices(n,h.matrixWorld),e.setFromMatrixPosition(t),o.setXYZ(c,e.x,e.y,e.z),t.multiplyMatrices(n,h.parent.matrixWorld),e.setFromMatrixPosition(t),o.setXYZ(c+1,e.x,e.y,e.z),c+=2)}a.getAttribute("position").needsUpdate=!0}}();function pr(e,t,n){this.light=e,this.light.updateMatrixWorld(),this.color=n;var r=new un(t,4,2),i=new nt({wireframe:!0,fog:!1});Ke.call(this,r,i),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}pr.prototype=Object.create(Ke.prototype);pr.prototype.constructor=pr;pr.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()};pr.prototype.update=function(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)};function yr(e,t){J.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;var n=new Ue({fog:!1}),r=new te;r.addAttribute("position",new xe(new Float32Array(5*3),3)),this.line=new rt(r,n),this.add(this.line),this.update()}yr.prototype=Object.create(J.prototype);yr.prototype.constructor=yr;yr.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()};yr.prototype.update=function(){var e=this.light.width*.5,t=this.light.height*.5,n=this.line.geometry.attributes.position,r=n.array;r[0]=e,r[1]=-t,r[2]=0,r[3]=e,r[4]=t,r[5]=0,r[6]=-e,r[7]=t,r[8]=0,r[9]=-e,r[10]=-t,r[11]=0,r[12]=e,r[13]=-t,r[14]=0,n.needsUpdate=!0,this.color!==void 0?this.line.material.color.set(this.color):this.line.material.color.copy(this.light.color)};function xr(e,t,n){J.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;var r=new hn(t);r.rotateY(Math.PI*.5),this.material=new nt({wireframe:!0,fog:!1}),this.color===void 0&&(this.material.vertexColors=_n);var i=r.getAttribute("position"),a=new Float32Array(i.count*3);r.addAttribute("color",new xe(a,3)),this.add(new Ke(r,this.material)),this.update()}xr.prototype=Object.create(J.prototype);xr.prototype.constructor=xr;xr.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()};xr.prototype.update=function(){var e=new T,t=new ie,n=new ie;return function(){var i=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{var a=i.geometry.getAttribute("color");t.copy(this.light.color),n.copy(this.light.groundColor);for(var o=0,s=a.count;o<s;o++){var c=o<s/2?t:n;a.setXYZ(o,c.r,c.g,c.b)}a.needsUpdate=!0}i.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate())}}();function fi(e,t,n,r){e=e||10,t=t||10,n=new ie(n!==void 0?n:4473924),r=new ie(r!==void 0?r:8947848);for(var i=t/2,a=e/t,o=e/2,s=[],c=[],h=0,u=0,l=-o;h<=t;h++,l+=a){s.push(-o,0,l,o,0,l),s.push(l,0,-o,l,0,o);var f=h===i?n:r;f.toArray(c,u),u+=3,f.toArray(c,u),u+=3,f.toArray(c,u),u+=3,f.toArray(c,u),u+=3}var d=new te;d.addAttribute("position",new Z(s,3)),d.addAttribute("color",new Z(c,3));var p=new Ue({vertexColors:_n});Be.call(this,d,p)}fi.prototype=Object.create(Be.prototype);fi.prototype.constructor=fi;function xa(e,t,n,r,i,a){e=e||10,t=t||16,n=n||8,r=r||64,i=new ie(i!==void 0?i:4473924),a=new ie(a!==void 0?a:8947848);var o=[],s=[],c,h,u,l,f,d,p;for(l=0;l<=t;l++)u=l/t*(Math.PI*2),c=Math.sin(u)*e,h=Math.cos(u)*e,o.push(0,0,0),o.push(c,0,h),p=l&1?i:a,s.push(p.r,p.g,p.b),s.push(p.r,p.g,p.b);for(l=0;l<=n;l++)for(p=l&1?i:a,d=e-e/n*l,f=0;f<r;f++)u=f/r*(Math.PI*2),c=Math.sin(u)*d,h=Math.cos(u)*d,o.push(c,0,h),s.push(p.r,p.g,p.b),u=(f+1)/r*(Math.PI*2),c=Math.sin(u)*d,h=Math.cos(u)*d,o.push(c,0,h),s.push(p.r,p.g,p.b);var y=new te;y.addAttribute("position",new Z(o,3)),y.addAttribute("color",new Z(s,3));var x=new Ue({vertexColors:_n});Be.call(this,y,x)}xa.prototype=Object.create(Be.prototype);xa.prototype.constructor=xa;function di(e,t,n,r){this.object=e,this.size=t!==void 0?t:1;var i=n!==void 0?n:16776960,a=r!==void 0?r:1,o=0,s=this.object.geometry;s&&s.isGeometry?o=s.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var c=new te,h=new Z(o*2*3,3);c.addAttribute("position",h),Be.call(this,c,new Ue({color:i,linewidth:a})),this.matrixAutoUpdate=!1,this.update()}di.prototype=Object.create(Be.prototype);di.prototype.constructor=di;di.prototype.update=function(){var e=new T,t=new T,n=new _t;return function(){this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);for(var i=this.object.matrixWorld,a=this.geometry.attributes.position,o=this.object.geometry,s=o.vertices,c=o.faces,h=0,u=0,l=c.length;u<l;u++){var f=c[u],d=f.normal;e.copy(s[f.a]).add(s[f.b]).add(s[f.c]).divideScalar(3).applyMatrix4(i),t.copy(d).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),a.setXYZ(h,e.x,e.y,e.z),h=h+1,a.setXYZ(h,t.x,t.y,t.z),h=h+1}a.needsUpdate=!0}}();function mr(e,t,n){J.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,t===void 0&&(t=1);var r=new te;r.addAttribute("position",new Z([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var i=new Ue({fog:!1});this.lightPlane=new rt(r,i),this.add(this.lightPlane),r=new te,r.addAttribute("position",new Z([0,0,0,0,0,1],3)),this.targetLine=new rt(r,i),this.add(this.targetLine),this.update()}mr.prototype=Object.create(J.prototype);mr.prototype.constructor=mr;mr.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()};mr.prototype.update=function(){var e=new T,t=new T,n=new T;return function(){e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),n.subVectors(t,e),this.lightPlane.lookAt(n),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(n),this.targetLine.scale.z=n.length()}}();function pi(e){var t=new te,n=new Ue({color:16777215,vertexColors:po}),r=[],i=[],a={},o=new ie(16755200),s=new ie(16711680),c=new ie(43775),h=new ie(16777215),u=new ie(3355443);l("n1","n2",o),l("n2","n4",o),l("n4","n3",o),l("n3","n1",o),l("f1","f2",o),l("f2","f4",o),l("f4","f3",o),l("f3","f1",o),l("n1","f1",o),l("n2","f2",o),l("n3","f3",o),l("n4","f4",o),l("p","n1",s),l("p","n2",s),l("p","n3",s),l("p","n4",s),l("u1","u2",c),l("u2","u3",c),l("u3","u1",c),l("c","t",h),l("p","c",u),l("cn1","cn2",u),l("cn3","cn4",u),l("cf1","cf2",u),l("cf3","cf4",u);function l(d,p,y){f(d,y),f(p,y)}function f(d,p){r.push(0,0,0),i.push(p.r,p.g,p.b),a[d]===void 0&&(a[d]=[]),a[d].push(r.length/3-1)}t.addAttribute("position",new Z(r,3)),t.addAttribute("color",new Z(i,3)),Be.call(this,t,n),this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update()}pi.prototype=Object.create(Be.prototype);pi.prototype.constructor=pi;pi.prototype.update=function(){var e,t,n=new T,r=new Tt;function i(a,o,s,c){n.set(o,s,c).unproject(r);var h=t[a];if(h!==void 0)for(var u=e.getAttribute("position"),l=0,f=h.length;l<f;l++)u.setXYZ(h[l],n.x,n.y,n.z)}return function(){e=this.geometry,t=this.pointMap;var o=1,s=1;r.projectionMatrix.copy(this.camera.projectionMatrix),i("c",0,0,-1),i("t",0,0,1),i("n1",-o,-s,-1),i("n2",o,-s,-1),i("n3",-o,s,-1),i("n4",o,s,-1),i("f1",-o,-s,1),i("f2",o,-s,1),i("f3",-o,s,1),i("f4",o,s,1),i("u1",o*.7,s*1.1,-1),i("u2",-o*.7,s*1.1,-1),i("u3",0,s*2,-1),i("cf1",-o,0,1),i("cf2",o,0,1),i("cf3",0,-s,1),i("cf4",0,s,1),i("cn1",-o,0,-1),i("cn2",o,0,-1),i("cn3",0,-s,-1),i("cn4",0,s,-1),e.getAttribute("position").needsUpdate=!0}}();function vr(e,t){this.object=e,t===void 0&&(t=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),i=new te;i.setIndex(new xe(n,1)),i.addAttribute("position",new xe(r,3)),Be.call(this,i,new Ue({color:t})),this.matrixAutoUpdate=!1,this.update()}vr.prototype=Object.create(Be.prototype);vr.prototype.constructor=vr;vr.prototype.update=function(){var e=new Ft;return function(n){if(n!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&e.setFromObject(this.object),!e.isEmpty()){var r=e.min,i=e.max,a=this.geometry.attributes.position,o=a.array;o[0]=i.x,o[1]=i.y,o[2]=i.z,o[3]=r.x,o[4]=i.y,o[5]=i.z,o[6]=r.x,o[7]=r.y,o[8]=i.z,o[9]=i.x,o[10]=r.y,o[11]=i.z,o[12]=i.x,o[13]=i.y,o[14]=r.z,o[15]=r.x,o[16]=i.y,o[17]=r.z,o[18]=r.x,o[19]=r.y,o[20]=r.z,o[21]=i.x,o[22]=r.y,o[23]=r.z,a.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}();vr.prototype.setFromObject=function(e){return this.object=e,this.update(),this};function yi(e,t){this.type="Box3Helper",this.box=e;var n=t!==void 0?t:16776960,r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],a=new te;a.setIndex(new xe(r,1)),a.addAttribute("position",new Z(i,3)),Be.call(this,a,new Ue({color:n})),this.geometry.computeBoundingSphere(),this.onBeforeRender()}yi.prototype=Object.create(Be.prototype);yi.prototype.constructor=yi;yi.prototype.onBeforeRender=function(){var e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5))};function xi(e,t,n){this.type="PlaneHelper",this.plane=e,this.size=t===void 0?1:t;var r=n!==void 0?n:16776960,i=[1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],a=new te;a.addAttribute("position",new Z(i,3)),a.computeBoundingSphere(),rt.call(this,a,new Ue({color:r}));var o=[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],s=new te;s.addAttribute("position",new Z(o,3)),s.computeBoundingSphere(),this.add(new Ke(s,new nt({color:r,opacity:.2,transparent:!0,depthWrite:!1}))),this.onBeforeRender()}xi.prototype=Object.create(rt.prototype);xi.prototype.constructor=xi;xi.prototype.onBeforeRender=function(){var e=-this.plane.constant;Math.abs(e)<1e-8&&(e=1e-8),this.scale.set(.5*this.size,.5*this.size,e),this.lookAt(this.plane.normal),this.updateMatrixWorld()};var Tr,Ci;function gn(e,t,n,r,i,a){J.call(this),r===void 0&&(r=16776960),n===void 0&&(n=1),i===void 0&&(i=.2*n),a===void 0&&(a=.2*i),Tr===void 0&&(Tr=new te,Tr.addAttribute("position",new Z([0,0,0,0,1,0],3)),Ci=new Nt(0,.5,1,5,1),Ci.translate(0,-.5,0)),this.position.copy(t),this.line=new rt(Tr,new Ue({color:r})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Ke(Ci,new nt({color:r})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,i,a)}gn.prototype=Object.create(J.prototype);gn.prototype.constructor=gn;gn.prototype.setDirection=function(){var e=new T,t;return function(r){r.y>.99999?this.quaternion.set(0,0,0,1):r.y<-.99999?this.quaternion.set(1,0,0,0):(e.set(r.z,0,-r.x).normalize(),t=Math.acos(r.y),this.quaternion.setFromAxisAngle(e,t))}}();gn.prototype.setLength=function(e,t,n){t===void 0&&(t=.2*e),n===void 0&&(n=.2*t),this.line.scale.set(1,Math.max(0,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()};gn.prototype.setColor=function(e){this.line.material.color.copy(e),this.cone.material.color.copy(e)};function ma(e){e=e||1;var t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new te;r.addAttribute("position",new Z(t,3)),r.addAttribute("color",new Z(n,3));var i=new Ue({vertexColors:_n});Be.call(this,r,i)}ma.prototype=Object.create(Be.prototype);ma.prototype.constructor=ma;function Da(){var e=0,t=0,n=0,r=0;function i(a,o,s,c){e=a,t=s,n=-3*a+3*o-2*s-c,r=2*a-2*o+s+c}return{initCatmullRom:function(a,o,s,c,h){i(o,s,h*(s-a),h*(c-o))},initNonuniformCatmullRom:function(a,o,s,c,h,u,l){var f=(o-a)/h-(s-a)/(h+u)+(s-o)/u,d=(s-o)/u-(c-o)/(u+l)+(c-s)/l;f*=u,d*=u,i(o,s,f,d)},calc:function(a){var o=a*a,s=o*a;return e+t*a+n*o+r*s}}}var Sr=new T,Ii=new Da,Di=new Da,Ui=new Da;function zt(e){Fe.call(this),e.length<2&&console.warn("THREE.CatmullRomCurve3: Points array needs at least two entries."),this.points=e||[],this.closed=!1}zt.prototype=Object.create(Fe.prototype);zt.prototype.constructor=zt;zt.prototype.getPoint=function(e){var t=this.points,n=t.length,r=(n-(this.closed?0:1))*e,i=Math.floor(r),a=r-i;this.closed?i+=i>0?0:(Math.floor(Math.abs(i)/t.length)+1)*t.length:a===0&&i===n-1&&(i=n-2,a=1);var o,s,c,h;if(this.closed||i>0?o=t[(i-1)%n]:(Sr.subVectors(t[0],t[1]).add(t[0]),o=Sr),s=t[i%n],c=t[(i+1)%n],this.closed||i+2<n?h=t[(i+2)%n]:(Sr.subVectors(t[n-1],t[n-2]).add(t[n-1]),h=Sr),this.type===void 0||this.type==="centripetal"||this.type==="chordal"){var u=this.type==="chordal"?.5:.25,l=Math.pow(o.distanceToSquared(s),u),f=Math.pow(s.distanceToSquared(c),u),d=Math.pow(c.distanceToSquared(h),u);f<1e-4&&(f=1),l<1e-4&&(l=f),d<1e-4&&(d=f),Ii.initNonuniformCatmullRom(o.x,s.x,c.x,h.x,l,f,d),Di.initNonuniformCatmullRom(o.y,s.y,c.y,h.y,l,f,d),Ui.initNonuniformCatmullRom(o.z,s.z,c.z,h.z,l,f,d)}else if(this.type==="catmullrom"){var p=this.tension!==void 0?this.tension:.5;Ii.initCatmullRom(o.x,s.x,c.x,h.x,p),Di.initCatmullRom(o.y,s.y,c.y,h.y,p),Ui.initCatmullRom(o.z,s.z,c.z,h.z,p)}return new T(Ii.calc(a),Di.calc(a),Ui.calc(a))};function mi(e,t,n,r){Fe.call(this),this.v0=e,this.v1=t,this.v2=n,this.v3=r}mi.prototype=Object.create(Fe.prototype);mi.prototype.constructor=mi;mi.prototype.getPoint=function(e){var t=this.v0,n=this.v1,r=this.v2,i=this.v3;return new T(In(e,t.x,n.x,r.x,i.x),In(e,t.y,n.y,r.y,i.y),In(e,t.z,n.z,r.z,i.z))};function vi(e,t,n){Fe.call(this),this.v0=e,this.v1=t,this.v2=n}vi.prototype=Object.create(Fe.prototype);vi.prototype.constructor=vi;vi.prototype.getPoint=function(e){var t=this.v0,n=this.v1,r=this.v2;return new T(Cn(e,t.x,n.x,r.x),Cn(e,t.y,n.y,r.y),Cn(e,t.z,n.z,r.z))};function gi(e,t){Fe.call(this),this.v1=e,this.v2=t}gi.prototype=Object.create(Fe.prototype);gi.prototype.constructor=gi;gi.prototype.getPoint=function(e){if(e===1)return this.v2.clone();var t=new T;return t.subVectors(this.v2,this.v1),t.multiplyScalar(e),t.add(this.v1),t};function va(e,t,n,r,i,a){Bt.call(this,e,t,n,n,r,i,a)}va.prototype=Object.create(Bt.prototype);va.prototype.constructor=va;Fe.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(Fe.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e};Object.create(zt.prototype);Object.create(zt.prototype);function ns(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),zt.call(this,e),this.type="catmullrom"}ns.prototype=Object.create(zt.prototype);Object.assign(ns.prototype,{initFromArray:function(e){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(e){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(e){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}});fi.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};dr.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};Object.assign(La.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}});Object.assign(Ft.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}});Pn.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)};me.random16=function(){return console.warn("THREE.Math.random16() has been deprecated. Use Math.random() instead."),Math.random()};Object.assign(_t.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(e){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(e,t,n){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(e,t,n){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}});Object.assign(ue.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){var e;return function(){return e===void 0&&(e=new T),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),e.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(e){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(e,t,n){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(e,t,n){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,n,r,i,a){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,r,n,i,a)}});dt.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)};Ge.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)};Object.assign(wn.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}});Object.assign(nn.prototype,{extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Yt(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new er(this,e)}});Object.assign(q.prototype,{fromAttribute:function(e,t,n){return console.error("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)}});Object.assign(T.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,n){return console.error("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)}});Object.assign(Ce.prototype,{fromAttribute:function(e,t,n){return console.error("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)}});le.prototype.computeTangents=function(){console.warn("THREE.Geometry: .computeTangents() has been removed.")};Object.assign(J.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)}});Object.defineProperties(J.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});Object.defineProperties(Br.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}});Object.defineProperty(zr.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}});Object.defineProperty(Fe.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}});ze.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),t!==void 0&&(this.filmGauge=t),this.setFocalLength(e)};Object.defineProperties(ke.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}});Object.defineProperties(xe.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}}});Object.assign(te.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addDrawCall:function(e,t,n){n!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}});Object.defineProperties(te.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}});Object.defineProperties(pa.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}});Object.defineProperties(ge.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new ie}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=e===THREE.FlatShading}}});Object.defineProperties(wt.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}});Object.defineProperties(yt.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}});Object.assign(Pa.prototype,{getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}});Object.defineProperties(Pa.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){return this.shadowMap.cullFace},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace."),this.shadowMap.cullFace=e}}});Object.defineProperties(No.prototype,{cullFace:{get:function(){return this.renderReverseSided?lo:Lr},set:function(e){var t=e!==Lr;console.warn("WebGLRenderer: .shadowMap.cullFace is deprecated. Set .shadowMap.renderReverseSided to "+t+"."),this.renderReverseSided=t}}});Object.defineProperties(br.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}});ur.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this,n=new Zo;return n.load(e,function(r){t.setBuffer(r)}),this};Jo.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()};hi.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)};function kl(){function e(n){this.object=n,this.target=new T,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25;const r=this,i=1e-6;let a=0,o=0,s=0,c=0,h=1;const u=new T;let l=!1;this.getPolarAngle=function(){return o},this.getAzimuthalAngle=function(){return a},this.setPolarAngle=function(f){o=f,this.forceUpdate()},this.setAzimuthalAngle=function(f){a=f,this.forceUpdate()},this.rotateLeft=function(f){c-=f},this.rotateUp=function(f){s-=f},this.panLeft=function(){const f=new T;return function(p){const y=this.object.matrix.elements;f.set(y[0],y[1],y[2]),f.multiplyScalar(-p),u.add(f)}}(),this.panUp=function(){const f=new T;return function(p){const y=this.object.matrix.elements;f.set(y[4],y[5],y[6]),f.multiplyScalar(p),u.add(f)}}(),this.pan=function(f,d,p,y){if(r.object instanceof ze){const{position:x}=r.object;let v=x.clone().sub(r.target).length();v*=Math.tan(r.object.fov/2*Math.PI/180),r.panLeft(2*f*v/y),r.panUp(2*d*v/y)}else r.object instanceof Dt?(r.panLeft(f*(r.object.right-r.object.left)/p),r.panUp(d*(r.object.top-r.object.bottom)/y)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.")},this.dollyIn=function(f){r.object instanceof ze?h/=f:r.object instanceof Dt?(r.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom*f)),r.object.updateProjectionMatrix(),l=!0):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.")},this.dollyOut=function(f){r.object instanceof ze?h*=f:r.object instanceof Dt?(r.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/f)),r.object.updateProjectionMatrix(),l=!0):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.")},this.forceUpdate=function(){const f=new T,d=new Ge().setFromUnitVectors(n.up,new T(0,1,0)),p=d.clone().inverse(),y=new T,x=new Ge;return function(){const{position:m}=this.object;f.copy(m).sub(this.target),f.applyQuaternion(d),a=Math.max(this.minAzimuthAngle,Math.min(this.maxAzimuthAngle,a)),o=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,o)),o=Math.max(i,Math.min(Math.PI-i,o));let v=f.length()*h;return v=Math.max(this.minDistance,Math.min(this.maxDistance,v)),this.target.add(u),f.x=v*Math.sin(o)*Math.sin(a),f.y=v*Math.cos(o),f.z=v*Math.sin(o)*Math.cos(a),f.applyQuaternion(p),m.copy(this.target).add(f),this.object.lookAt(this.target),this.enableDamping===!0?(c*=1-this.dampingFactor,s*=1-this.dampingFactor):(c=0,s=0),h=1,u.set(0,0,0),l||y.distanceToSquared(this.object.position)>i||8*(1-x.dot(this.object.quaternion))>i?(y.copy(this.object.position),x.copy(this.object.quaternion),l=!1,!0):!1}}(),this.update=function(){const f=new T,d=new Ge().setFromUnitVectors(n.up,new T(0,1,0)),p=d.clone().inverse(),y=new T,x=new Ge;return function(){const{position:m}=this.object;f.copy(m).sub(this.target),f.applyQuaternion(d),a=Math.atan2(f.x,f.z),o=Math.atan2(Math.sqrt(f.x*f.x+f.z*f.z),f.y),a+=c,o+=s,a=Math.max(this.minAzimuthAngle,Math.min(this.maxAzimuthAngle,a)),o=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,o)),o=Math.max(i,Math.min(Math.PI-i,o));let v=f.length()*h;return v=Math.max(this.minDistance,Math.min(this.maxDistance,v)),this.target.add(u),f.x=v*Math.sin(o)*Math.sin(a),f.y=v*Math.cos(o),f.z=v*Math.sin(o)*Math.cos(a),f.applyQuaternion(p),m.copy(this.target).add(f),this.object.lookAt(this.target),this.enableDamping===!0?(c*=1-this.dampingFactor,s*=1-this.dampingFactor):(c=0,s=0),h=1,u.set(0,0,0),l||y.distanceToSquared(this.object.position)>i||8*(1-x.dot(this.object.quaternion))>i?(y.copy(this.object.position),x.copy(this.object.quaternion),l=!1,!0):!1}}()}function t(n,r){const i=new e(n);this.domElement=r!==void 0?r:document,Object.defineProperty(this,"constraint",{get(){return i}}),this.getPolarAngle=function(){return i.getPolarAngle()},this.getAzimuthalAngle=function(){return i.getAzimuthalAngle()},this.setPolarAngle=function(I){return i.setPolarAngle(I)},this.setAzimuthalAngle=function(I){return i.setAzimuthalAngle(I)},this.enabled=!0,this.center=this.target,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:Si.LEFT,ZOOM:Si.MIDDLE,PAN:Si.RIGHT};const a=this,o=new q,s=new q,c=new q,h=new q,u=new q,l=new q,f=new q,d=new q,p=new q,y={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5};let x=y.NONE;this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom;const m={type:"change"},v={type:"start"},g={type:"end"};function _(I,N){const z=a.domElement===document?a.domElement.body:a.domElement;i.pan(I,N,z.clientWidth,z.clientHeight)}this.update=function(){this.autoRotate&&x===y.NONE&&i.rotateLeft(M()),i.update()===!0&&this.dispatchEvent(m)},this.reset=function(){x=y.NONE,this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(m),this.update()};function M(){return 2*Math.PI/60/60*a.autoRotateSpeed}function w(){return .95**a.zoomSpeed}function A(I){if(a.enabled!==!1){if(I.preventDefault(),I.button===a.mouseButtons.ORBIT){if(a.enableRotate===!1)return;x=y.ROTATE,o.set(I.clientX,I.clientY)}else if(I.button===a.mouseButtons.ZOOM){if(a.enableZoom===!1)return;x=y.DOLLY,f.set(I.clientX,I.clientY)}else if(I.button===a.mouseButtons.PAN){if(a.enablePan===!1)return;x=y.PAN,h.set(I.clientX,I.clientY)}x!==y.NONE&&(document.addEventListener("mousemove",P,!1),document.addEventListener("mouseup",S,!1),a.dispatchEvent(v))}}function P(I){if(a.enabled===!1)return;I.preventDefault();const N=a.domElement===document?a.domElement.body:a.domElement;if(x===y.ROTATE){if(a.enableRotate===!1)return;s.set(I.clientX,I.clientY),c.subVectors(s,o),i.rotateLeft(2*Math.PI*c.x/N.clientWidth*a.rotateSpeed),i.rotateUp(2*Math.PI*c.y/N.clientHeight*a.rotateSpeed),o.copy(s)}else if(x===y.DOLLY){if(a.enableZoom===!1)return;d.set(I.clientX,I.clientY),p.subVectors(d,f),p.y>0?i.dollyIn(w()):p.y<0&&i.dollyOut(w()),f.copy(d)}else if(x===y.PAN){if(a.enablePan===!1)return;u.set(I.clientX,I.clientY),l.subVectors(u,h),_(l.x,l.y),h.copy(u)}x!==y.NONE&&a.update()}function S(){a.enabled!==!1&&(document.removeEventListener("mousemove",P,!1),document.removeEventListener("mouseup",S,!1),a.dispatchEvent(g),x=y.NONE)}function C(I){if(a.enabled===!1||a.enableZoom===!1||x!==y.NONE)return;I.preventDefault(),I.stopPropagation();let N=0;I.wheelDelta!==void 0?N=I.wheelDelta:I.detail!==void 0&&(N=-I.detail),N>0?i.dollyOut(w()):N<0&&i.dollyIn(w()),a.update(),a.dispatchEvent(v),a.dispatchEvent(g)}function D(I){if(!(a.enabled===!1||a.enableKeys===!1||a.enablePan===!1))switch(I.keyCode){case a.keys.UP:_(0,a.keyPanSpeed),a.update();break;case a.keys.BOTTOM:_(0,-a.keyPanSpeed),a.update();break;case a.keys.LEFT:_(a.keyPanSpeed,0),a.update();break;case a.keys.RIGHT:_(-a.keyPanSpeed,0),a.update();break}}function H(I){if(a.enabled!==!1){switch(I.touches.length){case 1:if(a.enableRotate===!1)return;x=y.TOUCH_ROTATE,o.set(I.touches[0].pageX,I.touches[0].pageY);break;case 2:if(a.enableZoom===!1)return;x=y.TOUCH_DOLLY;var N=I.touches[0].pageX-I.touches[1].pageX,z=I.touches[0].pageY-I.touches[1].pageY,V=Math.sqrt(N*N+z*z);f.set(0,V);break;case 3:if(a.enablePan===!1)return;x=y.TOUCH_PAN,h.set(I.touches[0].pageX,I.touches[0].pageY);break;default:x=y.NONE}x!==y.NONE&&a.dispatchEvent(v)}}function L(I){if(a.enabled===!1)return;I.preventDefault(),I.stopPropagation();const N=a.domElement===document?a.domElement.body:a.domElement;switch(I.touches.length){case 1:if(a.enableRotate===!1||x!==y.TOUCH_ROTATE)return;s.set(I.touches[0].pageX,I.touches[0].pageY),c.subVectors(s,o),i.rotateLeft(2*Math.PI*c.x/N.clientWidth*a.rotateSpeed),i.rotateUp(2*Math.PI*c.y/N.clientHeight*a.rotateSpeed),o.copy(s),a.update();break;case 2:if(a.enableZoom===!1||x!==y.TOUCH_DOLLY)return;var z=I.touches[0].pageX-I.touches[1].pageX,V=I.touches[0].pageY-I.touches[1].pageY,W=Math.sqrt(z*z+V*V);d.set(0,W),p.subVectors(d,f),p.y>0?i.dollyOut(w()):p.y<0&&i.dollyIn(w()),f.copy(d),a.update();break;case 3:if(a.enablePan===!1||x!==y.TOUCH_PAN)return;u.set(I.touches[0].pageX,I.touches[0].pageY),l.subVectors(u,h),_(l.x,l.y),h.copy(u),a.update();break;default:x=y.NONE}}function E(){a.enabled!==!1&&(a.dispatchEvent(g),x=y.NONE)}function B(I){I.preventDefault()}this.dispose=function(){this.domElement.removeEventListener("contextmenu",B,!1),this.domElement.removeEventListener("mousedown",A,!1),this.domElement.removeEventListener("mousewheel",C,!1),this.domElement.removeEventListener("MozMousePixelScroll",C,!1),this.domElement.removeEventListener("touchstart",H,!1),this.domElement.removeEventListener("touchend",E,!1),this.domElement.removeEventListener("touchmove",L,!1),document.removeEventListener("mousemove",P,!1),document.removeEventListener("mouseup",S,!1),window.removeEventListener("keydown",D,!1)},this.domElement.addEventListener("contextmenu",B,!1),this.domElement.addEventListener("mousedown",A,!1),this.domElement.addEventListener("mousewheel",C,!1),this.domElement.addEventListener("MozMousePixelScroll",C,!1),this.domElement.addEventListener("touchstart",H,!1),this.domElement.addEventListener("touchend",E,!1),this.domElement.addEventListener("touchmove",L,!1),window.addEventListener("keydown",D,!1),this.update()}return t.prototype=Object.create(Lt.prototype),t.prototype.constructor=t,Object.defineProperties(t.prototype,{object:{get(){return this.constraint.object}},target:{get(){return this.constraint.target},set(n){console.warn("OrbitControls: target is now immutable. Use target.set() instead."),this.constraint.target.copy(n)}},minDistance:{get(){return this.constraint.minDistance},set(n){this.constraint.minDistance=n}},maxDistance:{get(){return this.constraint.maxDistance},set(n){this.constraint.maxDistance=n}},minZoom:{get(){return this.constraint.minZoom},set(n){this.constraint.minZoom=n}},maxZoom:{get(){return this.constraint.maxZoom},set(n){this.constraint.maxZoom=n}},minPolarAngle:{get(){return this.constraint.minPolarAngle},set(n){this.constraint.minPolarAngle=n}},maxPolarAngle:{get(){return this.constraint.maxPolarAngle},set(n){this.constraint.maxPolarAngle=n}},minAzimuthAngle:{get(){return this.constraint.minAzimuthAngle},set(n){this.constraint.minAzimuthAngle=n}},maxAzimuthAngle:{get(){return this.constraint.maxAzimuthAngle},set(n){this.constraint.maxAzimuthAngle=n}},enableDamping:{get(){return this.constraint.enableDamping},set(n){this.constraint.enableDamping=n}},dampingFactor:{get(){return this.constraint.dampingFactor},set(n){this.constraint.dampingFactor=n}},noZoom:{get(){return console.warn("OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set(n){console.warn("OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!n}},noRotate:{get(){return console.warn("OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set(n){console.warn("OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!n}},noPan:{get(){return console.warn("OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set(n){console.warn("OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!n}},noKeys:{get(){return console.warn("OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set(n){console.warn("OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!n}},staticMoving:{get(){return console.warn("OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.constraint.enableDamping},set(n){console.warn("OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.constraint.enableDamping=!n}},dynamicDampingFactor:{get(){return console.warn("OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.constraint.dampingFactor},set(n){console.warn("OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.constraint.dampingFactor=n}}}),t}const Wl=kl(),Fi=[{x:489,y:153},{x:372,y:342},{x:1316,y:271},{x:372,y:71},{x:795,y:53},{x:318,y:270},{x:516,y:162},{x:1383,y:246},{x:687,y:44},{x:1467,y:44},{x:147,y:252},{x:183,y:207},{x:1223,y:187},{x:1534,y:120},{x:1257,y:254},{x:192,y:216},{x:913,y:135},{x:183,y:297},{x:1257,y:330},{x:570,y:26},{x:1181,y:229},{x:1417,y:103},{x:183,y:396},{x:1610,y:78},{x:426,y:297},{x:561,y:62},{x:471,y:107},{x:723,y:35},{x:264,y:89},{x:120,y:396},{x:291,y:360},{x:57,y:279},{x:1299,y:364},{x:678,y:44},{x:363,y:369},{x:192,y:89},{x:1232,y:221},{x:606,y:270},{x:1375,y:280},{x:255,y:71},{x:1265,y:263},{x:1626,y:44},{x:1391,y:338},{x:1391,y:112},{x:561,y:189},{x:444,y:315},{x:597,y:360},{x:246,y:342},{x:1652,y:11},{x:273,y:144},{x:759,y:180},{x:786,y:153},{x:102,y:234},{x:462,y:207},{x:1391,y:238},{x:696,y:207},{x:660,y:315},{x:1341,y:170},{x:1702,y:36},{x:183,y:107},{x:66,y:360},{x:282,y:144},{x:408,y:189},{x:156,y:288},{x:795,y:71},{x:1307,y:246},{x:237,y:171},{x:1223,y:145},{x:1341,y:179},{x:1198,y:112},{x:498,y:288},{x:1249,y:263},{x:471,y:162},{x:1358,y:288},{x:282,y:62},{x:471,y:279},{x:1173,y:95},{x:345,y:198},{x:1366,y:187},{x:1383,y:313},{x:57,y:351},{x:1366,y:254},{x:606,y:234},{x:1534,y:187},{x:201,y:71},{x:525,y:162},{x:30,y:378},{x:588,y:189},{x:444,y:279},{x:1534,y:61},{x:534,y:53},{x:561,y:225},{x:435,y:116},{x:1333,y:212},{x:516,y:98},{x:1761,y:86},{x:174,y:125},{x:696,y:71},{x:786,y:270},{x:111,y:144},{x:1635,y:78},{x:363,y:306},{x:534,y:144},{x:129,y:324},{x:75,y:279},{x:525,y:234},{x:345,y:125},{x:1702,y:70},{x:741,y:297},{x:408,y:297},{x:1366,y:145},{x:291,y:342},{x:345,y:270},{x:633,y:89},{x:1148,y:86},{x:237,y:387},{x:1349,y:103},{x:57,y:270},{x:507,y:162},{x:291,y:234},{x:732,y:53},{x:1509,y:112},{x:462,y:225},{x:1333,y:380},{x:759,y:98},{x:291,y:62},{x:714,y:351},{x:174,y:396},{x:1291,y:263},{x:1265,y:187},{x:1257,y:246},{x:579,y:297},{x:111,y:396},{x:931,y:62},{x:804,y:216},{x:318,y:144},{x:183,y:116},{x:534,y:342},{x:678,y:171},{x:633,y:315},{x:237,y:62},{x:913,y:144},{x:1333,y:355},{x:1626,y:112},{x:138,y:342},{x:1333,y:229},{x:1316,y:145},{x:543,y:135},{x:579,y:351},{x:354,y:306},{x:372,y:98},{x:660,y:369},{x:354,y:261},{x:408,y:116},{x:165,y:288},{x:687,y:396},{x:237,y:243},{x:1265,y:212},{x:381,y:279},{x:1744,y:36},{x:696,y:225},{x:804,y:80},{x:471,y:225},{x:1123,y:128},{x:1341,y:112},{x:732,y:315},{x:777,y:89},{x:435,y:53},{x:624,y:252},{x:1232,y:229},{x:1257,y:338},{x:1408,y:86},{x:165,y:297},{x:309,y:171},{x:759,y:243},{x:183,y:144},{x:156,y:297},{x:516,y:107},{x:723,y:360},{x:237,y:116},{x:615,y:225},{x:651,y:342},{x:615,y:98},{x:138,y:288},{x:561,y:369},{x:435,y:62},{x:516,y:315},{x:894,y:125},{x:777,y:306},{x:1223,y:137},{x:732,y:297},{x:300,y:125},{x:255,y:225},{x:597,y:44},{x:1408,y:162},{x:75,y:225},{x:291,y:125},{x:390,y:333},{x:453,y:198},{x:1105,y:120},{x:1299,y:112},{x:597,y:315},{x:264,y:144},{x:624,y:35},{x:723,y:315},{x:1375,y:78},{x:1400,y:154},{x:1156,y:95},{x:1433,y:204},{x:264,y:351},{x:678,y:351},{x:1677,y:78},{x:300,y:360},{x:1458,y:70},{x:687,y:270},{x:453,y:216},{x:678,y:270},{x:291,y:252},{x:1417,y:44},{x:363,y:116},{x:246,y:198},{x:1349,y:238},{x:66,y:153},{x:1274,y:70},{x:426,y:225},{x:732,y:116},{x:687,y:261},{x:651,y:80},{x:1542,y:162},{x:507,y:189},{x:732,y:107},{x:1307,y:170},{x:588,y:270},{x:507,y:89},{x:1349,y:187},{x:1316,y:170},{x:48,y:369},{x:1383,y:70},{x:597,y:35},{x:1232,y:246},{x:255,y:288},{x:498,y:62},{x:1584,y:28},{x:219,y:360},{x:1349,y:196},{x:120,y:342},{x:1299,y:212},{x:129,y:162},{x:696,y:288},{x:408,y:53},{x:570,y:62},{x:750,y:270},{x:696,y:171},{x:381,y:252},{x:1198,y:246},{x:426,y:207},{x:1223,y:296},{x:462,y:80},{x:1383,y:154},{x:1425,y:78},{x:381,y:125},{x:1282,y:355},{x:1307,y:145},{x:138,y:153},{x:1282,y:254},{x:1375,y:162},{x:795,y:144},{x:516,y:270},{x:1668,y:19},{x:1408,y:78},{x:111,y:324},{x:336,y:279},{x:219,y:44},{x:462,y:53},{x:1484,y:78},{x:1383,y:179},{x:237,y:153},{x:48,y:351},{x:1375,y:204},{x:381,y:342},{x:696,y:333},{x:138,y:324},{x:651,y:135},{x:444,y:80},{x:462,y:116},{x:723,y:396},{x:669,y:71},{x:399,y:342},{x:615,y:80},{x:147,y:297},{x:696,y:44},{x:561,y:180},{x:210,y:71},{x:633,y:198},{x:732,y:216},{x:1257,y:288},{x:1660,y:78},{x:120,y:360},{x:237,y:306},{x:1257,y:179},{x:444,y:216},{x:750,y:261},{x:723,y:270},{x:93,y:378},{x:678,y:98},{x:696,y:369},{x:687,y:252},{x:201,y:62},{x:102,y:351},{x:1105,y:103},{x:642,y:35},{x:408,y:378},{x:255,y:44},{x:678,y:153},{x:642,y:171},{x:642,y:98},{x:579,y:107},{x:138,y:387},{x:561,y:252},{x:1223,y:238},{x:318,y:387},{x:1198,y:288},{x:390,y:198},{x:1341,y:78},{x:669,y:360},{x:165,y:198},{x:1375,y:120},{x:498,y:297},{x:687,y:162},{x:507,y:153},{x:183,y:198},{x:1534,y:128},{x:786,y:162},{x:967,y:71},{x:219,y:116},{x:516,y:53},{x:885,y:252},{x:1719,y:28},{x:471,y:234},{x:831,y:207},{x:1391,y:145},{x:660,y:297},{x:57,y:324},{x:516,y:35},{x:309,y:162},{x:489,y:171},{x:615,y:324},{x:1727,y:53},{x:750,y:62},{x:570,y:333},{x:786,y:279},{x:1626,y:53},{x:408,y:270},{x:1383,y:44},{x:579,y:71},{x:282,y:243},{x:1358,y:187},{x:219,y:107},{x:291,y:189},{x:1232,y:170},{x:1341,y:212},{x:1408,y:103},{x:48,y:333},{x:318,y:153},{x:786,y:306},{x:777,y:62},{x:1475,y:179},{x:336,y:180},{x:1761,y:11},{x:723,y:189},{x:462,y:162},{x:1249,y:271},{x:1635,y:95},{x:1349,y:263},{x:633,y:153},{x:462,y:35},{x:714,y:216},{x:1307,y:221},{x:201,y:189},{x:1257,y:162},{x:300,y:378},{x:768,y:216},{x:255,y:116},{x:1643,y:28},{x:624,y:107},{x:48,y:306},{x:1358,y:229},{x:1526,y:137},{x:1383,y:305},{x:1181,y:86},{x:435,y:180},{x:498,y:243},{x:417,y:44},{x:480,y:261},{x:489,y:26},{x:714,y:189},{x:1534,y:19},{x:228,y:234},{x:273,y:98},{x:309,y:135},{x:390,y:107},{x:138,y:279},{x:1291,y:288},{x:354,y:243},{x:687,y:288},{x:1333,y:238},{x:93,y:360},{x:156,y:216},{x:1240,y:78},{x:849,y:107},{x:633,y:144},{x:624,y:144},{x:903,y:144},{x:1442,y:78},{x:615,y:315},{x:534,y:17},{x:480,y:80},{x:669,y:207},{x:1358,y:179},{x:1232,y:179},{x:813,y:162},{x:372,y:125},{x:552,y:369},{x:849,y:62},{x:570,y:261},{x:201,y:107},{x:534,y:261},{x:588,y:171},{x:1660,y:61},{x:543,y:144},{x:669,y:144},{x:570,y:360},{x:1265,y:204},{x:633,y:234},{x:759,y:324},{x:1215,y:162},{x:399,y:369},{x:183,y:315},{x:1417,y:137},{x:408,y:243},{x:858,y:53},{x:21,y:369},{x:570,y:342},{x:678,y:324},{x:282,y:98},{x:849,y:80},{x:1366,y:86},{x:264,y:71},{x:291,y:135},{x:1425,y:229},{x:39,y:396},{x:156,y:171},{x:1744,y:11},{x:1291,y:120},{x:165,y:180},{x:552,y:44},{x:534,y:80},{x:1299,y:70},{x:453,y:80},{x:192,y:324},{x:1660,y:36},{x:102,y:288},{x:705,y:207},{x:543,y:234},{x:1500,y:103},{x:1626,y:61},{x:822,y:71},{x:1198,y:61},{x:309,y:387},{x:903,y:125},{x:174,y:333},{x:1274,y:103},{x:1442,y:212},{x:723,y:378},{x:147,y:351},{x:417,y:360},{x:723,y:297},{x:318,y:62},{x:93,y:396},{x:1257,y:120},{x:1391,y:170},{x:624,y:53},{x:534,y:315},{x:480,y:125},{x:318,y:306},{x:714,y:387},{x:543,y:351},{x:363,y:270},{x:1265,y:196},{x:651,y:171},{x:264,y:80},{x:1131,y:95},{x:534,y:216},{x:1736,y:44},{x:1181,y:78},{x:552,y:243},{x:1316,y:103},{x:1299,y:229},{x:1542,y:19},{x:84,y:297},{x:687,y:378},{x:363,y:360},{x:678,y:135},{x:1391,y:103},{x:1391,y:128},{x:1358,y:263},{x:354,y:125},{x:579,y:144},{x:1526,y:162},{x:1442,y:44},{x:579,y:234},{x:561,y:306},{x:1635,y:44},{x:1719,y:36},{x:525,y:288},{x:534,y:89},{x:1450,y:364},{x:1223,y:179},{x:822,y:80},{x:705,y:125},{x:1694,y:44},{x:741,y:252},{x:282,y:225},{x:822,y:396},{x:597,y:89},{x:273,y:107},{x:579,y:171},{x:741,y:153},{x:768,y:198},{x:480,y:144},{x:768,y:207},{x:102,y:189},{x:669,y:180},{x:714,y:306},{x:687,y:135},{x:291,y:378},{x:1635,y:36},{x:606,y:261},{x:660,y:107},{x:201,y:53},{x:1677,y:11},{x:1492,y:145},{x:201,y:98},{x:327,y:98},{x:228,y:98},{x:678,y:80},{x:831,y:144},{x:435,y:279},{x:516,y:80},{x:462,y:180},{x:1626,y:28},{x:1668,y:53},{x:444,y:261},{x:516,y:8},{x:1265,y:347},{x:624,y:135},{x:858,y:71},{x:471,y:62},{x:345,y:62},{x:543,y:53},{x:588,y:261},{x:363,y:135},{x:1333,y:288},{x:93,y:369},{x:768,y:315},{x:201,y:333},{x:165,y:189},{x:444,y:35},{x:669,y:171},{x:1223,y:78},{x:93,y:270},{x:336,y:153},{x:453,y:243},{x:480,y:116},{x:84,y:396},{x:147,y:369},{x:435,y:297},{x:669,y:288},{x:291,y:297},{x:687,y:171},{x:1215,y:154},{x:1526,y:70},{x:588,y:279},{x:732,y:387},{x:597,y:216},{x:111,y:180},{x:1643,y:70},{x:1249,y:95},{x:327,y:270},{x:219,y:144},{x:498,y:189},{x:102,y:216},{x:768,y:324},{x:507,y:116},{x:1618,y:78},{x:93,y:333},{x:588,y:71},{x:102,y:261},{x:372,y:315},{x:462,y:216},{x:741,y:53},{x:1744,y:86},{x:723,y:107},{x:1223,y:154},{x:183,y:288},{x:228,y:378},{x:1652,y:53},{x:489,y:162},{x:84,y:270},{x:804,y:62},{x:1324,y:389},{x:831,y:71},{x:453,y:297},{x:453,y:279},{x:1265,y:120},{x:1484,y:154},{x:822,y:207},{x:255,y:53},{x:750,y:44},{x:1727,y:36},{x:1383,y:145},{x:327,y:261},{x:822,y:180},{x:255,y:333},{x:534,y:324},{x:255,y:297},{x:588,y:324},{x:1249,y:246},{x:372,y:180},{x:417,y:180},{x:606,y:315},{x:1425,y:196},{x:741,y:306},{x:426,y:306},{x:1207,y:78},{x:1249,y:204},{x:471,y:26},{x:732,y:234},{x:777,y:252},{x:327,y:116},{x:1207,y:137},{x:1417,y:61},{x:741,y:89},{x:327,y:225},{x:399,y:144},{x:192,y:369},{x:480,y:98},{x:1744,y:19},{x:372,y:369},{x:1131,y:103},{x:678,y:315},{x:138,y:180},{x:516,y:189},{x:651,y:315},{x:183,y:306},{x:417,y:252},{x:1307,y:212},{x:516,y:333},{x:759,y:342},{x:1400,y:162},{x:1291,y:372},{x:1240,y:355},{x:1400,y:95},{x:273,y:89},{x:372,y:306},{x:1249,y:313},{x:1198,y:103},{x:390,y:71},{x:543,y:17},{x:552,y:171},{x:516,y:306},{x:1316,y:137},{x:561,y:89},{x:1324,y:221},{x:561,y:324},{x:498,y:315},{x:1240,y:187},{x:1274,y:254},{x:723,y:135},{x:93,y:261},{x:795,y:44},{x:147,y:189},{x:282,y:89},{x:201,y:198},{x:1626,y:70},{x:534,y:252},{x:1727,y:11},{x:543,y:261},{x:201,y:369},{x:633,y:71},{x:291,y:171},{x:345,y:171},{x:534,y:162},{x:444,y:252},{x:129,y:270},{x:516,y:324},{x:1223,y:271},{x:1400,y:187},{x:57,y:396},{x:1635,y:61},{x:1274,y:170},{x:1349,y:128},{x:642,y:351},{x:435,y:234},{x:453,y:171},{x:597,y:297},{x:147,y:315},{x:174,y:71},{x:732,y:98},{x:372,y:270},{x:363,y:62},{x:1257,y:263},{x:579,y:360},{x:354,y:71},{x:390,y:378},{x:480,y:135},{x:354,y:162},{x:1542,y:28},{x:66,y:216},{x:876,y:71},{x:570,y:71},{x:1223,y:263},{x:1417,y:86},{x:1240,y:103},{x:1249,y:103},{x:480,y:198},{x:201,y:135},{x:624,y:98},{x:192,y:180},{x:579,y:333},{x:1165,y:86},{x:768,y:144},{x:1316,y:162},{x:732,y:342},{x:543,y:44},{x:651,y:261},{x:588,y:351},{x:282,y:333},{x:111,y:261},{x:381,y:378},{x:489,y:17},{x:642,y:53},{x:399,y:288},{x:543,y:342},{x:1274,y:162},{x:1500,y:61},{x:723,y:71},{x:327,y:333},{x:1626,y:19},{x:417,y:71},{x:246,y:107},{x:381,y:243},{x:525,y:315},{x:345,y:306},{x:1349,y:86},{x:1458,y:61},{x:750,y:144},{x:219,y:225},{x:399,y:225},{x:1316,y:61},{x:1299,y:179},{x:1400,y:170},{x:417,y:297},{x:1333,y:347},{x:1307,y:86},{x:786,y:44},{x:1433,y:212},{x:489,y:198},{x:1307,y:137},{x:300,y:234},{x:1417,y:162},{x:849,y:279},{x:651,y:107},{x:93,y:306},{x:1400,y:128},{x:642,y:153},{x:1458,y:154},{x:1500,y:128},{x:795,y:62},{x:552,y:17},{x:1274,y:212},{x:741,y:135},{x:1366,y:95},{x:651,y:162},{x:741,y:225},{x:750,y:369},{x:1307,y:196},{x:822,y:252},{x:309,y:80},{x:471,y:189},{x:669,y:44},{x:210,y:198},{x:1257,y:103},{x:1282,y:322},{x:129,y:171},{x:156,y:378},{x:588,y:252},{x:498,y:98},{x:660,y:189},{x:1349,y:170},{x:1349,y:212},{x:300,y:225},{x:795,y:98},{x:282,y:125},{x:1358,y:86},{x:1358,y:128},{x:345,y:89},{x:48,y:297},{x:309,y:378},{x:1467,y:179},{x:633,y:80},{x:1408,y:61},{x:651,y:270},{x:489,y:288},{x:768,y:107},{x:741,y:35},{x:282,y:396},{x:435,y:288},{x:1450,y:187},{x:543,y:297},{x:264,y:225},{x:1333,y:103},{x:759,y:125},{x:1148,y:70},{x:678,y:144},{x:1215,y:238},{x:264,y:125},{x:1349,y:380},{x:1307,y:271},{x:741,y:116},{x:426,y:369},{x:705,y:243},{x:516,y:198},{x:210,y:315},{x:552,y:387},{x:750,y:333},{x:462,y:279},{x:1105,y:112},{x:165,y:396},{x:606,y:171},{x:75,y:315},{x:1702,y:28},{x:192,y:189},{x:660,y:89},{x:408,y:62},{x:651,y:144},{x:192,y:288},{x:687,y:369},{x:525,y:125},{x:93,y:243},{x:201,y:288},{x:759,y:198},{x:606,y:243},{x:399,y:360},{x:1207,y:170},{x:876,y:207},{x:1215,y:288},{x:318,y:288},{x:615,y:252},{x:165,y:360},{x:831,y:162},{x:507,y:288},{x:1341,y:271},{x:732,y:252},{x:489,y:306},{x:498,y:162},{x:1400,y:145},{x:1249,y:364},{x:453,y:207},{x:102,y:342},{x:57,y:342},{x:1282,y:103},{x:192,y:360},{x:624,y:324},{x:714,y:35},{x:246,y:351},{x:822,y:89},{x:1291,y:212},{x:273,y:125},{x:759,y:89},{x:291,y:162},{x:156,y:125},{x:471,y:153},{x:345,y:333},{x:894,y:80},{x:237,y:297},{x:1249,y:86},{x:723,y:53},{x:21,y:387},{x:570,y:17},{x:453,y:125},{x:3,y:351},{x:1375,y:229},{x:651,y:243},{x:1299,y:271},{x:471,y:207},{x:1190,y:238},{x:111,y:288},{x:174,y:189},{x:93,y:297},{x:1333,y:389},{x:642,y:71},{x:687,y:297},{x:498,y:261},{x:399,y:98},{x:696,y:98},{x:633,y:333},{x:1341,y:204},{x:57,y:369},{x:687,y:53},{x:741,y:107},{x:1526,y:128},{x:318,y:369},{x:732,y:207},{x:804,y:207},{x:66,y:144},{x:426,y:116},{x:931,y:89},{x:390,y:98},{x:444,y:44},{x:246,y:98},{x:624,y:80},{x:1534,y:95},{x:642,y:306},{x:381,y:71},{x:480,y:26},{x:1417,y:238},{x:1618,y:53},{x:570,y:297},{x:1358,y:271},{x:318,y:225},{x:669,y:333},{x:120,y:234},{x:759,y:44},{x:498,y:270},{x:1207,y:120},{x:624,y:297},{x:642,y:315},{x:705,y:144},{x:147,y:261},{x:363,y:378},{x:597,y:324},{x:219,y:53},{x:570,y:243},{x:615,y:261},{x:1173,y:70},{x:426,y:189},{x:435,y:243},{x:372,y:144},{x:1626,y:103},{x:1282,y:238},{x:417,y:189},{x:264,y:53},{x:462,y:189},{x:210,y:171},{x:183,y:189},{x:1458,y:187},{x:354,y:234},{x:156,y:315},{x:1307,y:103},{x:462,y:62},{x:219,y:189},{x:1500,y:162},{x:1425,y:95},{x:1475,y:170},{x:624,y:279},{x:435,y:171},{x:615,y:116},{x:381,y:98},{x:1408,y:246},{x:1391,y:212},{x:768,y:306},{x:741,y:80},{x:489,y:207},{x:345,y:98},{x:588,y:153},{x:696,y:135},{x:1223,y:288},{x:795,y:80},{x:678,y:369},{x:246,y:144},{x:570,y:89},{x:453,y:225},{x:525,y:270},{x:777,y:261},{x:732,y:261},{x:669,y:107},{x:1702,y:11},{x:435,y:225},{x:606,y:62},{x:705,y:270},{x:390,y:288},{x:1291,y:78},{x:462,y:243},{x:264,y:180},{x:408,y:225},{x:633,y:189},{x:1232,y:128},{x:723,y:261},{x:615,y:198},{x:705,y:261},{x:1366,y:112},{x:768,y:297},{x:84,y:333},{x:1719,y:44},{x:1265,y:221},{x:687,y:62},{x:849,y:89},{x:633,y:324},{x:327,y:171},{x:291,y:225},{x:723,y:342},{x:507,y:144},{x:264,y:324},{x:219,y:198},{x:1408,y:364},{x:714,y:180},{x:1265,y:372},{x:300,y:342},{x:399,y:153},{x:813,y:216},{x:273,y:387},{x:696,y:279},{x:777,y:243},{x:561,y:80},{x:1433,y:95},{x:1417,y:254},{x:426,y:98},{x:363,y:180},{x:831,y:171},{x:552,y:107},{x:228,y:116},{x:336,y:387},{x:1316,y:112},{x:1358,y:212},{x:777,y:333},{x:1181,y:70},{x:1593,y:28},{x:750,y:89},{x:822,y:171},{x:228,y:360},{x:741,y:333},{x:336,y:216},{x:1375,y:263},{x:1349,y:70},{x:1198,y:271},{x:129,y:315},{x:1215,y:187},{x:1207,y:61},{x:1383,y:120},{x:435,y:252},{x:552,y:207},{x:696,y:180},{x:615,y:53},{x:399,y:270},{x:552,y:180},{x:732,y:80},{x:597,y:306},{x:1719,y:53},{x:39,y:324},{x:1131,y:120},{x:894,y:89},{x:102,y:207},{x:498,y:26},{x:1450,y:86},{x:75,y:297},{x:534,y:360},{x:615,y:207},{x:1240,y:70},{x:417,y:333},{x:192,y:116},{x:1677,y:70},{x:1299,y:162},{x:525,y:62},{x:1265,y:313},{x:156,y:198},{x:570,y:125},{x:1425,y:187},{x:498,y:225},{x:1291,y:162},{x:714,y:135},{x:705,y:35},{x:1458,y:95},{x:426,y:324},{x:525,y:297},{x:1274,y:364},{x:1618,y:112},{x:93,y:144},{x:615,y:279},{x:399,y:261},{x:876,y:80},{x:102,y:198},{x:1383,y:86},{x:813,y:198},{x:1358,y:53},{x:345,y:153},{x:651,y:324},{x:300,y:333},{x:1165,y:70},{x:615,y:107},{x:714,y:198},{x:570,y:189},{x:417,y:288},{x:471,y:135},{x:606,y:135},{x:1391,y:120},{x:1333,y:204},{x:588,y:333},{x:552,y:297},{x:660,y:360},{x:1249,y:162},{x:534,y:351},{x:660,y:216},{x:480,y:189},{x:30,y:360},{x:507,y:71},{x:390,y:351},{x:651,y:189},{x:1736,y:11},{x:1223,y:162},{x:1190,y:254},{x:498,y:17},{x:435,y:162},{x:93,y:162},{x:1215,y:70},{x:561,y:297},{x:1366,y:170},{x:93,y:288},{x:1526,y:86},{x:1299,y:263},{x:552,y:198},{x:1744,y:28},{x:1324,y:196},{x:453,y:53},{x:318,y:396},{x:444,y:342},{x:705,y:306},{x:507,y:125},{x:1341,y:103},{x:462,y:270},{x:1534,y:70},{x:714,y:116},{x:1274,y:313},{x:381,y:297},{x:669,y:315},{x:183,y:324},{x:246,y:369},{x:597,y:116},{x:219,y:396},{x:507,y:98},{x:1257,y:221},{x:1375,y:154},{x:1450,y:212},{x:804,y:89},{x:822,y:144},{x:489,y:315},{x:345,y:351},{x:507,y:306},{x:156,y:98},{x:228,y:324},{x:84,y:342},{x:1366,y:44},{x:165,y:162},{x:1643,y:11},{x:192,y:387},{x:615,y:306},{x:84,y:360},{x:1366,y:280},{x:669,y:80},{x:201,y:80},{x:1349,y:221},{x:156,y:252},{x:552,y:153},{x:696,y:351},{x:183,y:333},{x:1417,y:170},{x:129,y:198},{x:1249,y:212},{x:1257,y:364},{x:1265,y:296},{x:1375,y:322},{x:498,y:216},{x:1509,y:53},{x:1375,y:338},{x:813,y:378},{x:183,y:71},{x:174,y:207},{x:1450,y:221},{x:57,y:288},{x:192,y:279},{x:174,y:144},{x:1215,y:128},{x:336,y:225},{x:435,y:125},{x:1240,y:221},{x:516,y:71},{x:1324,y:145},{x:534,y:135},{x:642,y:62},{x:282,y:306},{x:1736,y:19},{x:102,y:360},{x:777,y:53},{x:570,y:288},{x:1316,y:364},{x:1282,y:179},{x:543,y:80},{x:642,y:342},{x:444,y:243},{x:147,y:89},{x:165,y:333},{x:597,y:53},{x:174,y:216},{x:489,y:297},{x:570,y:279},{x:336,y:189},{x:705,y:369},{x:489,y:116},{x:363,y:315},{x:1307,y:70},{x:543,y:189},{x:1291,y:364},{x:678,y:53},{x:723,y:252},{x:1307,y:364},{x:354,y:153},{x:1249,y:238},{x:606,y:297},{x:363,y:261},{x:1677,y:53},{x:1383,y:61},{x:309,y:342},{x:1291,y:280},{x:1744,y:95},{x:147,y:144},{x:1324,y:70},{x:489,y:98},{x:336,y:125},{x:1467,y:78},{x:1131,y:86},{x:75,y:207},{x:777,y:189},{x:1517,y:11},{x:138,y:396},{x:552,y:216},{x:1190,y:263},{x:1240,y:288},{x:1274,y:229},{x:399,y:89},{x:1702,y:53},{x:813,y:107},{x:354,y:80},{x:1668,y:44},{x:732,y:171},{x:894,y:62},{x:174,y:288},{x:228,y:396},{x:363,y:71},{x:1736,y:3},{x:615,y:35},{x:471,y:216},{x:1752,y:28},{x:444,y:288},{x:1400,y:78},{x:561,y:153},{x:417,y:162},{x:336,y:270},{x:624,y:62},{x:147,y:162},{x:498,y:107},{x:723,y:243},{x:1240,y:330},{x:678,y:180},{x:543,y:125},{x:1341,y:70},{x:624,y:125},{x:651,y:198},{x:417,y:62},{x:543,y:288},{x:93,y:279},{x:642,y:261},{x:102,y:387},{x:417,y:342},{x:741,y:98},{x:1148,y:103},{x:705,y:225},{x:741,y:162},{x:633,y:98},{x:1635,y:103},{x:471,y:89},{x:1324,y:372},{x:1198,y:78},{x:1341,y:397},{x:804,y:180},{x:1702,y:19},{x:1223,y:112},{x:1207,y:280},{x:552,y:116},{x:1484,y:53},{x:1274,y:128},{x:399,y:324},{x:1215,y:179},{x:246,y:387},{x:174,y:378},{x:588,y:62},{x:732,y:306},{x:1509,y:162},{x:372,y:234},{x:408,y:44},{x:831,y:189},{x:1307,y:154},{x:210,y:162},{x:120,y:162},{x:543,y:62},{x:183,y:351},{x:444,y:135},{x:534,y:35},{x:1274,y:137},{x:291,y:53},{x:786,y:216},{x:435,y:144},{x:1249,y:154},{x:1349,y:78},{x:1249,y:145},{x:147,y:342},{x:444,y:89},{x:273,y:297},{x:597,y:98},{x:390,y:207},{x:1190,y:212},{x:1534,y:86},{x:687,y:216},{x:687,y:360},{x:399,y:180},{x:633,y:116},{x:1391,y:53},{x:345,y:342},{x:1643,y:19},{x:354,y:351},{x:732,y:225},{x:1324,y:95},{x:255,y:180},{x:660,y:198},{x:156,y:153},{x:1358,y:238},{x:552,y:26},{x:1291,y:112},{x:390,y:342},{x:1509,y:28},{x:570,y:171},{x:876,y:261},{x:1198,y:238},{x:525,y:225},{x:552,y:378},{x:1417,y:154},{x:750,y:171},{x:111,y:351},{x:714,y:288},{x:102,y:396},{x:687,y:198},{x:1257,y:229},{x:75,y:261},{x:183,y:80},{x:768,y:279},{x:1408,y:95},{x:1584,y:11},{x:705,y:297},{x:264,y:62},{x:264,y:387},{x:885,y:116},{x:30,y:306},{x:804,y:189},{x:525,y:207},{x:1341,y:196},{x:615,y:288},{x:174,y:180},{x:615,y:44},{x:327,y:243},{x:588,y:89},{x:822,y:189},{x:318,y:98},{x:768,y:125},{x:669,y:306},{x:21,y:396},{x:525,y:17},{x:255,y:189},{x:894,y:53},{x:462,y:198},{x:561,y:17},{x:624,y:89},{x:579,y:342},{x:1240,y:305},{x:201,y:360},{x:1215,y:229},{x:336,y:351},{x:606,y:198},{x:570,y:306},{x:1719,y:61},{x:741,y:396},{x:1517,y:128},{x:507,y:261},{x:480,y:315},{x:1542,y:187},{x:687,y:351},{x:1400,y:61},{x:489,y:53},{x:39,y:387},{x:642,y:324},{x:471,y:44},{x:93,y:342},{x:372,y:297},{x:237,y:351},{x:84,y:279},{x:1358,y:112},{x:660,y:378},{x:480,y:62},{x:363,y:80},{x:1207,y:86},{x:1165,y:78},{x:354,y:171},{x:228,y:162},{x:624,y:116},{x:696,y:89},{x:237,y:342},{x:1333,y:70},{x:1324,y:271},{x:723,y:306},{x:660,y:261},{x:1710,y:61},{x:300,y:135},{x:1324,y:204},{x:1282,y:145},{x:417,y:207},{x:138,y:351},{x:903,y:80},{x:1710,y:11},{x:1232,y:263},{x:759,y:279},{x:831,y:396},{x:633,y:62},{x:1198,y:305},{x:462,y:234},{x:318,y:243},{x:426,y:180},{x:1484,y:162},{x:1240,y:296},{x:1652,y:70},{x:372,y:360},{x:1291,y:254},{x:1333,y:128},{x:1677,y:61},{x:210,y:306},{x:408,y:306},{x:1375,y:313},{x:1500,y:86},{x:1727,y:28},{x:1626,y:95},{x:1694,y:61},{x:273,y:288},{x:1391,y:154},{x:165,y:207},{x:1475,y:187},{x:372,y:261},{x:543,y:35},{x:318,y:116},{x:588,y:207},{x:3,y:396},{x:174,y:360},{x:1291,y:70},{x:1223,y:280},{x:1207,y:229},{x:1274,y:204},{x:570,y:116},{x:660,y:98},{x:318,y:53},{x:237,y:198},{x:291,y:243},{x:1123,y:86},{x:129,y:279},{x:732,y:44},{x:606,y:116},{x:894,y:71},{x:291,y:80},{x:606,y:89},{x:705,y:71},{x:525,y:342},{x:516,y:26},{x:255,y:324},{x:39,y:333},{x:1366,y:288},{x:318,y:180},{x:1668,y:11},{x:525,y:26},{x:777,y:98},{x:543,y:315},{x:66,y:369},{x:498,y:89},{x:1232,y:187},{x:1509,y:128},{x:633,y:279},{x:1249,y:280},{x:102,y:279},{x:291,y:153},{x:561,y:360},{x:1232,y:305},{x:552,y:80},{x:462,y:261},{x:120,y:261},{x:75,y:342},{x:705,y:44},{x:624,y:207},{x:840,y:62},{x:129,y:297},{x:1282,y:212},{x:246,y:396},{x:417,y:98},{x:1727,y:19},{x:1484,y:70},{x:687,y:107},{x:1358,y:204},{x:435,y:89},{x:1526,y:61},{x:831,y:98},{x:237,y:216},{x:345,y:279},{x:588,y:125},{x:318,y:297},{x:1190,y:103},{x:1274,y:112},{x:588,y:144},{x:1400,y:112},{x:1282,y:162},{x:579,y:216},{x:1375,y:196},{x:1291,y:229},{x:435,y:360},{x:129,y:252},{x:570,y:315},{x:705,y:216},{x:642,y:270},{x:1349,y:179},{x:1240,y:263},{x:1458,y:212},{x:489,y:44},{x:1618,y:86},{x:1618,y:70},{x:300,y:80},{x:615,y:243},{x:165,y:306},{x:273,y:62},{x:219,y:234},{x:156,y:387},{x:282,y:180},{x:1484,y:170},{x:714,y:153},{x:1517,y:36},{x:1181,y:61},{x:1282,y:271},{x:462,y:144},{x:435,y:333},{x:913,y:62},{x:1307,y:179},{x:291,y:333},{x:282,y:297},{x:327,y:189},{x:201,y:342},{x:417,y:243},{x:1442,y:162},{x:1710,y:19},{x:949,y:62},{x:435,y:71},{x:1467,y:170},{x:408,y:342},{x:1694,y:19},{x:291,y:396},{x:741,y:216},{x:1408,y:254},{x:1358,y:61},{x:651,y:216},{x:723,y:333},{x:453,y:288},{x:795,y:180},{x:723,y:225},{x:1417,y:364},{x:444,y:98},{x:1400,y:347},{x:1383,y:162},{x:1265,y:254},{x:1509,y:86},{x:732,y:288},{x:1265,y:355},{x:1232,y:296},{x:660,y:180},{x:156,y:279},{x:525,y:216},{x:201,y:162},{x:615,y:62},{x:1232,y:196},{x:741,y:270},{x:156,y:135},{x:426,y:107},{x:606,y:162},{x:750,y:225},{x:696,y:80},{x:1190,y:246},{x:219,y:80},{x:336,y:207},{x:354,y:189},{x:723,y:153},{x:759,y:135},{x:111,y:153},{x:156,y:107},{x:1652,y:61},{x:426,y:261},{x:408,y:288},{x:714,y:89},{x:336,y:107},{x:66,y:225},{x:309,y:306},{x:219,y:297},{x:1727,y:44},{x:138,y:306},{x:1694,y:53},{x:1769,y:11},{x:579,y:198},{x:786,y:288},{x:354,y:207},{x:435,y:189},{x:1736,y:53},{x:777,y:216},{x:894,y:135},{x:381,y:351},{x:174,y:315},{x:1500,y:19},{x:1240,y:246},{x:426,y:360},{x:129,y:360},{x:633,y:35},{x:111,y:189},{x:723,y:62},{x:651,y:225},{x:786,y:116},{x:1333,y:254},{x:57,y:333},{x:219,y:324},{x:192,y:153},{x:696,y:162},{x:255,y:135},{x:192,y:342},{x:1265,y:229},{x:219,y:125},{x:408,y:252},{x:1282,y:280},{x:1341,y:254},{x:408,y:234},{x:1257,y:271},{x:390,y:387},{x:1752,y:95},{x:1265,y:288},{x:453,y:189},{x:327,y:252},{x:201,y:378},{x:768,y:62},{x:228,y:333},{x:183,y:378},{x:39,y:369},{x:174,y:387},{x:831,y:252},{x:111,y:297},{x:426,y:234},{x:210,y:144},{x:480,y:207},{x:1601,y:19},{x:1156,y:103},{x:516,y:144},{x:885,y:225},{x:705,y:360},{x:336,y:252},{x:417,y:351},{x:723,y:288},{x:1316,y:254},{x:1215,y:95},{x:129,y:378},{x:867,y:198},{x:192,y:53},{x:1232,y:288},{x:372,y:216},{x:354,y:252},{x:381,y:162},{x:768,y:270},{x:579,y:89},{x:381,y:171},{x:399,y:71},{x:156,y:89},{x:822,y:53},{x:669,y:189},{x:1458,y:170},{x:363,y:225},{x:1265,y:86},{x:174,y:89},{x:435,y:306},{x:498,y:116},{x:1282,y:154},{x:705,y:62},{x:1265,y:179},{x:1232,y:204},{x:399,y:107},{x:237,y:360},{x:696,y:243},{x:66,y:243},{x:399,y:378},{x:525,y:333},{x:111,y:171},{x:273,y:71},{x:1265,y:330},{x:120,y:297},{x:1391,y:229},{x:57,y:225},{x:1576,y:28},{x:372,y:162},{x:453,y:261},{x:363,y:171},{x:471,y:297},{x:192,y:261},{x:624,y:234},{x:147,y:171},{x:1635,y:53},{x:1257,y:355},{x:588,y:360},{x:678,y:261},{x:1685,y:36},{x:1333,y:170},{x:471,y:243},{x:660,y:153},{x:426,y:351},{x:660,y:62},{x:1383,y:170},{x:1526,y:120},{x:1307,y:380},{x:1274,y:86},{x:174,y:279},{x:318,y:89},{x:1509,y:19},{x:741,y:279},{x:570,y:107},{x:309,y:360},{x:1341,y:128},{x:309,y:71},{x:696,y:378},{x:660,y:270},{x:777,y:171},{x:1215,y:271},{x:1358,y:162},{x:1400,y:53},{x:705,y:198},{x:147,y:306},{x:1417,y:179},{x:237,y:189},{x:804,y:162},{x:516,y:125},{x:705,y:333},{x:264,y:243},{x:57,y:234},{x:570,y:98},{x:462,y:71},{x:57,y:243},{x:93,y:207},{x:705,y:324},{x:516,y:342},{x:1484,y:128},{x:1358,y:254},{x:372,y:116},{x:1291,y:196},{x:363,y:252},{x:57,y:378},{x:1265,y:238},{x:525,y:53},{x:1333,y:78},{x:1215,y:196},{x:1257,y:137},{x:1559,y:19},{x:1282,y:221},{x:129,y:342},{x:336,y:288},{x:408,y:89},{x:129,y:306},{x:336,y:171},{x:408,y:279},{x:804,y:234},{x:1274,y:271},{x:534,y:44},{x:1375,y:221},{x:138,y:207},{x:516,y:89},{x:75,y:369},{x:156,y:333},{x:273,y:396},{x:1207,y:212},{x:1291,y:95},{x:759,y:216},{x:174,y:324},{x:1316,y:229},{x:624,y:270},{x:1635,y:11},{x:219,y:89},{x:768,y:71},{x:1542,y:154},{x:1282,y:347},{x:192,y:107},{x:696,y:342},{x:858,y:62},{x:633,y:216},{x:750,y:216},{x:1458,y:78},{x:1240,y:86},{x:345,y:297},{x:1265,y:154},{x:1307,y:187},{x:516,y:252},{x:579,y:378},{x:561,y:396},{x:1517,y:28},{x:408,y:80},{x:165,y:342},{x:183,y:62},{x:741,y:171},{x:1257,y:347},{x:786,y:225},{x:480,y:71},{x:768,y:80},{x:147,y:270},{x:1349,y:120},{x:1484,y:196},{x:1240,y:128},{x:1257,y:196},{x:1425,y:154},{x:1265,y:271},{x:246,y:207},{x:651,y:288},{x:570,y:387},{x:1383,y:238},{x:1282,y:86},{x:615,y:297},{x:1425,y:170},{x:1694,y:36},{x:219,y:216},{x:570,y:270},{x:813,y:62},{x:1710,y:70},{x:1475,y:128},{x:1240,y:271},{x:1341,y:229},{x:462,y:44},{x:642,y:297},{x:552,y:89},{x:453,y:234},{x:345,y:396},{x:147,y:153},{x:768,y:243},{x:1425,y:364},{x:417,y:144},{x:507,y:44},{x:525,y:189},{x:669,y:153},{x:903,y:71},{x:813,y:207},{x:57,y:315},{x:381,y:107},{x:48,y:396},{x:1291,y:221},{x:1635,y:28},{x:210,y:360},{x:309,y:144},{x:1291,y:128},{x:723,y:351},{x:1274,y:221},{x:696,y:125},{x:84,y:261},{x:309,y:369},{x:1383,y:364},{x:1375,y:296},{x:210,y:396},{x:318,y:80},{x:786,y:71},{x:1492,y:170},{x:192,y:162},{x:1366,y:229},{x:408,y:107},{x:156,y:144},{x:1265,y:280},{x:237,y:107},{x:732,y:378},{x:1475,y:204},{x:561,y:98},{x:84,y:216},{x:1500,y:154},{x:237,y:125},{x:336,y:135},{x:201,y:297},{x:1643,y:44},{x:273,y:116},{x:759,y:144},{x:1232,y:120},{x:543,y:378},{x:561,y:162},{x:768,y:252},{x:1265,y:103},{x:1643,y:86},{x:687,y:387},{x:1534,y:137},{x:1467,y:145},{x:354,y:369},{x:75,y:351},{x:507,y:107},{x:858,y:80},{x:372,y:243},{x:579,y:53},{x:1198,y:204},{x:552,y:306},{x:1316,y:280},{x:1475,y:44},{x:174,y:351},{x:75,y:333},{x:678,y:279},{x:534,y:243},{x:525,y:35},{x:309,y:279},{x:264,y:107},{x:1223,y:120},{x:66,y:387},{x:1341,y:246},{x:597,y:351},{x:1105,y:128},{x:543,y:270},{x:75,y:378},{x:660,y:125},{x:552,y:71},{x:1265,y:338},{x:480,y:243},{x:579,y:80},{x:642,y:252},{x:183,y:369},{x:255,y:198},{x:1198,y:296},{x:120,y:378},{x:354,y:360},{x:1207,y:128},{x:1324,y:86},{x:462,y:26},{x:543,y:306},{x:39,y:360},{x:111,y:369},{x:462,y:107},{x:327,y:62},{x:489,y:62},{x:1282,y:70},{x:1113,y:112},{x:30,y:333},{x:336,y:116},{x:471,y:288},{x:354,y:342},{x:1282,y:305},{x:1113,y:103},{x:1249,y:288},{x:471,y:315},{x:687,y:98},{x:750,y:207},{x:624,y:261},{x:1375,y:70},{x:426,y:270},{x:696,y:315},{x:129,y:333},{x:597,y:189},{x:561,y:234},{x:1249,y:112},{x:903,y:62},{x:1400,y:212},{x:453,y:144},{x:570,y:80},{x:336,y:297},{x:246,y:306},{x:498,y:135},{x:273,y:315},{x:273,y:243},{x:309,y:153},{x:336,y:62},{x:1274,y:187},{x:1333,y:112},{x:1375,y:95},{x:723,y:80},{x:111,y:378},{x:561,y:279},{x:1366,y:78},{x:1307,y:372},{x:417,y:116},{x:1702,y:61},{x:1542,y:11},{x:489,y:189},{x:867,y:252},{x:336,y:89},{x:309,y:351},{x:480,y:252},{x:318,y:162},{x:958,y:71},{x:480,y:270},{x:534,y:71},{x:381,y:315},{x:192,y:306},{x:1383,y:263},{x:498,y:306},{x:1207,y:271},{x:1333,y:179},{x:615,y:216},{x:543,y:26},{x:1349,y:397},{x:534,y:171},{x:1660,y:19},{x:660,y:44},{x:1349,y:137},{x:1316,y:380},{x:1534,y:28},{x:165,y:144},{x:543,y:198},{x:498,y:125},{x:669,y:378},{x:1358,y:137},{x:444,y:144},{x:1215,y:204},{x:246,y:324},{x:1366,y:53},{x:408,y:180},{x:741,y:71},{x:1274,y:238},{x:579,y:26},{x:606,y:153},{x:228,y:225},{x:741,y:234},{x:1375,y:179},{x:237,y:53},{x:111,y:315},{x:768,y:333},{x:1341,y:145},{x:624,y:333},{x:1240,y:137},{x:228,y:216},{x:705,y:171},{x:480,y:288},{x:165,y:270},{x:822,y:378},{x:1601,y:11},{x:417,y:216},{x:1408,y:170},{x:480,y:44},{x:597,y:288},{x:21,y:351},{x:408,y:98},{x:498,y:80},{x:129,y:180},{x:237,y:135},{x:282,y:360},{x:273,y:153},{x:1207,y:112},{x:1215,y:330},{x:336,y:315},{x:1249,y:355},{x:1408,y:229},{x:813,y:98},{x:1442,y:70},{x:1207,y:322},{x:723,y:216},{x:1223,y:196},{x:642,y:89},{x:489,y:80},{x:867,y:261},{x:1408,y:221},{x:1307,y:254},{x:1307,y:120},{x:318,y:252},{x:1542,y:78},{x:327,y:324},{x:1215,y:280},{x:1425,y:355},{x:102,y:378},{x:552,y:252},{x:1643,y:78},{x:705,y:53},{x:516,y:225},{x:165,y:89},{x:1610,y:28},{x:1223,y:212},{x:1710,y:28},{x:30,y:351},{x:642,y:207},{x:543,y:89},{x:174,y:116},{x:804,y:44},{x:1324,y:380},{x:651,y:306},{x:1450,y:61},{x:732,y:270},{x:750,y:315},{x:354,y:288},{x:579,y:189},{x:480,y:297},{x:84,y:387},{x:1316,y:389},{x:507,y:62},{x:1526,y:78},{x:1433,y:162},{x:1366,y:103},{x:345,y:53},{x:435,y:216},{x:219,y:315},{x:777,y:44},{x:246,y:153},{x:1324,y:355},{x:750,y:288},{x:255,y:89},{x:327,y:180},{x:363,y:333},{x:1257,y:78},{x:1265,y:95},{x:183,y:387},{x:597,y:270},{x:354,y:315},{x:516,y:279},{x:525,y:116},{x:1257,y:95},{x:1433,y:179},{x:867,y:80},{x:291,y:324},{x:120,y:306},{x:1333,y:187},{x:120,y:369},{x:588,y:315},{x:813,y:53},{x:1291,y:246},{x:75,y:396},{x:390,y:125},{x:1400,y:246},{x:624,y:44},{x:309,y:243},{x:1223,y:61},{x:696,y:297},{x:867,y:71},{x:606,y:144},{x:147,y:378},{x:1265,y:364},{x:1500,y:179},{x:687,y:180},{x:1249,y:296},{x:1190,y:70},{x:210,y:324},{x:885,y:62},{x:885,y:89},{x:1442,y:196},{x:579,y:35},{x:165,y:171},{x:777,y:107},{x:255,y:378},{x:1249,y:330},{x:462,y:315},{x:1181,y:238},{x:345,y:135},{x:498,y:153},{x:219,y:387},{x:804,y:333},{x:300,y:351},{x:336,y:80},{x:489,y:180},{x:777,y:225},{x:705,y:234},{x:1710,y:53},{x:813,y:369},{x:750,y:279},{x:192,y:297},{x:291,y:180},{x:534,y:279},{x:642,y:125},{x:759,y:53},{x:1526,y:103},{x:372,y:396},{x:228,y:288},{x:1450,y:170},{x:381,y:270},{x:363,y:342},{x:660,y:171},{x:255,y:342},{x:561,y:144},{x:1240,y:120},{x:1542,y:179},{x:1425,y:145},{x:1207,y:95},{x:48,y:378},{x:345,y:216},{x:1333,y:145},{x:273,y:162},{x:372,y:80},{x:390,y:180},{x:489,y:135},{x:1215,y:78},{x:120,y:270},{x:1417,y:212},{x:1240,y:145},{x:255,y:306},{x:615,y:342},{x:543,y:324},{x:237,y:279},{x:1299,y:196},{x:750,y:189},{x:57,y:360},{x:1282,y:112},{x:597,y:234},{x:660,y:252},{x:219,y:207},{x:372,y:53},{x:696,y:198},{x:588,y:234},{x:237,y:207},{x:1265,y:322},{x:12,y:387},{x:633,y:107},{x:1349,y:95},{x:660,y:116},{x:273,y:324},{x:588,y:216},{x:1366,y:128},{x:678,y:306},{x:678,y:107},{x:372,y:225},{x:345,y:116},{x:1492,y:196},{x:489,y:243},{x:696,y:62},{x:210,y:369},{x:660,y:35},{x:309,y:261},{x:354,y:198},{x:1215,y:212},{x:525,y:198},{x:426,y:252},{x:507,y:225},{x:1223,y:170},{x:300,y:180},{x:228,y:387},{x:246,y:297},{x:1349,y:154},{x:525,y:153},{x:678,y:378},{x:543,y:180},{x:570,y:162},{x:1257,y:305},{x:705,y:279},{x:1408,y:53},{x:1492,y:204},{x:1240,y:238},{x:543,y:207},{x:471,y:261},{x:453,y:89},{x:741,y:198},{x:255,y:396},{x:858,y:270},{x:228,y:144},{x:1610,y:103},{x:813,y:324},{x:327,y:378},{x:165,y:135},{x:606,y:351},{x:1375,y:53},{x:228,y:62},{x:552,y:225},{x:732,y:35},{x:1568,y:11},{x:1383,y:95},{x:417,y:225},{x:624,y:342},{x:471,y:98},{x:327,y:71},{x:1652,y:36},{x:453,y:44},{x:444,y:198},{x:561,y:71},{x:174,y:98},{x:12,y:369},{x:1316,y:70},{x:183,y:243},{x:1375,y:112},{x:453,y:107},{x:1232,y:78},{x:687,y:80},{x:462,y:125},{x:913,y:98},{x:1123,y:103},{x:516,y:62},{x:1190,y:95},{x:741,y:144},{x:687,y:234},{x:84,y:378},{x:318,y:234},{x:1232,y:145},{x:669,y:243},{x:687,y:189},{x:534,y:198},{x:669,y:261},{x:363,y:351},{x:507,y:135},{x:93,y:324},{x:30,y:396},{x:363,y:144},{x:1181,y:254},{x:534,y:333},{x:831,y:180},{x:345,y:144},{x:678,y:288},{x:1232,y:95},{x:1668,y:28},{x:300,y:297},{x:111,y:360},{x:102,y:144},{x:615,y:333},{x:156,y:180},{x:480,y:180},{x:759,y:71},{x:210,y:297},{x:1249,y:347},{x:93,y:387},{x:345,y:315},{x:66,y:234},{x:759,y:80},{x:543,y:71},{x:795,y:324},{x:678,y:162},{x:228,y:369},{x:1391,y:162},{x:309,y:107},{x:345,y:360},{x:642,y:135},{x:84,y:288},{x:1307,y:238},{x:1274,y:305},{x:165,y:324},{x:768,y:116},{x:120,y:216},{x:426,y:71},{x:1618,y:95},{x:1610,y:86},{x:246,y:216},{x:741,y:189},{x:1274,y:246},{x:714,y:98},{x:300,y:171},{x:1433,y:154},{x:579,y:306},{x:147,y:324},{x:579,y:162},{x:327,y:153},{x:1383,y:103},{x:498,y:279},{x:1307,y:229},{x:1341,y:187},{x:471,y:198},{x:453,y:180},{x:1223,y:246},{x:1694,y:11},{x:147,y:396},{x:21,y:360},{x:390,y:315},{x:606,y:125},{x:543,y:252},{x:111,y:198},{x:1383,y:254},{x:822,y:261},{x:165,y:261},{x:1249,y:229},{x:48,y:342},{x:885,y:207},{x:246,y:288},{x:1190,y:221},{x:264,y:135},{x:516,y:135},{x:741,y:207},{x:552,y:279},{x:1257,y:322},{x:1467,y:204},{x:714,y:324},{x:1517,y:145},{x:318,y:198},{x:444,y:171},{x:1274,y:145},{x:1358,y:246},{x:1232,y:313},{x:498,y:252},{x:597,y:125},{x:606,y:180},{x:1299,y:145},{x:381,y:135},{x:183,y:162},{x:183,y:98},{x:570,y:135},{x:1509,y:120},{x:1324,y:120},{x:183,y:180},{x:1240,y:112},{x:822,y:107},{x:768,y:135},{x:822,y:162},{x:786,y:98},{x:237,y:396},{x:913,y:153},{x:507,y:252},{x:1383,y:112},{x:129,y:351},{x:102,y:306},{x:1517,y:162},{x:1257,y:145},{x:192,y:171},{x:1274,y:347},{x:237,y:288},{x:471,y:80},{x:525,y:171},{x:1618,y:44},{x:1324,y:162},{x:588,y:306},{x:48,y:315},{x:1249,y:196},{x:1526,y:154},{x:588,y:342},{x:651,y:53},{x:399,y:53},{x:561,y:243},{x:1274,y:78},{x:678,y:207},{x:1685,y:11},{x:282,y:135},{x:768,y:189},{x:651,y:153},{x:138,y:171},{x:1240,y:170},{x:1307,y:263},{x:516,y:297},{x:336,y:98},{x:759,y:207},{x:714,y:279},{x:1358,y:196},{x:246,y:162},{x:1215,y:112},{x:534,y:116},{x:1282,y:288},{x:390,y:270},{x:1417,y:78},{x:471,y:144},{x:399,y:62},{x:210,y:153},{x:570,y:234},{x:471,y:171},{x:210,y:180},{x:291,y:315},{x:480,y:17},{x:525,y:306},{x:795,y:189},{x:913,y:80},{x:1299,y:204},{x:651,y:125},{x:399,y:387},{x:507,y:324},{x:318,y:107},{x:1433,y:170},{x:606,y:189},{x:354,y:180},{x:1223,y:229},{x:417,y:306},{x:363,y:125},{x:1282,y:78},{x:1400,y:254},{x:1274,y:355},{x:201,y:351},{x:768,y:171},{x:336,y:333},{x:606,y:71},{x:1500,y:196},{x:579,y:261},{x:750,y:243},{x:291,y:261},{x:561,y:53},{x:1534,y:103},{x:1215,y:61},{x:390,y:162},{x:696,y:324},{x:1249,y:179},{x:588,y:369},{x:489,y:71},{x:1249,y:305},{x:795,y:225},{x:1282,y:229},{x:408,y:71},{x:534,y:288},{x:210,y:342},{x:1232,y:322},{x:786,y:107},{x:1777,y:11},{x:525,y:180},{x:372,y:107},{x:633,y:44},{x:768,y:225},{x:1425,y:238},{x:372,y:387},{x:381,y:324},{x:408,y:360},{x:246,y:89},{x:381,y:62},{x:1484,y:112},{x:669,y:297},{x:1097,y:120},{x:417,y:261},{x:75,y:234},{x:1232,y:112},{x:1240,y:212},{x:480,y:279},{x:237,y:89},{x:1484,y:137},{x:813,y:252},{x:471,y:35},{x:408,y:144},{x:93,y:351},{x:777,y:71},{x:273,y:225},{x:1198,y:229},{x:705,y:107},{x:30,y:387},{x:120,y:387},{x:1240,y:196},{x:633,y:270},{x:1391,y:246},{x:1685,y:70},{x:651,y:207},{x:327,y:89},{x:75,y:135},{x:949,y:71},{x:1719,y:11},{x:273,y:234},{x:1215,y:86},{x:714,y:342},{x:1333,y:221},{x:363,y:207},{x:543,y:107},{x:867,y:53},{x:867,y:216},{x:1139,y:86},{x:399,y:207},{x:723,y:89},{x:408,y:35},{x:1677,y:36},{x:237,y:315},{x:363,y:162},{x:408,y:171},{x:498,y:324},{x:922,y:62},{x:633,y:171},{x:1408,y:145},{x:1626,y:86},{x:336,y:324},{x:678,y:116},{x:768,y:53},{x:498,y:35},{x:597,y:26},{x:228,y:135},{x:1400,y:263},{x:1165,y:103},{x:507,y:17},{x:219,y:162},{x:291,y:107},{x:1324,y:112},{x:1475,y:137},{x:345,y:261},{x:1198,y:280},{x:732,y:62},{x:354,y:144},{x:534,y:378},{x:570,y:44},{x:390,y:89},{x:264,y:369},{x:579,y:62},{x:390,y:62},{x:561,y:44},{x:75,y:306},{x:1534,y:162},{x:1366,y:61},{x:1610,y:3},{x:507,y:207},{x:381,y:198},{x:642,y:180},{x:1207,y:187},{x:516,y:261},{x:714,y:162},{x:1736,y:95},{x:237,y:369},{x:714,y:107},{x:1366,y:221},{x:417,y:35},{x:255,y:234},{x:282,y:216},{x:1333,y:154},{x:282,y:189},{x:255,y:261},{x:444,y:125},{x:462,y:135},{x:822,y:198},{x:372,y:351},{x:462,y:153},{x:255,y:162},{x:1291,y:103},{x:120,y:315},{x:219,y:333},{x:246,y:333},{x:237,y:162},{x:174,y:369},{x:813,y:333},{x:354,y:89},{x:1291,y:271},{x:408,y:216},{x:642,y:198},{x:1341,y:154},{x:66,y:324},{x:858,y:171},{x:696,y:261},{x:642,y:144},{x:1341,y:137},{x:138,y:315},{x:1282,y:120},{x:669,y:198},{x:687,y:225},{x:1375,y:128},{x:1366,y:246},{x:588,y:80},{x:678,y:62},{x:327,y:144},{x:1500,y:112},{x:1383,y:280},{x:138,y:252},{x:480,y:171},{x:516,y:234},{x:732,y:135},{x:1232,y:254},{x:813,y:234},{x:345,y:207},{x:264,y:378},{x:1391,y:61},{x:210,y:189},{x:57,y:306},{x:318,y:378},{x:1299,y:95},{x:534,y:8},{x:660,y:279},{x:201,y:153},{x:696,y:360},{x:1240,y:95},{x:1341,y:280},{x:174,y:306},{x:597,y:252},{x:723,y:180},{x:552,y:261},{x:444,y:153},{x:1375,y:305},{x:1433,y:145},{x:741,y:261},{x:552,y:351},{x:1358,y:44},{x:1215,y:137},{x:75,y:360},{x:138,y:369},{x:1467,y:70},{x:300,y:324},{x:489,y:261},{x:381,y:333},{x:408,y:351},{x:1291,y:145},{x:669,y:225},{x:138,y:198},{x:579,y:98},{x:1316,y:355},{x:381,y:369},{x:399,y:189},{x:741,y:324},{x:696,y:252},{x:678,y:252},{x:246,y:180},{x:111,y:333},{x:12,y:351},{x:1668,y:70},{x:687,y:116},{x:1299,y:296},{x:885,y:53},{x:453,y:162},{x:786,y:125},{x:129,y:261},{x:588,y:225},{x:750,y:53},{x:1324,y:212},{x:300,y:369},{x:678,y:225},{x:1509,y:154},{x:561,y:107},{x:1123,y:112},{x:570,y:216},{x:552,y:53},{x:552,y:288},{x:1366,y:271},{x:1375,y:170},{x:1198,y:263},{x:39,y:315},{x:309,y:125},{x:147,y:98},{x:840,y:153},{x:552,y:234},{x:408,y:207},{x:1240,y:204},{x:732,y:279},{x:570,y:351},{x:1727,y:61},{x:471,y:71},{x:570,y:396},{x:1366,y:212},{x:1198,y:212},{x:408,y:125},{x:597,y:171},{x:642,y:225},{x:210,y:378},{x:426,y:216},{x:165,y:279},{x:633,y:243},{x:102,y:270},{x:687,y:89},{x:1660,y:11},{x:435,y:44},{x:1643,y:61},{x:255,y:351},{x:858,y:44},{x:1517,y:154},{x:264,y:306},{x:705,y:351},{x:345,y:243},{x:444,y:62},{x:1400,y:229},{x:111,y:342},{x:255,y:125},{x:1316,y:86},{x:327,y:198},{x:624,y:71},{x:345,y:288},{x:282,y:162},{x:84,y:306},{x:1333,y:86},{x:561,y:171},{x:876,y:252},{x:336,y:243},{x:345,y:107},{x:1559,y:78},{x:228,y:53},{x:1408,y:263},{x:651,y:252},{x:498,y:180},{x:318,y:125},{x:354,y:279},{x:390,y:360},{x:309,y:225},{x:246,y:189},{x:1198,y:221},{x:1433,y:187},{x:381,y:180},{x:1316,y:128},{x:552,y:62},{x:516,y:153},{x:1291,y:137},{x:876,y:62},{x:1274,y:288},{x:327,y:306},{x:336,y:71},{x:453,y:306},{x:777,y:207},{x:1265,y:145},{x:417,y:135},{x:147,y:107},{x:1299,y:128},{x:444,y:107},{x:741,y:62},{x:660,y:162},{x:723,y:324},{x:138,y:270},{x:822,y:98},{x:390,y:369},{x:1534,y:53},{x:354,y:53},{x:1551,y:19},{x:327,y:80},{x:741,y:243},{x:714,y:53},{x:660,y:53},{x:264,y:198},{x:1299,y:288},{x:174,y:198},{x:1265,y:78},{x:615,y:162},{x:786,y:315},{x:228,y:71},{x:1249,y:338},{x:777,y:116},{x:102,y:180},{x:525,y:44},{x:1299,y:120},{x:1652,y:28},{x:1223,y:221},{x:390,y:279},{x:138,y:333},{x:1425,y:179},{x:480,y:153},{x:516,y:216},{x:93,y:315},{x:1450,y:162},{x:291,y:89},{x:1391,y:254},{x:660,y:135},{x:534,y:62},{x:1223,y:103},{x:1408,y:137},{x:426,y:135},{x:1526,y:53},{x:849,y:71},{x:624,y:315},{x:291,y:216},{x:750,y:116},{x:165,y:107},{x:1618,y:19},{x:1450,y:196},{x:642,y:333},{x:228,y:207},{x:327,y:387},{x:777,y:297},{x:1207,y:204},{x:696,y:270},{x:885,y:261},{x:1333,y:196},{x:489,y:89},{x:453,y:153},{x:1316,y:78},{x:1366,y:162},{x:1559,y:11},{x:1299,y:372},{x:750,y:198},{x:273,y:333},{x:1190,y:112},{x:102,y:369},{x:102,y:333},{x:102,y:324},{x:1316,y:187},{x:1333,y:162},{x:1492,y:70},{x:1282,y:196},{x:1265,y:112},{x:552,y:35},{x:813,y:243},{x:417,y:153},{x:381,y:80},{x:831,y:80},{x:93,y:225},{x:1249,y:120},{x:516,y:180},{x:1173,y:86},{x:660,y:225},{x:1475,y:162},{x:255,y:98},{x:660,y:71},{x:237,y:225},{x:552,y:144},{x:822,y:243},{x:633,y:225},{x:1173,y:103},{x:543,y:333},{x:471,y:116},{x:462,y:288},{x:381,y:89},{x:156,y:360},{x:210,y:387},{x:1291,y:154},{x:813,y:225},{x:777,y:198},{x:624,y:198},{x:894,y:252},{x:678,y:89},{x:516,y:243},{x:327,y:369},{x:201,y:225},{x:219,y:288},{x:651,y:360},{x:1492,y:103},{x:30,y:369},{x:1425,y:162},{x:813,y:80},{x:1324,y:347},{x:1207,y:238},{x:426,y:162},{x:1307,y:95},{x:21,y:333},{x:1492,y:53},{x:597,y:62},{x:1282,y:137},{x:426,y:144},{x:1324,y:254},{x:606,y:35},{x:1156,y:86},{x:1710,y:44},{x:750,y:297},{x:651,y:71},{x:1383,y:137},{x:561,y:270},{x:534,y:26},{x:1232,y:70},{x:624,y:180},{x:543,y:387},{x:12,y:360},{x:669,y:351},{x:327,y:162},{x:804,y:153},{x:363,y:279},{x:660,y:207},{x:804,y:144},{x:579,y:116},{x:336,y:198},{x:534,y:153},{x:1257,y:313},{x:156,y:342},{x:102,y:297},{x:1509,y:11},{x:1349,y:112},{x:345,y:189},{x:264,y:396},{x:813,y:189},{x:588,y:198},{x:831,y:53},{x:516,y:116},{x:1240,y:229},{x:345,y:225},{x:282,y:107},{x:786,y:198},{x:345,y:162},{x:480,y:89},{x:192,y:71},{x:444,y:116},{x:1517,y:95},{x:1190,y:61},{x:669,y:53},{x:552,y:315},{x:66,y:297},{x:1190,y:229},{x:1475,y:78},{x:444,y:162},{x:255,y:107},{x:561,y:26},{x:228,y:198},{x:642,y:288},{x:561,y:207},{x:552,y:98},{x:291,y:369},{x:1341,y:53},{x:111,y:207},{x:1215,y:145},{x:246,y:44},{x:561,y:288},{x:1291,y:179},{x:417,y:89},{x:678,y:297},{x:1458,y:196},{x:669,y:125},{x:624,y:216},{x:534,y:207},{x:75,y:153},{x:1484,y:145},{x:1509,y:44},{x:156,y:369},{x:327,y:234},{x:1383,y:212},{x:1375,y:61},{x:183,y:89},{x:768,y:162},{x:1433,y:229},{x:1223,y:95},{x:651,y:333},{x:237,y:71},{x:300,y:387},{x:1702,y:44},{x:1400,y:103},{x:750,y:324},{x:264,y:98},{x:327,y:315},{x:633,y:135},{x:84,y:234},{x:1366,y:137},{x:1551,y:11},{x:291,y:71},{x:192,y:234},{x:669,y:89},{x:840,y:89},{x:777,y:135},{x:687,y:243},{x:1492,y:44},{x:372,y:89},{x:705,y:116},{x:507,y:216},{x:822,y:153},{x:768,y:44},{x:885,y:125},{x:1660,y:44},{x:786,y:324},{x:1500,y:36},{x:255,y:153},{x:1509,y:145},{x:642,y:279},{x:192,y:243},{x:940,y:62},{x:597,y:135},{x:1139,y:112},{x:588,y:53},{x:1484,y:187},{x:1249,y:137},{x:228,y:44},{x:345,y:234},{x:714,y:44},{x:381,y:116},{x:507,y:198},{x:282,y:387},{x:84,y:315},{x:444,y:270},{x:786,y:53},{x:1240,y:313},{x:300,y:288},{x:768,y:261},{x:570,y:378},{x:1282,y:263},{x:1383,y:271},{x:228,y:153},{x:399,y:351},{x:282,y:234},{x:129,y:396},{x:1249,y:254},{x:1458,y:204},{x:1190,y:78},{x:1450,y:44},{x:327,y:125},{x:291,y:387},{x:480,y:53},{x:183,y:125},{x:759,y:116},{x:714,y:369},{x:1282,y:364},{x:246,y:171},{x:138,y:189},{x:1173,y:78},{x:1232,y:61},{x:228,y:351},{x:444,y:207},{x:1643,y:36},{x:669,y:135},{x:48,y:279},{x:1467,y:196},{x:192,y:315},{x:354,y:225},{x:1324,y:280},{x:1677,y:28},{x:1299,y:154},{x:489,y:107},{x:1425,y:86},{x:1223,y:254},{x:1358,y:154},{x:525,y:135},{x:237,y:324},{x:228,y:125},{x:705,y:315},{x:867,y:207},{x:525,y:107},{x:1500,y:120},{x:471,y:252},{x:705,y:288},{x:1442,y:170},{x:3,y:387},{x:1341,y:389},{x:669,y:234},{x:840,y:189},{x:426,y:53},{x:1299,y:103},{x:264,y:171},{x:219,y:62},{x:1232,y:154},{x:345,y:180},{x:21,y:378},{x:1274,y:296},{x:1349,y:280},{x:570,y:180},{x:399,y:171},{x:1265,y:162},{x:291,y:98},{x:633,y:288},{x:741,y:342},{x:300,y:144},{x:678,y:216},{x:93,y:116},{x:426,y:125},{x:1526,y:145},{x:1526,y:95},{x:759,y:261},{x:327,y:297},{x:129,y:189},{x:579,y:252},{x:156,y:261},{x:561,y:342},{x:849,y:98},{x:345,y:71},{x:201,y:207},{x:300,y:396},{x:1475,y:154},{x:597,y:153},{x:741,y:180},{x:1492,y:120},{x:579,y:180},{x:606,y:288},{x:282,y:324},{x:894,y:116},{x:1265,y:128},{x:1257,y:128},{x:1232,y:238},{x:1618,y:28},{x:1417,y:196},{x:1324,y:179},{x:1752,y:19},{x:1299,y:187},{x:570,y:144},{x:1282,y:296},{x:588,y:98},{x:1366,y:238},{x:480,y:225},{x:1265,y:170},{x:1383,y:338},{x:759,y:270},{x:354,y:333},{x:705,y:89},{x:1257,y:170},{x:750,y:153},{x:696,y:234},{x:408,y:162},{x:1450,y:179},{x:705,y:396},{x:219,y:98},{x:1215,y:221},{x:642,y:26},{x:1593,y:11},{x:66,y:333},{x:561,y:216},{x:1207,y:246},{x:1240,y:322},{x:1526,y:28},{x:1316,y:204},{x:1341,y:238},{x:1534,y:145},{x:273,y:306},{x:336,y:234},{x:399,y:297},{x:1341,y:162},{x:174,y:153},{x:210,y:288},{x:363,y:107},{x:543,y:116},{x:75,y:387},{x:1492,y:187},{x:1391,y:221},{x:750,y:98},{x:246,y:378},{x:282,y:315},{x:903,y:89},{x:507,y:180},{x:309,y:297},{x:525,y:243},{x:1551,y:154},{x:1492,y:36},{x:246,y:53},{x:462,y:98},{x:723,y:144},{x:462,y:252},{x:804,y:53},{x:696,y:144},{x:453,y:270},{x:381,y:53},{x:507,y:80},{x:489,y:270},{x:1349,y:389},{x:606,y:44},{x:30,y:324},{x:300,y:315},{x:534,y:297},{x:66,y:342},{x:777,y:144},{x:1257,y:154},{x:201,y:180},{x:849,y:270},{x:372,y:279},{x:588,y:297},{x:237,y:80},{x:192,y:396},{x:435,y:98},{x:1240,y:154},{x:678,y:387},{x:1417,y:246},{x:795,y:89},{x:390,y:324},{x:723,y:198},{x:435,y:107},{x:1610,y:19},{x:804,y:198},{x:750,y:162},{x:732,y:333},{x:1190,y:86},{x:219,y:378},{x:471,y:125},{x:390,y:261},{x:723,y:279},{x:363,y:324},{x:903,y:135},{x:777,y:315},{x:66,y:351},{x:1391,y:204},{x:255,y:62},{x:255,y:315},{x:327,y:288},{x:354,y:116},{x:1299,y:86},{x:633,y:26},{x:1316,y:372},{x:552,y:189},{x:813,y:180},{x:1282,y:372},{x:1282,y:187},{x:246,y:135},{x:759,y:234},{x:498,y:71},{x:309,y:252},{x:885,y:107},{x:687,y:71},{x:1223,y:70},{x:534,y:270},{x:1207,y:263},{x:273,y:171},{x:705,y:378},{x:1249,y:322},{x:903,y:53},{x:435,y:153},{x:678,y:71},{x:255,y:387},{x:363,y:288},{x:453,y:252},{x:120,y:171},{x:606,y:53},{x:615,y:270},{x:1752,y:86},{x:66,y:306},{x:1542,y:70},{x:732,y:144},{x:804,y:225},{x:381,y:144},{x:543,y:216},{x:372,y:288},{x:228,y:89},{x:624,y:189},{x:732,y:189},{x:606,y:207},{x:228,y:180},{x:534,y:98},{x:922,y:80},{x:120,y:351},{x:1366,y:179},{x:588,y:288},{x:1316,y:120},{x:1349,y:145},{x:1207,y:313},{x:1450,y:78},{x:156,y:234},{x:120,y:252},{x:174,y:297},{x:768,y:89},{x:435,y:261},{x:84,y:162},{x:1324,y:364},{x:651,y:351},{x:606,y:324},{x:1383,y:53},{x:345,y:324},{x:1274,y:338},{x:768,y:288},{x:1324,y:229},{x:399,y:116},{x:1341,y:380},{x:147,y:180},{x:480,y:162},{x:1358,y:170},{x:561,y:135},{x:1207,y:305},{x:1349,y:271},{x:1358,y:70},{x:1307,y:288},{x:1265,y:246},{x:714,y:62},{x:1274,y:179},{x:1375,y:86},{x:750,y:80},{x:201,y:315},{x:624,y:153},{x:723,y:116},{x:777,y:288},{x:1232,y:86},{x:750,y:306},{x:1274,y:280},{x:786,y:144},{x:1307,y:78},{x:1207,y:70},{x:462,y:306},{x:1366,y:196},{x:597,y:225},{x:507,y:234},{x:1484,y:120},{x:597,y:243},{x:786,y:243},{x:246,y:360},{x:597,y:71},{x:507,y:342},{x:462,y:297},{x:714,y:171},{x:1249,y:221},{x:219,y:153},{x:1349,y:246},{x:903,y:116},{x:219,y:351},{x:561,y:116},{x:219,y:342},{x:1232,y:280},{x:1433,y:196},{x:1467,y:95},{x:588,y:107},{x:1366,y:204},{x:1282,y:204},{x:642,y:189},{x:786,y:171},{x:1643,y:53},{x:741,y:44},{x:795,y:297},{x:1181,y:103},{x:66,y:135},{x:498,y:198},{x:579,y:369},{x:1635,y:70},{x:1291,y:187},{x:1509,y:61},{x:39,y:342},{x:714,y:207},{x:93,y:125},{x:1433,y:221},{x:336,y:144},{x:651,y:279},{x:399,y:279},{x:543,y:225},{x:1207,y:196},{x:444,y:189},{x:534,y:225},{x:372,y:62},{x:273,y:80},{x:1467,y:154},{x:1442,y:204},{x:615,y:234},{x:705,y:189},{x:120,y:189},{x:228,y:306},{x:237,y:180},{x:759,y:171},{x:723,y:125},{x:1240,y:61},{x:1282,y:128},{x:750,y:342},{x:39,y:378},{x:1282,y:95},{x:660,y:342},{x:246,y:71},{x:1198,y:95},{x:93,y:180},{x:543,y:360},{x:228,y:189},{x:1752,y:11},{x:1207,y:221},{x:642,y:162},{x:390,y:153},{x:795,y:315},{x:570,y:369},{x:1299,y:78},{x:723,y:171},{x:174,y:80},{x:1576,y:11},{x:903,y:98},{x:1685,y:53},{x:363,y:189},{x:1316,y:196},{x:651,y:44},{x:1316,y:179},{x:642,y:216},{x:1601,y:28},{x:426,y:243},{x:687,y:153},{x:840,y:71},{x:1324,y:137},{x:561,y:333},{x:597,y:261},{x:93,y:153},{x:1324,y:170},{x:219,y:306},{x:102,y:225},{x:363,y:98},{x:615,y:89},{x:138,y:378},{x:777,y:270},{x:660,y:324},{x:750,y:107},{x:327,y:396},{x:453,y:135},{x:1710,y:36},{x:201,y:171},{x:795,y:198},{x:399,y:162},{x:426,y:333},{x:696,y:107},{x:1307,y:128},{x:282,y:342},{x:615,y:153},{x:1080,y:137},{x:435,y:35},{x:165,y:252},{x:750,y:135},{x:237,y:333},{x:1593,y:19},{x:75,y:270},{x:183,y:360},{x:714,y:261},{x:498,y:207},{x:1274,y:95},{x:363,y:297},{x:417,y:279},{x:273,y:378},{x:399,y:125},{x:210,y:216},{x:1375,y:254},{x:183,y:171},{x:885,y:243},{x:192,y:80},{x:21,y:324},{x:192,y:98},{x:840,y:98},{x:309,y:333},{x:246,y:261},{x:669,y:252},{x:714,y:252},{x:300,y:216},{x:354,y:297},{x:1677,y:44},{x:210,y:53},{x:264,y:288},{x:1215,y:263},{x:669,y:116},{x:111,y:270},{x:453,y:71},{x:309,y:89},{x:381,y:360},{x:1232,y:271},{x:1215,y:246},{x:435,y:135},{x:354,y:107},{x:867,y:62},{x:1551,y:70},{x:1383,y:221},{x:48,y:387},{x:1324,y:246},{x:1257,y:70},{x:606,y:98},{x:922,y:98},{x:1475,y:145},{x:669,y:270},{x:1223,y:305},{x:606,y:107},{x:633,y:162},{x:624,y:171},{x:858,y:261},{x:192,y:135},{x:1526,y:36},{x:651,y:35},{x:408,y:333},{x:561,y:261},{x:399,y:135},{x:885,y:71},{x:1652,y:78},{x:696,y:53},{x:678,y:333},{x:1517,y:61},{x:768,y:153},{x:120,y:180},{x:723,y:207},{x:1375,y:103},{x:552,y:396},{x:300,y:243},{x:543,y:171},{x:597,y:180},{x:552,y:270},{x:1450,y:145},{x:795,y:207},{x:282,y:80},{x:453,y:62},{x:561,y:315},{x:615,y:125},{x:1249,y:78},{x:192,y:225},{x:1668,y:61},{x:1358,y:280},{x:705,y:153},{x:1383,y:128},{x:1223,y:86},{x:597,y:198},{x:913,y:89},{x:1433,y:70},{x:552,y:360},{x:624,y:288},{x:219,y:135},{x:291,y:306},{x:714,y:144},{x:219,y:171},{x:660,y:80},{x:642,y:80},{x:1408,y:238},{x:75,y:288},{x:579,y:44},{x:165,y:80},{x:102,y:171},{x:642,y:234},{x:579,y:207},{x:1333,y:280},{x:534,y:234},{x:255,y:207},{x:633,y:53},{x:354,y:135},{x:129,y:387},{x:597,y:342},{x:1668,y:36},{x:1249,y:61},{x:1282,y:170},{x:1618,y:103},{x:1274,y:196},{x:210,y:207},{x:1349,y:53},{x:84,y:135},{x:21,y:342},{x:687,y:144},{x:417,y:369},{x:579,y:125},{x:858,y:180},{x:120,y:288},{x:723,y:98},{x:1425,y:221},{x:1341,y:288},{x:1291,y:296},{x:1257,y:280},{x:1391,y:86},{x:543,y:243},{x:813,y:89},{x:597,y:144},{x:318,y:360},{x:1333,y:95},{x:336,y:396},{x:813,y:144},{x:660,y:234},{x:1333,y:263},{x:1307,y:162},{x:1240,y:338},{x:111,y:306},{x:1349,y:162},{x:1265,y:70},{x:453,y:98},{x:669,y:216},{x:183,y:216},{x:1358,y:103},{x:1299,y:170},{x:129,y:288},{x:786,y:89},{x:588,y:135},{x:1249,y:128},{x:1324,y:263},{x:417,y:270},{x:1652,y:19},{x:228,y:342},{x:147,y:198},{x:777,y:180},{x:840,y:80},{x:1316,y:95},{x:525,y:8},{x:255,y:360},{x:390,y:116},{x:1257,y:212},{x:579,y:243},{x:660,y:144},{x:111,y:387},{x:1391,y:271},{x:390,y:252},{x:1568,y:19},{x:1375,y:246},{x:714,y:80},{x:759,y:189},{x:255,y:171},{x:678,y:342},{x:1660,y:70},{x:1425,y:204},{x:913,y:125},{x:1492,y:112},{x:264,y:116},{x:894,y:98},{x:1349,y:254},{x:507,y:270},{x:1215,y:254},{x:390,y:171},{x:489,y:252},{x:1358,y:120},{x:705,y:98},{x:687,y:279},{x:372,y:333},{x:444,y:306},{x:1442,y:187},{x:1223,y:128},{x:282,y:116},{x:1358,y:221},{x:1375,y:288},{x:282,y:53},{x:1375,y:238},{x:687,y:342},{x:228,y:315},{x:678,y:198},{x:543,y:279},{x:1181,y:112},{x:1492,y:137},{x:669,y:369},{x:255,y:144},{x:678,y:243},{x:219,y:369},{x:687,y:324},{x:840,y:53},{x:678,y:234},{x:597,y:333},{x:282,y:369},{x:318,y:71},{x:759,y:252},{x:363,y:243},{x:669,y:324},{x:1467,y:162},{x:408,y:261},{x:723,y:234},{x:804,y:107},{x:1517,y:53},{x:570,y:198},{x:282,y:153},{x:1417,y:221},{x:552,y:162},{x:291,y:351},{x:417,y:53},{x:1299,y:246},{x:444,y:351},{x:1719,y:19},{x:534,y:180},{x:1156,y:78},{x:138,y:261},{x:1475,y:196},{x:579,y:279},{x:354,y:216},{x:228,y:171},{x:606,y:216},{x:1324,y:154},{x:264,y:189},{x:1391,y:347},{x:264,y:342},{x:597,y:107},{x:588,y:180},{x:30,y:342},{x:543,y:369},{x:795,y:162},{x:732,y:198},{x:597,y:80},{x:1542,y:86},{x:1274,y:154},{x:714,y:378},{x:813,y:153},{x:201,y:396},{x:372,y:171},{x:147,y:288},{x:444,y:53},{x:381,y:306},{x:282,y:351},{x:1316,y:212},{x:1500,y:204},{x:840,y:180},{x:1408,y:179},{x:507,y:279},{x:147,y:360},{x:210,y:62},{x:336,y:261},{x:1249,y:187},{x:1450,y:204},{x:651,y:116},{x:102,y:153},{x:1307,y:112},{x:1265,y:305},{x:165,y:153},{x:489,y:125},{x:1500,y:145},{x:444,y:234},{x:1458,y:179},{x:1257,y:112},{x:534,y:306},{x:1685,y:61},{x:750,y:71},{x:624,y:243},{x:1417,y:145},{x:408,y:369},{x:66,y:315},{x:660,y:288},{x:1148,y:95},{x:1492,y:128},{x:75,y:144},{x:876,y:243},{x:822,y:62},{x:795,y:288},{x:84,y:324},{x:732,y:125},{x:165,y:315},{x:120,y:279},{x:264,y:234},{x:849,y:53},{x:1316,y:154},{x:931,y:80},{x:588,y:35},{x:354,y:270},{x:1660,y:53},{x:381,y:261},{x:543,y:162},{x:723,y:44},{x:525,y:80},{x:1215,y:103},{x:1274,y:322},{x:228,y:107},{x:777,y:279},{x:1618,y:36},{x:750,y:125},{x:1450,y:154},{x:354,y:378},{x:1417,y:187},{x:1626,y:36},{x:922,y:71},{x:786,y:333},{x:480,y:35},{x:813,y:171},{x:39,y:306},{x:156,y:189},{x:138,y:162},{x:1123,y:120},{x:1324,y:288},{x:363,y:387},{x:111,y:279},{x:570,y:35},{x:1358,y:338},{x:615,y:180},{x:633,y:207},{x:525,y:89},{x:1458,y:162},{x:363,y:396},{x:66,y:288},{x:1316,y:288},{x:507,y:243},{x:723,y:387},{x:219,y:279},{x:588,y:26},{x:1509,y:137},{x:1366,y:338},{x:732,y:180},{x:687,y:333},{x:516,y:288},{x:354,y:324},{x:1291,y:305},{x:1316,y:263},{x:624,y:306},{x:615,y:71},{x:885,y:234},{x:1223,y:204},{x:1274,y:120},{x:156,y:351},{x:795,y:306},{x:633,y:180},{x:759,y:288},{x:714,y:225},{x:741,y:387},{x:516,y:207},{x:183,y:342},{x:1165,y:95},{x:264,y:315},{x:1148,y:112},{x:336,y:162},{x:1240,y:162},{x:615,y:144},{x:1635,y:19},{x:1349,y:204},{x:345,y:252},{x:120,y:324},{x:651,y:62},{x:1265,y:137},{x:1181,y:263},{x:120,y:198},{x:516,y:44},{x:1316,y:221},{x:786,y:80},{x:588,y:243},{x:1400,y:86},{x:498,y:144},{x:1299,y:280},{x:1257,y:187},{x:1383,y:78},{x:534,y:107},{x:714,y:315},{x:750,y:180},{x:417,y:125},{x:1425,y:212},{x:210,y:351},{x:1299,y:238},{x:804,y:171},{x:390,y:135},{x:1307,y:280},{x:876,y:53},{x:1113,y:120},{x:633,y:261},{x:651,y:89},{x:606,y:333},{x:588,y:116},{x:705,y:135},{x:1257,y:204},{x:156,y:306},{x:300,y:98},{x:750,y:252},{x:633,y:297},{x:120,y:333},{x:318,y:315},{x:507,y:35},{x:48,y:324},{x:102,y:315},{x:777,y:125},{x:480,y:306},{x:1282,y:246},{x:768,y:180},{x:660,y:351},{x:210,y:333},{x:309,y:270},{x:489,y:234},{x:246,y:125},{x:570,y:252},{x:12,y:378},{x:822,y:387},{x:48,y:360},{x:1299,y:254},{x:282,y:171},{x:579,y:315},{x:759,y:333},{x:399,y:80},{x:687,y:125},{x:165,y:378},{x:1358,y:95},{x:66,y:270},{x:417,y:234},{x:1408,y:187},{x:1358,y:78},{x:363,y:89},{x:408,y:198},{x:1181,y:95},{x:1551,y:78},{x:1668,y:78},{x:777,y:153},{x:1685,y:19},{x:309,y:396},{x:696,y:306},{x:597,y:279},{x:732,y:324},{x:1500,y:137},{x:1400,y:238},{x:417,y:107},{x:732,y:243},{x:768,y:98},{x:813,y:71},{x:705,y:80},{x:1198,y:70},{x:831,y:89},{x:1383,y:296},{x:336,y:342},{x:786,y:62},{x:543,y:396},{x:264,y:333},{x:597,y:162},{x:147,y:279},{x:507,y:171},{x:687,y:306},{x:1139,y:95},{x:1341,y:95},{x:1685,y:28},{x:669,y:62},{x:606,y:80},{x:66,y:378},{x:12,y:342},{x:1341,y:221},{x:381,y:153},{x:1467,y:187},{x:120,y:207},{x:1626,y:78},{x:1207,y:103},{x:741,y:288},{x:201,y:234},{x:192,y:198},{x:1492,y:162},{x:1299,y:137},{x:246,y:80},{x:786,y:189},{x:1341,y:86},{x:300,y:153},{x:1442,y:179},{x:579,y:225},{x:1274,y:263},{x:588,y:44},{x:1694,y:28},{x:507,y:315},{x:570,y:225},{x:426,y:198},{x:1509,y:36},{x:147,y:333},{x:1660,y:28},{x:1274,y:330},{x:525,y:252},{x:606,y:279},{x:507,y:333},{x:435,y:80},{x:732,y:396},{x:1299,y:221},{x:714,y:71},{x:246,y:62},{x:786,y:180},{x:291,y:288},{x:795,y:153},{x:444,y:297},{x:345,y:80},{x:327,y:207},{x:318,y:135},{x:516,y:351},{x:426,y:153},{x:264,y:162},{x:318,y:261},{x:1618,y:11},{x:318,y:279},{x:228,y:297},{x:840,y:171},{x:318,y:171},{x:57,y:387},{x:1467,y:137},{x:21,y:315},{x:561,y:125},{x:426,y:62},{x:534,y:189},{x:1291,y:86},{x:1349,y:288},{x:795,y:216},{x:1324,y:103},{x:633,y:125},{x:408,y:135},{x:642,y:107},{x:489,y:225},{x:84,y:225},{x:435,y:270},{x:1215,y:120},{x:1761,y:19},{x:561,y:387},{x:1375,y:137},{x:1610,y:36},{x:210,y:135},{x:1635,y:86},{x:426,y:171},{x:426,y:288},{x:1333,y:271},{x:1500,y:53},{x:543,y:98},{x:174,y:342},{x:777,y:80},{x:192,y:333},{x:1274,y:372},{x:1408,y:154},{x:426,y:279},{x:696,y:387},{x:129,y:369},{x:714,y:234},{x:759,y:107},{x:1366,y:154},{x:201,y:324},{x:264,y:153},{x:480,y:216},{x:525,y:261},{x:534,y:125},{x:922,y:89},{x:138,y:360},{x:12,y:396},{x:57,y:297},{x:561,y:351},{x:12,y:333},{x:561,y:35},{x:651,y:98},{x:318,y:189},{x:1542,y:95},{x:489,y:144},{x:246,y:315},{x:642,y:44},{x:1223,y:313},{x:1324,y:187},{x:795,y:107},{x:705,y:342},{x:1517,y:86},{x:444,y:180},{x:1181,y:246},{x:1232,y:162},{x:714,y:297},{x:660,y:306},{x:372,y:252},{x:1408,y:212},{x:1207,y:254},{x:1291,y:170},{x:876,y:89},{x:480,y:234},{x:714,y:360},{x:1652,y:86},{x:1257,y:296},{x:228,y:243},{x:552,y:135},{x:300,y:116},{x:129,y:153},{x:354,y:62},{x:291,y:144},{x:867,y:89},{x:705,y:252},{x:660,y:243},{x:75,y:243},{x:363,y:216},{x:318,y:351},{x:498,y:171},{x:273,y:135},{x:732,y:153},{x:669,y:279},{x:696,y:216},{x:291,y:116},{x:786,y:135},{x:309,y:234},{x:264,y:360},{x:1391,y:179},{x:552,y:125},{x:300,y:107},{x:1442,y:86},{x:885,y:80},{x:489,y:216},{x:273,y:342},{x:1249,y:170},{x:30,y:315},{x:1400,y:179},{x:615,y:171},{x:111,y:216},{x:111,y:252},{x:795,y:171},{x:1534,y:154},{x:1736,y:36},{x:183,y:153},{x:1341,y:263},{x:741,y:315},{x:642,y:243},{x:633,y:306},{x:1333,y:137},{x:1736,y:28},{x:678,y:360},{x:336,y:306},{x:759,y:225},{x:723,y:162},{x:75,y:324},{x:381,y:396},{x:786,y:207},{x:399,y:333},{x:507,y:53},{x:606,y:252},{x:498,y:44},{x:471,y:270},{x:93,y:135},{x:1475,y:120},{x:435,y:315},{x:1316,y:238},{x:913,y:71},{x:309,y:288},{x:1088,y:137},{x:66,y:207},{x:435,y:207},{x:300,y:62},{x:1542,y:61},{x:759,y:306},{x:885,y:98},{x:678,y:189},{x:1249,y:70},{x:165,y:387},{x:1433,y:78},{x:732,y:162},{x:750,y:351},{x:1139,y:103},{x:192,y:62},{x:696,y:116},{x:273,y:369},{x:597,y:207},{x:237,y:98},{x:390,y:53},{x:1324,y:238},{x:579,y:288},{x:309,y:180},{x:237,y:144},{x:759,y:62},{x:894,y:107},{x:462,y:171},{x:849,y:261},{x:84,y:243},{x:696,y:189},{x:453,y:35},{x:696,y:153},{x:273,y:351},{x:1391,y:137},{x:714,y:125},{x:615,y:189},{x:444,y:225},{x:210,y:44},{x:1341,y:120},{x:201,y:144},{x:741,y:125},{x:804,y:342},{x:48,y:288},{x:1097,y:128},{x:156,y:324},{x:714,y:396},{x:651,y:234},{x:363,y:53},{x:714,y:243},{x:1324,y:78},{x:1333,y:120},{x:552,y:342},{x:426,y:44},{x:291,y:198},{x:138,y:297},{x:1240,y:254},{x:705,y:162},{x:1458,y:53},{x:606,y:26},{x:183,y:279},{x:417,y:198},{x:399,y:198},{x:1417,y:204},{x:1232,y:103},{x:1333,y:397},{x:1131,y:112},{x:1417,y:229},{x:174,y:162},{x:453,y:315},{x:777,y:162},{x:624,y:225},{x:1307,y:204},{x:1291,y:204},{x:1517,y:137},{x:642,y:116},{x:525,y:98},{x:570,y:53},{x:1366,y:120},{x:831,y:198},{x:669,y:162},{x:831,y:62},{x:282,y:378},{x:525,y:144},{x:273,y:180},{x:390,y:80},{x:1282,y:313},{x:192,y:378},{x:1316,y:246},{x:309,y:116},{x:579,y:135},{x:732,y:89},{x:408,y:153},{x:471,y:306},{x:570,y:324},{x:1685,y:44},{x:300,y:71},{x:705,y:387},{x:1324,y:128},{x:480,y:107},{x:1391,y:95},{x:327,y:107},{x:471,y:180},{x:372,y:135},{x:174,y:107},{x:1240,y:280},{x:687,y:315},{x:201,y:387},{x:777,y:324},{x:39,y:351},{x:399,y:252},{x:552,y:324},{x:255,y:369},{x:192,y:144},{x:678,y:125},{x:444,y:71},{x:507,y:26},{x:588,y:162},{x:426,y:342},{x:1257,y:86},{x:615,y:135},{x:1433,y:86},{x:1358,y:145},{x:1156,y:70},{x:273,y:53},{x:786,y:297},{x:1736,y:86},{x:579,y:324},{x:931,y:71},{x:165,y:369},{x:579,y:153},{x:804,y:98},{x:219,y:180},{x:1349,y:229},{x:1417,y:95},{x:372,y:324},{x:327,y:135},{x:165,y:351},{x:1610,y:95},{x:381,y:288},{x:264,y:297},{x:1383,y:196},{x:552,y:333},{x:579,y:270},{x:273,y:360},{x:606,y:225},{x:651,y:297},{x:156,y:270},{x:372,y:378},{x:1291,y:238},{x:435,y:198},{x:516,y:171},{x:471,y:53},{x:498,y:234},{x:759,y:153},{x:669,y:98},{x:1492,y:154},{x:1744,y:3},{x:435,y:342},{x:300,y:89},{x:1232,y:330},{x:84,y:351},{x:849,y:162},{x:489,y:279},{x:1458,y:145},{x:282,y:288},{x:426,y:80},{x:300,y:162},{x:525,y:324},{x:66,y:396},{x:417,y:171},{x:1450,y:70},{x:1232,y:212},{x:1240,y:347},{x:1509,y:196},{x:1198,y:86},{x:732,y:71},{x:714,y:270},{x:372,y:153},{x:507,y:297},{x:1677,y:19},{x:156,y:396},{x:759,y:315},{x:1375,y:271},{x:93,y:216},{x:417,y:80},{x:705,y:180},{x:381,y:387},{x:390,y:144},{x:534,y:369},{x:228,y:80},{x:1156,y:112},{x:237,y:378},{x:1375,y:44},{x:1383,y:229},{x:426,y:89},{x:255,y:216},{x:228,y:279},{x:363,y:234},{x:804,y:71},{x:1198,y:254},{x:1391,y:78},{x:759,y:162},{x:93,y:234},{x:1652,y:44},{x:1375,y:145},{x:1400,y:137},{x:516,y:17},{x:1534,y:78},{x:1215,y:296},{x:858,y:89},{x:1475,y:95},{x:246,y:116},{x:309,y:98},{x:940,y:89},{x:525,y:71},{x:1551,y:187},{x:192,y:351},{x:174,y:171},{x:435,y:351},{x:1417,y:355},{x:570,y:153},{x:84,y:207},{x:75,y:216},{x:1551,y:61},{x:354,y:98},{x:624,y:162},{x:660,y:333},{x:84,y:369},{x:1240,y:179},{x:1442,y:221},{x:570,y:207},{x:606,y:342},{x:1626,y:11},{x:327,y:279},{x:453,y:116},{x:1694,y:70},{x:543,y:153},{x:1232,y:137},{x:1366,y:263},{x:759,y:297},{x:1492,y:179},{x:669,y:342},{x:156,y:162},{x:651,y:180},{x:102,y:135},{x:1643,y:95},{x:66,y:279},{x:255,y:80},{x:363,y:153},{x:633,y:252},{x:561,y:198},{x:462,y:89},{x:687,y:207},{x:489,y:35},{x:1257,y:238},{x:498,y:53},{x:147,y:387},{x:165,y:98},{x:1333,y:246},{x:840,y:107},{x:1391,y:263},{x:201,y:306},{x:714,y:333},{x:237,y:44}],Xl=async(e,t,n)=>{let r,i;const a={main:null},o={mapSize:{width:1024,height:512},globeRadius:200,dotsAmount:20,colours:{globeDots:"rgb(255, 255, 255)"},alphas:{globe:0}},s={object:null,controls:null,angles:{current:{azimuthal:null,polar:null},target:{azimuthal:null,polar:null}}},c={dots:{current:0,total:170,points:[]},globe:{current:0,total:80}};let h=!1;function u(){alert("WebGL not supported. Please use a browser that supports WebGL.")}function l(){r=new Nr,i=new Pa({canvas:t,antialias:!0,alpha:!0}),i.setSize(t.clientWidth,t.clientHeight),i.setPixelRatio(1),i.setClearColor(0,0),a.main=new Hn,a.main.name="Main",r.add(a.main),f(),d(),m(),p(),x();const w=function(){e.width=1400,e.height=1200,e.style.width="1400px",e.style.height="1200px",s.object.aspect=e.offsetWidth/e.offsetHeight,s.object.updateProjectionMatrix(),i.setSize(e.offsetWidth,e.offsetHeight)};window.addEventListener("resize",w),window.addEventListener("orientationchange",()=>{setTimeout(w,0)}),w()}function f(){s.object=new ze(60,t.clientWidth/t.clientHeight,1,1e4),s.object.position.z=o.globeRadius*2.6}function d(){s.controls=new Wl(s.object,t),s.controls.enableKeys=!1,s.controls.enablePan=!1,s.controls.enableZoom=!1,s.controls.enableDamping=!1,s.controls.enableRotate=!1,s.angles.current.azimuthal=-Math.PI,s.angles.current.polar=180}function p(){i.render(r,s.object)}"hidden"in document?document.addEventListener("visibilitychange",y):"mozHidden"in document?document.addEventListener("mozvisibilitychange",y):"webkitHidden"in document?document.addEventListener("webkitvisibilitychange",y):"msHidden"in document?document.addEventListener("msvisibilitychange",y):"onfocusin"in document?document.onfocusin=document.onfocusout=y:window.onpageshow=window.onpagehide=window.onfocus=window.onblur=y;function y(w){const A="visible",P="hidden",S={focus:A,focusin:A,pageshow:A,blur:P,focusout:P,pagehide:P};w=w||window.event,w.type in S?h=!0:h=!1}function x(){h===!1&&requestAnimationFrame(x),a.globeDots&&_(),s.controls.setAzimuthalAngle(Math.cos(Date.now()*5e-7)*-360),s.controls.setPolarAngle(1),s.controls.update(),p()}function m(){const w=o.globeRadius-o.globeRadius*.02,A=64,P=64,S=128,C=document.createElement("canvas");C.width=S,C.height=S;const D=C.getContext("2d");D.rect(0,0,S,S);const H=D.createLinearGradient(0,0,0,S);H.addColorStop(1,"rgba(0,0,0,0.02)"),H.addColorStop(1,"rgba(0,0,0,0.02)"),H.addColorStop(1,"rgba(0,0,0,0.02)"),D.fillStyle=H,D.fill();const L=new De(C);L.needsUpdate=!0;const E=new Qn(w,A,P),B=new nt({map:L,transparent:!0,opacity:0});window.globe=new Ke(E,B),a.globe=new Hn,a.globe.name="Globe",a.globe.add(globe),a.main.add(a.globe),v()}function v(){const w=new le,A=16,P=A/2,S=document.createElement("canvas");S.width=A,S.height=A;const C=S.getContext("2d");C.beginPath(),C.arc(P,P,P,0,2*Math.PI),C.fillStyle=o.colours.globeDots,C.fill();const D=new De(S);D.needsUpdate=!0;const H=new Ot({map:D,size:o.globeRadius/200}),L=function(E,B){const I=new T(0,0,0);w.vertices.push(I);const N=M(E,B);c.dots.points.push(new T(N.x,N.y,N.z))};for(let E=0;E<Fi.length;E++)L(Fi[E].x,Fi[E].y);a.globeDots=new Gr(w,H),a.globe.add(a.globeDots)}const g=function(w){return w<.5?4*w*w*w:(w-1)*(2*w-2)*(2*w-2)+1};function _(){if(c.dots.current<=c.dots.total){const w=a.globeDots.geometry.vertices,A=w.length;for(let P=0;P<A;P++){let S=g(c.dots.current/c.dots.total);if(S+=S*(P/A),S>1&&(S=1),w[P].x=c.dots.points[P].x*S,w[P].y=c.dots.points[P].y*S,w[P].z=c.dots.points[P].z*S,P===0){let C=(s.angles.current.azimuthal-s.angles.target.azimuthal)*S;C=s.angles.current.azimuthal-C,s.controls.setAzimuthalAngle(C);let D=(s.angles.current.polar-s.angles.target.polar)*S;D=s.angles.current.polar-D,s.controls.setPolarAngle(D)}}c.dots.current++,a.globeDots.geometry.verticesNeedUpdate=!0,n.classList.add("active")}}function M(w,A){w=(w-o.mapSize.width)/o.mapSize.width*-180,A=(A-o.mapSize.height)/o.mapSize.height*-90;const P=Math.cos(A/180*Math.PI)*o.globeRadius,S=Math.cos(w/180*Math.PI)*P,C=Math.sin(A/180*Math.PI)*o.globeRadius,D=Math.sin(w/180*Math.PI)*P;return{x:S,y:C,z:D}}window.WebGLRenderingContext?l():u()};export{ql as _hW,Xl as s_7RN0l4GTFBI};
